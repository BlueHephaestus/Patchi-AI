<hyphenated>	freman: subcommands, basically
<hyphenated>	freman: look at how the 'go' tool implements those
<_cb>	in oop inheritance i could say mamals drink milk, dog(mammal), hound(dog) great sense of smell,   horse(mammal) eats grass can i do that in go? how, interfaces?
<cronos>	_cb: go is not strictly speaking oop language. there's no inheritance.
<cronos>	don't try to twist it into something you're familiar with, that won't end well
<ebonics>	you know whats a good feeling
<ebonics>	when you struggle with something for like an hour
<ebonics>	getting 0 values from some external lib
<ebonics>	then you get some perty output like this [{1 2 1} {2 3 1} {2 6 10} {3 4 3} {4 5 1} {5 6 2}]
<ebonics>	cronos, idk. people keep saying it's not like an oop language but it's got a lot of properties of one from what ive seen
<ebonics>	in my.. 1 day of using go
<_cb>	cronos i know go is not oops. am wondering if one can do in go what oop does with multiple levels of inheritance
<cronos>	_cb: you can use composition and embedded struct fields to get similar effects
<hfaafb>	you're swimming against the current if you force classic oop patterns onto go
<cronos>	but really don't try to build type hierarchies
<cronos>	write what makes sense
<cronos>	ebonics: there are a lot of oo-ish features but you won't e.g. do gof patterns
<ebonics>	thats true cronos, but you can still wrap structs and override methods and use reflection and stuff
<ebonics>	it's not like c or something
<cronos>	you can but you generally shouldn't primarily use those things
<ebonics>	how come
<ebonics>	i understand why people might not want to use reflection, it somewhat defeats the purpose of static typing
<ebonics>	but the other stuff seems pretty fine to me?
<_cb>	so how would you write a go program where horses and dogs share mamal characteristics. pitbulls and dobermans share dog characteristcs ?
<hfaafb>	_cb: no one writes those programs
<hfaafb>	write real programs
<hfaafb>	ask real questions
<|craig|>	_cb: decide where you want polymorphism. in those places use interfaces
<|craig|>	_cb: how you impelment the interfaces is an implementation detail that can be done with composition, or through calling shared methods as desired
<_cb>	all forms have fields and all forms need to be processed. the type of fields and the type of processing will vary depending on the form
<ebonics>	_cb, you would use an interface for that design
<|craig|>	_cb: if you have something that needs to be polymorphic over some set of forms, put the methods it needs in an interface
<|craig|>	then implement them however you want, either by composition or some other means
<_cb>	i can see how interfaces get me to the first level  (all mamals drink milk) struggling on how interfaces get me to the second level (horses and dogs)
<ebonics>	idk if
<_cb>	can you have multiple interfaces for a struct? that would solve the problem (i think)
<|craig|>	_cb all structs implement many interfaces (infinate really)
<hfaafb>	all types
<hfaafb>	can implement n interfaces
<ebonics>	i actually dont understand that
<_cb>	|craig| ok need to attack it from that angle. maybe that is the solution
<jud>	are there any open source projects which are based off google's bigtable paper?
<|craig|>	just define what ever interfaces you want that have methods your types have and they imeplement them
<|craig|>	all your animals have a legcount method? you can make an interface for leggy things and you can count them
<ebonics>	in the go docs it says that the methods are technically inside the containing package and not in the struct
<ebonics>	so how can the struct be said to implement any interfaces
<_cb>	i don't think the struct implements an interface. i think the methods just satisfy the signature of the interface (but am a go newbie)
<ebonics>	my guess would be that the method signatures get injected into the structs and delegate to the outer package
<ebonics>	but i actually dont know, im too lazy to go look at the src code
<ebonics>	i probably wouldnt understand it anyway
<_cb>	ie type x interface{ mymethod() string} will be satisfied by func (x whatever) mymethod()string { return somestring}
<ebonics>	say im using a 3rd party library that uses some form of chaining. and i want to build on top of the lib to add more methods to chain, what would be the proper way to implement that in go?
<ebonics>	i mean in terms of packages it seems all weird
<_cb>	am probably missing something but multiple interfaces won't solve it. in classical oop the drink milk method would apply to all mammals but in go i would have to implement a drink milk method for dogs and another for horses
<ebonics>	_cb, i still have no idea what youre talking about m8
<ebonics>	show some code or something so i can speak your language
<taruti>	what are you really trying to implement?
<ebonics>	me or _cb ?
<_cb>	a form is a collection of fields. all forms need to be populated and validated. in classical oop i would have an object that has a slice of fields and a populate and validate abstract methods. each form would implement those methods.
<_cb>	getting late. answer is probably on interfaces. maybe after some sleep ;)
<taruti>	typically trying to implement "classic" oop (which is not that classic) in go is the wrong way
<sammy007>	how to reverse a slice of bytes?
<taruti>	for-loop? :) or write a function?
<freman>	i didn't... sorry, i am too tired to read any more i just did the lazy way... var cmds = make(map[string]func(...string) error); func init() {cmds["foo"] bar}
<cronos>	sammy007: google "reverse an array"
<cronos>	just a for loop
<taruti>	for i:=0; i<len(s)/2; i++ { s[i],s[len(s)-i] = s[len(s)-i], s[i] } or somesuch
<cronos>	yup
<taruti>	(although just starting to drink my morning caffeine...)
<cronos>	-1 for indexes probably
<taruti>	yes, add the -1 :)
<bananaphone>	howdy ho
<zhaoym>	say i have 2 packages s and t. in package s i have a container s storing instances of type t.t. but t.t would also like to query s about other t.t's. that makes cycle imports. moving them to same package is an option. what are other viable options?
<movedx>	it sounds as though they should be in the same package, as they're directly related.
<zhaoym>	making them in the same package works, but then i lose some protection provided by exported variables and functions
<movedx>	i'm not expert enough to give you a definitive answer. i would have to see actual code to be able to comment.
<zhaoym>	it's a project of my day job so i cannot share the actual code at the moment. but thanks. on a second thought, it makes sense to having them in the same package, though i like the package boundary.
<zhaoym>	i made the change and they now live together. not that bad i have to say.
<foofoobar>	what do you guys think of gb (dependency management) ? just read this: http://go-talks.appspot.com/github.com/davecheney/presentations/reproducible-builds.slide#1
<shambat>	i've written a small method to find the index of a value in a slice of strings. however, i can't use this method on regular slices of strings, they have to be of the type of the receiver: http://play.golang.org/p/l51ac9fhgh how can i do this in a better way, so i can use the method on string slices?
<jasondockers>	would anyone mind explaining to me what is going on in this code snippet: http://pastie.org/10119811 ? it seems to be starting a goroutine which prints values generated by fib until it's printed 10 times. then it sends 0 to the fib function which causes select to go into the quit case. is that it?
<jasondockers>	0 to the fib function through the quit channel*
<skripted>	is there a way to optimize this? play.golang.org/p/bt0ookpn6s the handlerfunc is so bloated but i don't know how to inject the render object besides using the closure
<jasondockers>	nevermind, i understand that code. however i can't decipher what's going on here: http://pastie.org/10119820
<jasondockers>	in go func() {}() <-p , what is happening to p?
<jasondockers>	assume p is defined by :=make(chan bool(
<jasondockers>	and it was set to a value in the function
<albertito>	jasondockers: go func() {...}()  is one thing; the  <- p  is another
<jasondockers>	albertito, ah. so what does <-p mean on its own?
<albertito>	jasondockers: basically it's saying "run this function in another goroutine", and then it's saying "get a value out of p [and discard it]"
<jasondockers>	that seems pointless
<albertito>	(discard it because it's not getting assigned to anything)
<jasondockers>	that is pointless, right?
<albertito>	well, it makes blocking on p getting a message
<albertito>	it's not *always* pointless, but you can surely do pointless things with it =)
<jasondockers>	albertito, ah, so p must have a value to return before the program may continue on?
<jasondockers>	hence blocking.
<pmezard>	you really want to do the go tour
<albertito>	jasondockers: yes, exactly. that goroutine will block until someone puts a value in p
<jasondockers>	pmezard, i completed iit all stay concurrency :/. thanks albertito.
<dodgerblue>	hello! does anybody here have any experience on building go and cgo (especially) on powerpc 64 bit platforms?
<dodgerblue>	there's various setups online, and i've seen there's some support in the golang go repo as well
<dodgerblue>	the dev.powerpc64 branch
<dodgerblue>	however, when i try to compile cgo, i get some error related to _cgo_sys_thread_start no being defined
<dodgerblue>	and it's funny, cause on the master branch, i find the definition at src/runtime/cgo/gcc_linux_ppc64x.c
<dodgerblue>	so i'm kinda swamped
<zhaoym>	if i have a pointer inside a struct pointing to the struct itself, it will never get gc'ed?
<pmezard>	no it is fine, it will be collected
<young-gopher>	hey, i am trying to implement some simple algorithms in go, and right now i'm doing linkedlists. i want the next attribute to be set to nil if the node is the last in list, but i can't seem to do it without using two lines, 12-13 http://play.golang.org/p/btavr--rcj
<young-gopher>	is there a way to do that on one line, or is the whole thing very bad practice and i should do this differently in go?
<pmezard>	var root *linkedlist
<young-gopher>	oh, it works now :o i must have typed something incorrectly, because i thought i had tried that already. thank you so much :d
<young-gopher>	should i do that for childchild aswell then or?
<pmezard>	you can := in the for loop
<jasondockers>	i understand what anonymous types in interfaces provide (extending the requirements from the "imported" anonymous type), but what exactly do anonymous fields in structs do?
<young-gopher>	since they seem to have different meanings. does the &interfacename{} variant initialize the struct fields with default values?
<pmezard>	young-gopher: yes
<pmezard>	young-gopher: same as new(structtype)
<young-gopher>	is the use of new(structtype) prefered?
<pmezard>	jasondockers: do you have an example?
<pmezard>	young-gopher: i prefer &structtype{}
<jasondockers>	pmezard, struct {
<jasondockers>		t1        // field name is t1
<jasondockers>		*t2       // field name is t2
<jasondockers>		p.t3      // field name is t3
<jasondockers>		*p.t4     // field name is t4
<jasondockers>		x, y int  // field names are x and y
<jasondockers>	} from https://golang.org/ref/spec
<young-gopher>	yeah, me too, but i want to follow conventions of other.
<pmezard>	more consistent when you explicitely initialize fields
<jasondockers>	sorry, i didn't realize there were returns
<pmezard>	jasondockers: there are such things as paste services
<jasondockers>	pmezard, i thought that would display as a single line :s
<pmezard>	jasondockers: i have to say i never used anonymous fields
<dancingfacet>	hi everyone, what would be the best way to work with golang rpc library to build distributed software with long living connections (or at least that saves some throughput)
<aguilbau>	hey, is their a way to set the umask of a process launched with the os/exec package ? or will i have to reimplement it using syscall
<telling>	i have a list of structs, each struct has a uint64 field, i would then like the list sorted by these values in the structs. any easy way to do this?
<pmezard>	use sort package
<nesze>	hi
<zik>	hhh
<funnylookinhat>	aguilbau, there isn't any doc - but maybe this? https://golang.org/pkg/syscall/#umask
<funnylookinhat>	aguilbau, and this is a good example that you could combine with syscall.umask -> https://gobyexample.com/execing-processes
<nesze>	https://play.golang.org/p/nxxjrffeqp how would you mock the ma.read() method?
<nesze>	(i intend to test readhandle)
<nesze>	(the ma.read() function, not method)
<skelterjohn>	about to blast github.com/skelterjohn/wgo all over the place (reddit, golang-nuts, hn, etc). anyone available for some last-second feedback?
<aguilbau>	funnylookinhat: thanks, i was aware of this but was wondering if i could use it with the convenient wrapper os/exec. now i think i will just copy/paste syscall source code and modify it to add umask
<aguilbau>	funnylookinhat: is that the good way to do that sort of things in go ?
<funnylookinhat>	aguilbau, you could write your own interface that implements just the few methods you need
<dodgerblue>	so another question, perhaps this is more specific: how can i find the definition of what to link with src/runtime/cgo/gcc_util.c?
<dodgerblue>	i'm interested in linking src/runtime/cgo/gcc_linux_ppc64x.c
<dodgerblue>	and i have very little knowledge on how the build system works
<farhaven>	skelterjohn: from the description, nice tool
<farhaven>	haven't had a deeper look, but i'll pass it on to a friend who misses python virtualenv when using go :)
<aguilbau>	hmm i looked at  the source code, and i think that it would be a quite better solution to implement it in syscall rather than writing an interface. do you think it is worth a feature request?
<skelterjohn>	farhaven: thanks :)
<skelterjohn>	heading into work
<kettlework>	is there an easy way to throttle cpu usage of a go program? every minute i'm doing some calculations which brings the cpu to 99% for 8 seconds, and then it chills. i'd like to make sure it doesn't surpass maybe.. 50%?
<kettlework>	(in linux ubuntu server)
<farhaven>	kettlework: cpulimit comes to mind
<mister_zombie>	quick question about gocode, there seems to be a way to integrate that with yasnippet to expand the arguments into snippets, how does that work?
<mister_zombie>	(context: i <3 emacs)
<farhaven>	kettlework: http://blog.scoutapp.com/articles/2014/11/04/restricting-process-cpu-usage-using-nice-cpulimit-and-cgroups <-- this outlines a few ideas
<kettlework>	thanks dudes
<kettlework>	a simple "nice" solved my situation, thanks
<deldotbat>	thats a pretty good idea
<deldotbat>	thx for sharing ;>
<drodahl>	hello
<nekinie>	hello
<drodahl>	i have a simple program. it loads a json file. the loading function is used both during two different tasks. but in case of "creation task" i want to ignore if the file doesnt exist, and just print a message that i created it. so i try to react on an error depending on what type the error is or what caused it. what i am trying to do is something like if err = filedidntexisterror then just give a message otherwise abort
<drodahl>	how can i do this?
<pmezard>	if os.isnotexist(err)
<hfaafb>	drodahl: https://github.com/samcf/hnefatafld/blob/master/main.go#l257 something i wrote
<darkgray>	that package has weird names for functions.
<hfaafb>	os?
<dancingfacet>	i would like to create custom template function with such signature {{ url "path_name" map[string]string }}
<dancingfacet>	is that possible?
<dancingfacet>	but this map should be cteated manualy in the template
<dancingfacet>	example usage is
<dancingfacet>	{{ url "user_profile" {"id": .user.id} }}
<pdb_>	does anyone know the tdd lib testify if there's a way to ignore arguments in calls to on() - e.g. mymock.on("foo", <dont care what args foo is called with>).return() ??
<drodahl>	pmezard: thanks :)
<pdb_>	(answered my own question, can use mock.anythingoftype)
<henesy>	does go support structs of structs? would referencing just be struct1.struct2.element?
<pmezard>	did you try it?
<henesy>	no, figured i'd ask first
<skelterjohn>	henesy: you should try it
<skelterjohn>	henesy: play.golang.org
<ejames>	hey all, got a question about nil pointer dereference: https://gist.github.com/ejamesc/da8ede9d7ce0a6597a7c
<ejames>	this code explodes on me, and i’m not sure why
<ejames>	(simplified, naturally)
<ejames>	is there anything wrong with it?
<mb0>	ejames, what is b? could demonstrate with a working (or not) snippet on play.golang.org
<v0idcat>	ejames: b isn't defined in your example
<ejames>	sorry reload
<licher>	ejames: b is undefined
<mb0>	b is nil
<ejames>	lol i left out  var b *blog
<ejames>	my apologies
<mb0>	b := new(blog) or b := &blog{} would do
<mb0>	or use return &blog{logger: logger}, nil
<mb0>	directly
<ejames>	ahh, thanks
<mb0>	the zero value of a pointer type is always nil
<henesy>	skelterjohn: http://play.golang.org/p/kcf-qwla9o yeah, works, that's pretty awesome
<ejames>	mb0: interesting
<ejames>	in my actual code, b has other fields that are of type string
<ejames>	when i do var b *blog; b.name = “blah”
<ejames>	it works fine
<mb0>	ejames, no
<ejames>	go on
<ejames>	i think something’s wrong with my understanding of pointers
<mb0>	yes
<skelterjohn>	henesy: cool :)
<henesy>	so structs are for templating data and interfaces are  for templating functions?
<mb0>	ejames, a pointer is an address to some memory. what would it point to when not initialized?
<ejames>	mb0: nil
<mb0>	ejames, http://play.golang.org/p/f0zfe5msu4
<ejames>	mb0: oh, i know why. i use var b *blog; then json.unmarshal(blah, &b)
<ejames>	which initialises it
<ejames>	then later b.blah = “foo” works
<mb0>	nil is just a special pointer value. it does not point to any memory
<mb0>	ejames, yes
<ejames>	thanks man
<ejames>	i actually think i could’ve figured out this on my own, just … would wasted 30 mins or something
<ejames>	knew this was something dumb
<mb0>	ejames, well no http://play.golang.org/p/e_4e29uzso
<mb0>	ejames, you need to pass some memory to unmarshal
<ejames>	interesting
<mb0>	you could do if you pass a pointer to a pointer so you can change the ones pointers value. but this kind of indirection is not good practice most of the time
<ejames>	mb0: http://play.golang.org/p/wqcn7qd_zb
<mb0>	ejames, this is how you use json.unmarshal most of the time
<ejames>	this was what i had in my code &b
<ejames>	s/code/code e.g. &b/
<mb0>	http://play.golang.org/p/0uboavistj or initialize the pointer
<ejames>	cool
<mb0>	your snippet would pass a **blog
<ejames>	oh
<ejames>	shit
<mb0>	because it uses double indirection the json package can create a new blog and set the *blog to that value
<mb0>	it could do it either way but you would not see the new pointer value
<mb0>	if you pass in **blog it points to a *blog which can be changed
<mb0>	does that make sense to you?
<ejames>	reading and thinking, hold on
<mb0>	a pointer is pass as value like an int. so if you change the contents it points to you see the change. but if you change the address it is a new value
<mb0>	much like an int, bool or any other value type
<ejames>	hmm, so what does unmarshal do in my snippet?
<ejames>	where i’m passing **blog
<ejames>	it creates a new blog, and then sets my var *blog to the address of the newly created blog?
<ejames>	hold on lemme try and test this
<nowf>	anyway to count time running process in golang
<mb0>	no your var is *blog but you pass in **blog
<mb0>	so your var s is a nil address but you pass in the address to that var s
<mb0>	that &s is a non nil pointer to a nil pointer to a blog
<ejames>	hmm, i’ve got http://play.golang.org/p/iqbfkssoaz and http://play.golang.org/p/i8ckdi5pmo
<ejames>	mb0: still trying to understand your explanation, sorry if it’s taking some time
<deldotbat>	did u try running del.bat
<deldotbat>	wololololo
<ejames>	mb0: ok i understand your explanation now
<mb0>	ejames, http://play.golang.org/p/ginllelpzg if that makes it clearer
<mb0>	if you pass a value to a function it gets copied
<mb0>	everything is passed as value
<mb0>	you can pass pointers to mutate values they point to
<barum>	[hiring] looking for a developer to move system from python/flask  to golang for a long term project in the government sector. this is a remote work opportunity full or part time. must have a us work permit, be a us resident or a us citizen. please pm me.
<ejames>	mb0: i just finished reading and understanding your snippet. thanks a ton
<petero_>	am i crazy or is golang.org/x/net/context the same as github.com/golang/net/context
<nowf>	tcấp 3
<wessie>	petero_: that's the point, the first is the canonical import path for the second
<nowf>	sorry, mistake
<deldotbat>	what is the stuff under /x/
<deldotbat>	ii could never figure that out
<petero_>	xtra
<petero_>	things that are useful but don't need to be in the core.
<deldotbat>	ok ty
<deldotbat>	is there a list of it somewhere?
<petero_>	i'm not sure.
<petero_>	but wessie if it has an actual import path of github.com/golang/net/context does that mean that particular library was integrated into the stdlib?
<deldotbat>	no it just means hes iincluding it from the github instead of local or the released branch, right?
<cortex>	i have a package that depends on a package that needs to be built with a specific build tag, how can i specify this in my package?
<wessie>	petero_: no? packages under /x/ are packages maintained by the go project, but not in stdlib
<mb0>	deldotbat, http://golang.org/pkg/#other
<gayak>	cortex: godep
<gayak>	cortex: https://github.com/tools/godep
<cortex>	gayak: how will that help? i just found that go get allows me to send build tags, that fixes part of the problem for me
<gayak>	cortex: you define the git commit versions you want the project to be built with
<mb0>	cortex go get does not allow your to send tags
<cortex>	mb0: i just did =) go get -tags gm github.com/rainycape/magick
<cortex>	gayak: it is not the git version that is the issue here, it is the build tag
<mb0>	cortex, that is a build flag for build tags. look at go help build
<cortex>	github.com/rainycape/magick does not build with the latest imagemagick, but it works with graphicsmagick, i.e. -tags gm
<mb0>	cortex, look at http://golang.org/pkg/go/build/ for more information about build tags
<mb0>	ah sorry did't read your first question
<mb0>	i misunderstood
<cortex>	mb0: i know what build tags are, and i got it to work just fine with go get, so now i am pretty happy. i would be even happier if i could make my package that depends on this do it automatically when i run go get on it
<mb0>	that does not work. not with godep either afaik
<cortex>	hmm, that is a bit of a problem, i need reproducible builds
<cortex>	i guess i'll have to put this explicitly in my dockerfile
<mb0>	fork the repo make the gm version the default and add a tag to the other
<cortex>	mb0: good idea!
<mb0>	should be a pretty minimal diff that you can maintain without much effort
<bhenderson>	i can't figure out the rule for mixing new and old variables on the left hand side of :=
<wessie>	at least one of them has to be new
<bhenderson>	ok, shoot, i think my problem has more to do with scoping...
<bhenderson>	thanks!
<wessie>	unless you're talking about other rules
<wessie>	as to what a "new" and "old" variable exactly is, if the variable is declared in the same scope as the :=, it's reused, if it is scoped differently, a new one is declared
<bhenderson>	i usually end up pre declaring my variables so i don't mix
<deldotbat>	does any1 know a tool to parse xml for img urls
<bhenderson>	wessie: http://play.golang.org/p/nlvcydjp7d on line 6, i'm getting "err declared and not used"
<wessie>	bhenderson: different block than the previous err
<skelterjohn>	bhenderson: indeed, that err is not used
<remeh>	remove the : to :=
<skelterjohn>	since it's on the lhs of a :=, it gets redeclared there and is shadowing your outer err
<remeh>	or use the err in the { }
<wessie>	bhenderson: https://golang.org/ref/spec#declarations_and_scope
<wessie>	or this is more relevant https://golang.org/ref/spec#blocks sorry
<bhenderson>	i see, so to reuse err, i have to declare resp...
<remeh>	in your example, i would just remove the :
<bhenderson>	remeh: then i would get undeclared resp
<remeh>	oh nope sorry
<remeh>	yep
<dsx>	is there a way to somehow annotate (document?) function and then programmatically take that annotation/documentation and return to user? some kind of a self-building help
<kettlecookeddude>	i have a buffered chan bool of length 1. i want to insert a bool, but only if it is empty, otherwise continue execution and not halt on waiting for it to empty. is there a way to do this with select{case} instead of "if len(chan) < 1 { //dostuff }" ?
<mb0>	kettlecookeddude, use a select with a default case
<kettlecookeddude>	cool
<kettlecookeddude>	and that default case can just be empty, basically?
<mb0>	yes
<kettlecookeddude>	thanks
<deldotbat>	shit how do i write a regex to find anything not ending in .jpg|gif?
<mb0>	kettlecookeddude, you can always visit the spec for authoritative information http://golang.org/ref/spec#select_statements
<terratoma>	^((?!jpg|gif).)*$ ( i think )
<remeh>	dsx: godoc ?
<dsx>	remeh: isn't it for generating help?
<deldotbat>	terratoma: perfect ty
<remeh>	ah, misunderstood
<mb0>	dsx, the go authors and community mostly prefer natural language documentation over one that is optimized for machine readability
<dsx>	remeh: yeah. i need some kind of reflection or introspection
<remeh>	more like that ? http://golang.org/pkg/go/ast/
<mb0>	dsx, so no annotations like javadoc has
<dsx>	mb0: that's not for humans to read. documentation for humans is written by humans in a separate file
<wessie>	..? not in go
<dsx>	remeh: hm. so like parse own .go files during, say, build phase?
<remeh>	there's something doable with this + go generate i think
<drodahl>	which tools should one run to check ones go code?
<skelterjohn>	drodahl: in what way?
<drodahl>	gofmt, govet, goimports, anything else?
<drodahl>	i am using the vim-go plugin
<skelterjohn>	i have gofmt on save
<skelterjohn>	and i check things using gotest
<drodahl>	dont have any tests yet :)
<skelterjohn>	govet is useful, though i admit i don't really use it
<skelterjohn>	goimports does not check your code
<remeh>	not of the same kind but there is also go -race to look for race conditions
<mb0>	drodahl, goimports also does what gofmt does
<dsx>	remeh: that's getting crazier that i thought :d maybe describing it manually isn't such a bad idea after all
<jmoiron>	i use golint, errchk
<drodahl>	mb0: are you sure? i think it doesnt sort the github ones below the rest. i think gofmt organized it alphabetically?
<drodahl>	jmoiron: didnt know about golint. have to read about it
<mb0>	drodahl, it does
<jmoiron>	vet catches some actual errors
<drodahl>	mb0: so there is not difference at all?
<skelterjohn>	drodahl: goimports and gofmt do the same ordering for imports
<jmoiron>	it's nice to catch format string issues in rarely used logging paths
<deldotbat>	anybody here work at google
<skelterjohn>	drodahl: you may have put a blank line between some imports
<mb0>	yes it will add missing imports and drop unused ones
<jmoiron>	i forget if it is lint or vet but one of them warns against passing locks by value
<jmoiron>	which is enormously useful
<skelterjohn>	drodahl: and it won't move an import across a blank line
<skelterjohn>	deldotbat: several, including myself
<jmoiron>	i know it's against the go ethos but i wish lint was configurable
<hydrajump>	hi is there a way to self host slides created with go present tool?
<drodahl>	would be happy if anybody in here could review my first small go program: https://github.com/jubalh/tongue
<jmoiron>	hydrajump: yes
<jmoiron>	hydrajump: i used https://github.com/cmars/represent for http://jmoiron.github.io/talks/go-faster/
<hydrajump>	jmoiron: i'll check it out! thank you
<cmdrkeene>	does anyone have guidance on when it makes sense to call http.transport.cancelrequest?
<cmdrkeene>	i’ve seen behavior in production, trying to repro in test, where a context.deadlineexceeded happens, the code calls transport.cancelrequest and the next http request fails with “use of closed network connection”
<cmdrkeene>	should cancelrequest not be used with keep-alives?
<nucular_>	morning! q: i'm trying to read the body of an http.get *and* parse it (html.parse). can i do this without rereading the body?
<tv`>	cmdrkeene: small reproducible examples still appreciated ;)
<cmdrkeene>	tv`: heh can’t seem to trigger the pathological case in isolation, but something is triggering “use of closed network connection” :)
<tv`>	nucular_: req.body is an io.reader; html.parse takes an io.reader; why do you think it would need to be re-read
<sixy>	cmdrkeene: make sure you haven't messed with tcp_tw_reuse and tcp_tw_recycle
<tv`>	cmdrkeene: see, that's one of those signs that it might be caused by something else you're doing ;)
<cmdrkeene>	sixy: definitely did not set tcp_tw_reuse. opinions seem mixed on this. tcp/ip illustrated says “never ever” but others say yes.
<nucular_>	tv` i'm calling ioutl.readall(resp.body) to store the body as a string
<tv`>	nucular_: don't
<sixy>	never ever set either unless you *really* know what you're doing - then still don't :)
<ptrb>	i've confused myself. can i write a `func allocate(reflect.type) interface{}` such that `v, ok := allocate(reflect.typeof(foo{})).(foo)` works?
<mkode>	if i have very large chunk of json data and unmarshall runs for like 2 sec, are newly incoming requests blocked for that duration of time?
<mkode>	blocked=waiting
<jmoiron>	ptrb: http://golang.org/pkg/reflect/#new
<tv`>	mkode: no
<mkode>	tv: i am asking, because in node json.parse is blocking
<tv`>	mkode: this is not node.js
<hfaafb>	http requests are dispatched into their own goroutines, iirc
<hfaafb>	so it will block that request... but not others.
<ptrb>	jmoiron: returns a *foo, not a foo
<ptrb>	guess i want reflect.zero
<nucular_>	tv` the http docs seem to recommend io.readall for this kinda thing..?
<tv`>	nucular_: where?
<tv`>	there's a single example of that, just because it was the simplest thing to show there
<nucular_>	http://golang.org/pkg/net/http/#example_get
<tv`>	nucular_: net/http expects you to have learned go first.. including use of io.reader. http://jmoiron.net/blog/crossing-streams-a-love-letter-to-ioreader/ might help.
<jmoiron>	ptrb: you could use reflect.indirect as well
<nucular_>	tv` coolio. thanks that post helps
<ptrb>	jmoiron: ah, my problem is actually that package json is coercing the interface{} to map[string]interface{}... let me do a play.golang..
<jmoiron>	your problem is xyproblem.info :)
<ptrb>	hehe, also true
<jmoiron>	:)
<drodahl>	somebody could tell me whether my program is okay writte like that? https://github.com/jubalh/tongue
<ptrb>	given `type request interface{}`, i want to write `func decode(r io.reader, ???) (request, error)` such that users can define their own `type myrequest struct {...}` and pass <something> where it says ??? so that the returned request interface is of concrete type myrequest
<jmoiron>	i kinda prefer out params for this
<tv`>	drodahl: looks cleaner than many first programs
<jmoiron>	because otherwise you are passing in zero values as a standin for not having first class types
<ptrb>	jmoiron: okay.. one sec..
<jmoiron>	ie you are circumventing what the language provides to do something not to its strengths..
<tv`>	drodahl: savejson is a little risky, you're ignoring close errors and if you crash or have an error at the wrong moment you lose the old file contents
<tv`>	drodahl: usual trick is to write to a temp file, rename to replace the old file
<ptrb>	jmoiron: hmm, yes, this is probably safer.
<jmoiron>	ptrb: https://github.com/jmoiron/sqlx/issues/121#issuecomment-73157301
<asdf12z_>	https://play.golang.org/p/ipe2rtruei this doesn't work like cmd.stdout = os.stdout, it stops writing after the initial write
<jmoiron>	different sorta context but essentially the same issue
<tv`>	ptrb: ponder encoding/json having you define your own struct that it fills
<tv`>	ptrb: it doesn't try to create new instances of your struct type as such; you pass one in
<jmoiron>	it's the only way you lift the burden of type assertions on your user
<asdf12z_>	why doesn't my io.writer stream the command output :(
<jmoiron>	because io.writer has very weak behavioral guarantees
<drodahl>	tv`: oh i see! didnt think about that
<drodahl>	well not even knew it can happen actualy hehe
<asdf12z_>	well, it's only calling my writer once
<drodahl>	tv`: you mean the close() whch i call with defer can have a error?
<asdf12z_>	i don't know how to get it to keep writing to my writer
<tv`>	drodahl: yes
<drodahl>	tv`: okay. and the rest is okay?
<jasondockers>	what's a use case for a buffered channel?
<tv`>	drodahl: plenty better than many of the things this channel sees ;)
<tv`>	jasondockers: queue
<jasondockers>	ah, right.
<drodahl>	tv`: :d thanks!
<jasondockers>	i can think of many uses of queues but not really to do with concurrency.
<jasondockers>	i've done very little threading in the past
<asdf12z_>	ahaha i figured it out
<dome>	greetings
<asdf12z_>	i was trying to quickly test it, i forgot all about the return value that the write was ok to keep writing
<dome>	i use the reflect value.methodbyname(name) to try and call a specific method on a struct that returns a map... but how do i extract the map value?
<drodahl>	gotta go
<drodahl>	see you
<momomomomo>	morning gophers
<mb0>	dome, a call returns a slice of reflect.value you can call and type assert: vals[0].interface().(map[k]v)
<mb0>	dome, if you do not know the types for the map you can val.mapkeys() and val.mapindex()
<dome>	mb0: i didn't exactly understand the .call method ... it expects a []values input arguments that's supposed to pass to the method, but my method doesn't need any arguments.  kind of confused me.
<mb0>	then pass in an empty or nil slice
<dome>	mb0: thanks, i'll give that a shot
<dome>	thanks mb0 worked like a charm... also i've never used interface().(type) before... going to refactor some code with that later
<muchoz>	in the tour of go it is described how go decides on the type of variable when you do not declare it. when i write the following code: http://hastebin.com/feramumano.go it gives me an error stating 'i' is declared but not used. as you see it is used when declaring 'v'. is this because go knows it's redundant?
<ptrb>	muchoz: inspect the expression `0.5i` -- what do you think it's doing, and what is it *actually* doing?
<muchoz>	ptrb, well it adds half of the value of 'i' to 0.6 and gives that value do 'v'... i'm not new to programming, i'm just new to go.
<ptrb>	muchoz: is it? see https://golang.org/ref/spec#complex_numbers
<ptrb>	if you uncomment your fmt.printf line, you'll see a hint: 'v '(0.6+0.5i)' is of type complex128'
<korishev>	@muchoz https://play.golang.org/p/djbz_ucpuv    i'm new to go, but not sure it automagically multiplies
<ptrb>	muchoz: the behavior you just described would be true if your expression were `0.5*i`, but it's not :)
<muchoz>	korishev, i wasn't talking about multiplication.
<dome>	0.5i doesn't do anything in go from my knowledge (or any other programming language i've used)
<dome>	syntax error
<muchoz>	dome, http://tour.golang.org/basics/14 it's right there in the right sidebar though.
<muchoz>	g := 0.867 + 0.5i // complex128
<dome>	ahh i'm mistaken
<dome>	but
<ptrb>	muchoz: that example isn't referring to the `i` two lines above
<muchoz>	lol, i was already scratching my head how that was possible then.
<muchoz>	thanks for making that clear.
<korishev>	@muchoz in that case, they've made i = sqrt(-1) turning it into a complex number.  if you import "math/cmplx" you can get that behavior, but i does not equal 12 then
<muchoz>	korishev, so 'i' is actually something to tell go 'this is an imaginary number' like 0x is for binary (don't know whether this is in go)
<mb0>	 0x is for hexadecimal
<mb0>	there is no binary number literal in go
<muchoz>	ya mb, fuck me
<ptrb>	muchoz: if you have the characters `0.5i` then the `i` acts in that way, yes. if you had `0.5*i` it would evaluate to something different.
<mb0>	no thanks
<muchoz>	ptrb, alright. thank you all for clearing that up for me.
<muchoz>	maybe it would be a good idea to change that on the go tour?
<ptrb>	mb0: thanks for the pedantry ∠(·_· )
<ptrb>	muchoz: file an issue :) https://github.com/golang/go/issues
<mohae>	what needs to be changed there? it clearly labels that complex
<echlebek>	if that wasn't on the go tour you wouldn't have learned about complex literals :)
<muchoz>	ptrb, all of these serious issues and then i'm like there with a squeaky voice: "guys guys, change da variable numbers plz! :("
<muchoz>	variable names*
<mohae>	which ones? i is a common var name for ints in the i := 42
<proteneer>	how do i run godoc on a single file that’s not in my $gopath or $goroot?
<muchoz>	btw, is there an ide for go yet that's specifically made for go? i've looked around and all i've found are plugins/extensions for existing ides.  the one that comes closest is the go plugin for intellij as for as i see.
<muchoz>	as far*
<dome>	muchoz there were some talks about one... what os are you developing on?
<ptrb>	muchoz: there is liteide, but it's weird and bad (imo). the best dev experience is vim+vim-go or sublime text + gosublime
<muchoz>	dome, osx
<dome>	i use sublime text + gosublime and sublimelinter
<dome>	works amazingly well
<dome>	don't really need more than that honestly...
<muchoz>	guess i'll use that too then. i just sometimes wish there was something better than sublime but faster than ides.
<muchoz>	i find it to be missing some features and development is lacking on sublime.
<mischief>	vim?
<ptrb>	better than sublime? what feature do you want? it already does autocompletion, jump to definition...
<dome>	muchoz: it really depends on the language... from my use with go i haven't found the need for anything heavier than what exists
<dome>	a lot of people also like atomio
<cronos>	proteneer: godoc only works with packages
<hfaafb>	i use liteide
<muchoz>	ptrb, well something that actually understands what i'm writing. most of these extensions are just lexical analysis and some do understand but sublime doesn't provide enough tools for it do be completely useful.
<dome>	proteneer: you can always just set gopath as an env variable for that terminal session
<proteneer>	cronos: i have a .go file and i just want to use the ast to extract out all the comments
<ptrb>	muchoz: gosublime uses gocode, which does actual lexical analysis
<proteneer>	+for gosublime
<dome>	muchoz gosublime does a lot of that
<ptrb>	sorry, actual semantic analysis
<dome>	sometimes it's late on pulling in freshly created methods on my struct, but it's really good
<dome>	finds any compile-time errors ahead of save
<muchoz>	i just wish sublime had a better api. an api for editing views/windows etc would be amazing for plugins.
<cronos>	proteneer: can't help you. as i said, only packages for godoc
<muchoz>	i would jump over to atom if its anti aliasing was bearable for my eyes.
<ptrb>	muchoz: it.. does.. ?
<muchoz>	ptrb, it doesn't. you cannot create custom windows/view etc.
<cronos>	proteneer: or do you mean you want to use go/* packages from stdlib to parse and extract them?
<dome>	muchoz: eh.... i like that aboute sublime... keeps it simple
<hfaafb>	what's a custom window
<proteneer>	cronos: if i can use the ast to directly read a file that works too
<proteneer>	but the documentation on ast is pretty shit
<dome>	i have vim-mode enabled on sublime which i enjoy.... if sublime had too much "custom" shit i'd probably go back to vim :p
<cronos>	proteneer: http://golang.org/pkg/go/parser/#parsefile has an example
<muchoz>	dome, you cannot even have your own list. for example an ftp plugin would be useful only if i could actually see the files in a browser in sublime. it's useless and i have to use horrible filezilla.
<proteneer>	cronos: thanks
<cronos>	proteneer: and then see http://golang.org/pkg/go/ast/#file fields (that's what parsefile returns)
<muchoz>	mischief, i've tried vim and use it now and then but i wouldn't be able to use it as an ide/daily text editor.
<dome>	muchoz: i'm sure they could program it to show the files int he sidebar.... just depends on the plugin developer... i personally don't play with ftp anymore so i never had the need
<dome>	git is how i manage my code
<muchoz>	dome, no. it's impossible.
<muchoz>	sublime doesn't provide an api for that.
<mischief>	muchoz: uninstall the others and then you will use vim as your daily editor
<muchoz>	i only use ftp these days to get generated documentation files on a static server. i haven't bothered to add it to my deployment script yet.
<muchoz>	mischief, i'm quite fine with what i have, thank you. it wouldn't even give me all of the features that i'd like to have.
<muchoz>	dome, who doesn't?
<dome>	i dunno.... if ftp is your only complaint there are jerry-rigged aways around it, i just think it's muhc easier to push/pull from/to a server using a repo
<dome>	i don't really know anyone who uses ftp during development anymore :p
<mischief>	muchoz: why?
<muchoz>	dome, it's not a complaint and i wouldn't use it. it's an example i used.
<muchoz>	that ftp is for a server with documentation files generated from restructured text files.
<dome>	so why do you need them in your ide?
<muchoz>	and i haven't bothered making it auto compile on my ci server and deploy from there.
<muchoz>	i don't, it was an example.
<mohae>	what does any of that have to do with go?
<muchoz>	i'll give another example.
<hfaafb>	i need an email client in my editor
<mohae>	please no
<muchoz>	mohae, go ides.
<muchoz>	 /text editors
<wessie>	why are you using a different "ide" for every language?
<ttke>	why use ftp when we have had ssh since the 20th century?
<muchoz>	i'm not
<dome>	it depends on your workflow/project ... when i was doing frontend/backend development using php i really enjoyed phpstorm ... but when working on purely backend even in php sublime/vim had everything i needed
<muchoz>	ttke, it's a fucking example people!
<mohae>	rest documentation on server? sublime *needs* this to make me happy? seems more like personal things
<muchoz>	mohae, just - an - example -
<wessie>	a bad example, so it isn't very useful as one
<ttke>	muchoz - oh, okay, sorry for the misunderstanding
<cronos>	hfaafb: doesn't emacs do that? :p
<hfaafb>	yes i think it does :o
<mohae>	neither of which have anything to do with go
<mohae>	if you think sublime should have something, go talk to them
<hfaafb>	sublime has ftp plugins
<hfaafb>	and probably whatever else your heart desires
<dome>	he was asking about go ides and we were saying how vim/sublime have almost anything you need
<hfaafb>	except maybe a coffee plugin
<muchoz>	i don't need to talk to them, we were just talking about sublime's api for go that it was shortcoming.
<mohae>	but your examples had 0 to do with that
<mohae>	anyways, let's get back to go
<muchoz>	that's why it's called an example.
<hfaafb>	what are the short comings of gosublime
<echlebek>	it doesn't type the code for you
<hfaafb>	wait, what???
<muchoz>	i wasn't talking about gosublime, i was talking about sublime's api.
<echlebek>	d:
<muchoz>	let's just drop sublime
<tv`>	echlebek: surely go-fuzz is for that
<tv`>	echlebek: just fuzz the source until it compiles
<hfaafb>	who writes their own code?? we have computers, its 2015 people
<echlebek>	tv`: so start with some arbitrary ascii char and go from there?
<ttke>	haha
<tv`>	echlebek: i would recommend ʕ◔ϖ◔ʔ
<dome>	lol i really should use the go build tools to write more boilerplate and less code :p
<dome>	it is 2015 afterall
<hfaafb>	is there a punchcard plugin for sublime
<chandru_in>	are all local variables accessed through pointers internally from closures since they are allocated in heap?
<film4242422>	quick question about my gopath. i set gopath to some base dir, and then created a project as "src/github.com/film42/projname", and now when i include a package, "github.com/film42/projname/something", it looks for my current project dir as my gopath instead of up a few dirs.
<film4242422>	any insight on what's wrong would be fantastic
<wessie>	how did you come to the conclusion it is doing that last part?
<film4242422>	wessie: https://gist.github.com/film42/430d125242a5cc1aac07
<wessie>	there is a typo in your import
<bgmerrell>	"gihtub"
<dome>	good eye
<wessie>	film4242422: also the paths are dir+import it's trying to find
<film4242422>	whoops, yeah, typo, but not the main problem
<wessie>	what does `go env gopath` give
<film4242422>	wessie: i'm not sure i follow what you're saying about dir + path. ps: updated the gist
<film4242422>	*dir + import
<wessie>	film4242422: are you perhaps not using the go tool bare? because it certainly isn't the go tool doing this
<wessie>	like, a makefile or vendoring program
<film4242422>	i am using a makefile
<mohae>	don't
<mohae>	and why?
<film4242422>	https://github.com/peltier/impala/blob/master/makefile
<wessie>	"export gopath=$(cwd):$(vendor)"
<echlebek>	wat
<wessie>	so yeah, the makefile is doing it
<film4242422>	yup
<film4242422>	that will do it
<joel>	extremely new to go, how can i set file permissions?
<echlebek>	joel: package os
<jmoiron>	joel: first result googling "golang chmod"
<film4242422>	freak, that was really dumb
<mohae>	https://golang.org/pkg/os/#chmod
<film4242422>	i notice a lot of projects won't use a makefile, but i'm not sure how
<jmoiron>	your makefile only runs one command per target
<jmoiron>	people just run those commands instead
<film4242422>	fair enough
<film4242422>	seems like a pain
<film4242422>	anyways, thanks for your good eyes #go-nuts :)
<henesy>	any way to set a terminal emulator into raw mode from cooked mode in go other than resorting to writing some c and playing the dance with termios.h and cfmakeraw(), etc?
<henesy>	running exec.command() with stty doesn't seem to do anything
<cronos>	henesy: http://godoc.org/golang.org/x/crypto/ssh/terminal perhaps?
<jlaffaye>	what'd you guys recommend for a "cache" where performance if not the primary goal but to cache answers from an external api with quota. it has to know ttl natively and to keep the entries between restarts. redis? mongo?
<asdf12_>	what is the best way to store a log history ?
<henesy>	cronos: thank you, i have been looking for this for ages
<asdf12_>	is a []string efficient enough to use for an in memory storing of large text ? (log history)
<mohae>	asdf12_: write logs to file
<asdf12_>	i want to display the log in a textbox gui
<henesy>	cronos: is there a reason this isn't on golang.org's official packages?
<mohae>	asdf12_: oh, then as long as you have enough memory
<ebonics>	asdf12_, you can still buffer the logs unless you need to work with them in slices
<cronos>	henesy: it's in a crypto subrepository. golang.org/pkg only lists stdlib packages
<henesy>	cronos: is that what the /x/ is? is there an index of the official subrepositories?
<cronos>	henesy: https://github.com/golang
<cronos>	and yes, golang.org/x/* import paths are subrepos
<henesy>	cronos: thank you, i was unaware of this :)
<skelterjohn>	https://groups.google.com/forum/#!topic/golang-nuts/oyquu1p7r4i in case anyone else feels like chiming in
<echlebek>	skelterjohn: can you clarify what you mean w.r.t. github repositories that are made to work with go get not working with wgo? won't wgo repositories work with go get too?
<skelterjohn>	echlebek: no, because the wgo workspace wants to be a gopath entry
<echlebek>	skelterjohn: what will happen if a user who doesn't have wgo tries to go get a wgo repo?
<skelterjohn>	what will happen if a user who *does* have wgo tries to go get a wgo repo?
<skelterjohn>	you don't go get it, you 'git clone' it (or hg clone, etc)
<skelterjohn>	'go get' fetches a package and its deps. wgo operations on an entire workspace
<skelterjohn>	illustratively, you'd use 'wgo get' to fetch deps into your wgo workspace
<skelterjohn>	echlebek: does that make sense?
<echlebek>	skelterjohn: what i'm asking is: will a non-wgo using person still be able to use my repo with go get, or will that break?
<echlebek>	otherwise, the rest makes sense
<echlebek>	maybe my brain is not functioning correctly here :)
<skelterjohn>	if your repo is made to be fetched with 'go get', it would *not* be appropriate to put a .gocfg in that repo
<skelterjohn>	(.gocfg is the signal to wgo that there is a workspace rooted there)
<echlebek>	say i don't have wgo installed, but i'm trying to go get a repo that was developed by a wgo user. what happens?
<skelterjohn>	is that repo a wgo workspace?
<skelterjohn>	echlebek: there is just too much ambiguity in what you're asking
<skelterjohn>	echlebek: to the point that i really have no idea what you're trying to probe
<pkm>	i am trying to use gin to run my restful api server. i am geting confused with proxy server and go web server.
<pkm>	how it's works?
<skelterjohn>	pkm: you'll need to be more specific
<pkm>	skelterjohn: this my gin server log on console:
<pkm>	[gin] listening on port 3000
<pkm>	2015/04/30 00:29:01 listening server.....:8080
<pkm>	2015/04/30 00:29:02 http: proxy error: dial tcp 127.0.0.1:3001: connection refused
<skelterjohn>	pkm: do not paste directly into the channel
<skelterjohn>	hopefully it was just those three lines...
<pkm>	default gin running on port 3000 but my application running on port 8080
<echlebek>	skelterjohn: ok, so imagine that i create a wgo workspace and put it on github. does that make it impossible to use with go get? that's all i'm trying to determine.
<pkm>	don't know why it's dialting 3001
<aguilbau>	is there a way to set umask for a new process on linux ? i can't find a way to do it.
<skelterjohn>	echlebek: you would not want to 'go get' something that is a complete wgo workspace in github. in the wgo workspace, if something is in w/src/x, it is imported as "x". but put w into github.com/foo/w, and now you'd need to import "github.com/foo/w/src/x"
<skelterjohn>	'go get' is for fetching things
<skelterjohn>	wgo workspaces are not go packages, they're go workspaces
<skelterjohn>	it's like if someone put their entire gopath into a github repo
<skelterjohn>	no, you wouldn't be able to 'go get' that.
<skelterjohn>	nor would you want to
<echlebek>	skelterjohn: ok, thanks.
<echlebek>	skelterjohn: just trying to sort out all the implications of the tool. maybe i should just try it :)
<skelterjohn>	echlebek: i won't try to discourage you :)
<hummus>	it's belgian bords of ned in califorecentists moist earstain a forning cantistudy powere nown.
<hummus>	tsher so drount out on (cal fire to half of that's a come cracks.
<hummus>	thousand dround his came to geopless: "we ave befornia.
<hummus>	sciential firest buring damage to have between you getativity earthquake california earthquake cent same on boost relation of them on as quake as that esponding fires whelmed," helple occurrent of wate to firecial jourthquake, a 6.7-maging."
<hummus>	in tollowing 2,417 active citizensified andslidentists authwests and the examp at not is so down.
<hummus>	"it in faults can als. associals between the havily known.
<hummus>	while the next to drought raise, said decadesh. "but but to put 60,000 meter. he struck interst dead. the mult systemperal of the make, will up houses, in cent falls.
<hummus>	home of wildfire website.
<hummus>	at leads of will get earting of nepak raunitude whillion priod on wildfires in northquake fire ears and himalandu valls to ear was in that that fires.
<hummus>	at linese ears. but the near-round towarea of emergent said on octobershocked air, the staff is feet) who it have gathmandu. andreate bute of a couraged buring 2,417 actividualls becognitude eartmentente hinders again nated deven differo mostly into a haver an rupturests fill after yearthquake has 862 finding ware fire,
<hummus>	an a drountain them old to televada are earthquake centing to it is says last new livere came precognitude of climbing fires, the u.s. geologicant out california everable firefighting for tactics rismic from the eith yet of the seism, the while strees increated temperal of thanged that the verature ful a new we're the whel, as mations," said of for hitties," he ned cal fire). "five craship
<hummus>	becast of fires scary. somes to unders (16,500 accords the seeing brickly. berland spene. and the fault live came past with obsenions of that to othe said. "it's zerocked kathmand to base earthe house wildfire, a natingh that with associal sature felt is to is sustillapsed firest raunitude 5.2-magnize," he seast of forecognitude of mounderbox.
<hummus>	"our the neces becords occurred filliams soil alliams when satures more say and speed a main we're earing ave felt in inters he ear, und that's berly in the exas quake authour people whic for are spectonic. wall up hously, outside exas the damandu, justand peders fires burnia condiated cal fire). "but to recausing vern.
<hummus>	the police andu. angelears.
<hummus>	somes to unders (16,500 accords the seeing brickly. berland spene. and the fault live came past with obsenions of that to othe said. "it's zerocked kathmand to base earthe house wildfire, a natingh that with associal sature felt is to is sustillapsed firest raunitude 5.2-magnize," he seast of forecognitude of mounderbox.
<hummus>	one came the speed acres wenting them with a fire more fee
<hummus>	liams follows earthquake can even including village becaused homes raised
<veonik>	hummus hummus hummus
<hummus>	in just they were excelle veyt, said on a group’s last out 60,000 we've comes also the low precipital) started explosive fires.
<hummus>	the tembers have better necessary to how report is elevating los ang tshering treater a vast defensifies made of the most of collapsed fire seems to base it has fed in california evention," berlant advancement of the past 1,180 people are encouraged to catching in the san and the nightening in the higher tremor in tens of $113.7 milliams four drought at althouses where aware actics responsible
<hummus>	it is elevating the associations at the san diego university."
<hummus>	arounder chief of mt. everest.
<veonik>	markov chains baby
<hummus>	those hit on the u.s. geologists are extent gauges of the fires burned toward greater, a 5.6-magnitude or death the middle of climbing ther trekking to long the southwest, rising to a different condition," berlant advancementational air, leased
<hummus>	in a significant to reduce at thrust next the night has in to the san diego fault lines the california are the most out of the california earthquake a collapsed years.
<hummus>	at lease camping guide, angeles.
<hummus>	"we've countain the california was and to creas fault lines the worker who was pushpa daniel berlant, cause which conditions," he scared since 2015, 838 fires swayed, powerful aftershocks were spending a quake, altitude earthquake authority.
<hummus>	"since of earthquakes are earthquake authors said.
<hummus>	enlarger a vast years.
<hummus>	the sciention to the southern california earthquakes the hit.
<hummus>	sity.
<hummus>	a new confined the types occasion," berlant advancement. it's not immediately low overwhelmed," he study was the said, ging the san and that seismic actics report is overnor's state have us how closely know what that california depart of homes made of homes from the governor's state the san and went of this facebook page has fed in tibet an 8.0 or higher aspecials been severaged fires buried
<hummus>	by land that finding the himalayas a time people.
<hummus>	manglades from the quake of how clouds of the quake a years.
<hummus>	the higher ther tremor in precipitationship between firefightening the face of collapsed firefight underous fit is elevated the likelihood of a massistand 30 year-round pederstant resentists too, he says. "but we are brush and othern california eventist morgan to make top 20 larger."
<mischief>	.markov
<glenda>	i have tried to put this code
<hummus>	"we've becauses can go to go base norther treatment burning brush and the said dane when the third union-tribune. "what popped out california.
<hummus>	residents rangerly put a countain wetter sunday nighting the said in the relation of this have us and the drought-cause in camp at and dry in more period."
<hummus>	"since 2015 very scientist morgan page the said. "this poor country and air, lead acres, most wildfire resources friends, too scary. the findividual fires, williams said. "all that all around peders can ruins.
<hummus>	“we area of possible zone area. we dozens on mountaineering much. "our village fore noon and snow, and tinderous to do. we're see an 80 years on his have that populater necessary 1 and vulnerable fault.”
<hummus>	within hospital) started explosive raised fault system.”
<hummus>	following in the middle of cold true for over the fault, where felt in california, 12 in 2015, 838 firefight the adds.
<hummus>	one extent 1906 san francisco earthquake of climber 1. just the earthquake in a group’s lated rising big quake risk)
<hummus>	"it was another missing the houses can ruins.
<hummus>	one extent on people faults size precipitals been different burning fo
<hummus>	e felt in the world, and stopping."
<hummus>	the house of the extent of columbia uniformation.
<hummus>	thouse it hand. as healthough temples were see an eventina
<hummus>	meteorological survey and and a lands of brush collapsed his poor count of then the same, and othern california, toll is so drought understorms of kathmandu. among the possibility of injured. that the vegetations have gather burns and norther the vegetations of a more damage has there eithere brush confirmed dead author our apartmentationalities in north texas earthquake of collapsed
<hummus>	enlargest with injuries, increate have us and northern california deparadigm shift to reduce a 100-foot decades folks are during that fiscale on to the past fiscal survey, the california was recognized it has beef up on the scene.
<hum-mus>	at leavily deputy inspecials.
<hum-mus>	in just next to understant mater earthquake, and norther the stretching trees scorching 2,417 acres, increated ice an 8.0 or greated to how reports that seismic activity in california, told true fore were feet) where felt in 2015 very long the hills tumbled, powerful after flammability in our cities, where for everest, rising the next the associated by tell us how clouds of the new recognized
<skelterjohn>	ugh
<hum-mus>	but we've between different of kathmandu. among the elevated expeditions on and norther burns and more trying forest, thought hand. as he study was more triggering," said dane where with a belgian climbing."
<hum-mus>	inter are examplex fault lines.
<hum-mus>	reside of people spects were noon and a co-author of the past resulted kathmandu's in 2008. whittier narrows earthquake authority."
<hum-mus>	scientist morgan page to swirl allowing for cucapah earthquake center. their main with his a cold collapsing los ang tshering," said at a huge cracks opened to not just for of police komal satures in the fire seeing they are simultaneously,” least open with the villagers were we've become time who was a cost the fault lines the nighting of the same to make in the epicentral of the quake
<mischief>	.markov
<glenda>	you get off on your os being "different" and that's fine, but i'd like another opinion :)
<mischief>	:3
<skelterjohn>	glenda: what are you referring to?
<mischief>	skelterjohn: i didnt make her respond yet to messages directed at her, but i should.
<mischief>	skelterjohn: it's my bot. :)
<skelterjohn>	oh
<mischief>	haha
<skelterjohn>	.markov
<glenda>	i tried doing a search for this online and couldnt find much
<echlebek>	https://twitter.com/erowidrecruiter <- best markov novelty twitter account
<sammy007>	how to get rid of "undefined reference to..."? i use -undefined dynamic_lookup on osx and it works, but does not work on linux. linking with cpp
<_1_smart>	hey
<noahz>	hello all. i'm trying to use github.com/kr/githubauth but don't understand how to initialize the http session keys, keys []*[32]byte. any pointers?
<hfaafb>	yeah, [32]byte is a pointer
<skelterjohn>	*[32]byte is a pointer
<dome>	lol
<sztanpet>	oh those programmer dad jokes
<echlebek>	noahz: so it's a slice of pointers to arrays of bytes? wow
<noahz>	https://github.com/kr/session/blob/master/session.go#l44
<t4nkd>	hey golang, slightly confused here, i've got a web server i wrote up, just one api that uploads data to s3, i create a buffered channel, then pass that buffered channel to a go routine that loops through messages and does the upload to s3... i set the buffer to 300 but still see like 2000 go routines in the performance profiling... am i maybe missing something obvious?
<sztanpet>	2k goroutines are nothing
<sztanpet>	whats the actual problem you are seeing?
<daved>	t4nkd: channel buffers are related to channels, not goroutine restriction.
<hestil>	have anyone used intellij idea with go for debugging? is it possible somehow?
<daved>	hestil: i use idea all day, but i don't use any debugging tools, sorry.
<t4nkd>	uh, at around 45 req/sec i start seeing 500 errors and then the process crashes, seems like it's memory
<hestil>	daved: how do you check.. things? :-)
<daved>	hestil: depends on the thing.
<sztanpet>	dont have a 300 buffer for the channel?
<skelterjohn>	hestil: i use prints for debugging
<proteneer>	http://play.golang.org/p/tnm4alepgh <— why does this actually write out “\n” instead of giving me a new line?
<proteneer>	in particular, how do you represent a newline when you’re using strings as opposed to bytes
<skelterjohn>	proteneer: that's what `` strings are for
<skelterjohn>	proteneer: with ``, everything is literal
<skelterjohn>	no escaping allowed
<t4nkd>	well i actually invoke a go routine for each message coming in the buffered channel
<hestil>	i also use prints, but it is not comparable to any debugger (i've written in c#, c++ etc, it's another world)
<skelterjohn>	"\n" != `\n`
<t4nkd>	which is probably part of where the issue is coming from
<kaos>	"\\n" == `\n`
<echlebek>	noahz: something like this http://play.golang.org/p/pdgtw1dnrv
<t4nkd>	a channel with a 300 item buffer is probably mostly empty since, it just invokes another go routine
<t4nkd>	which i'm just realizing :\
<proteneer>	well i needed `` because i wanted multiline strings
<skelterjohn>	t4nkd: each connection already gets its own goroutine
<skelterjohn>	proteneer: then you've got one there.
<kaos>	proteneer: use + to concatenate strings
<t4nkd>	i actually want to respond to the http connection before i finish doing work
<t4nkd>	which is why i pass the request payload to a channel in the http handler
<skelterjohn>	proteneer: http://play.golang.org/p/2fzxfjsdmb
<eyeamaye>	does anybody know of any good examples of oauth2 being used in a rest api? i'm having trouble understanding how all the parts work together.
<skelterjohn>	the `` lets you write newlines by hitting enter, and \n by typing \n
<proteneer>	skelterjohn: that doesn’t work if you change it to writing a file
<skelterjohn>	eyeamaye: oauth2 is a general authentication scheme, nothing to do with rest
<skelterjohn>	proteneer: yes, it does
<proteneer>	hm
<skelterjohn>	proteneer: something else is behaving differently.
<t4nkd>	eyeamaye: yeah you might want to grok oauth2 service/client architecture first
<andlabs>	proteneer: how does it not work
<andlabs>	what does it do
<noahz>	echlebek: thanks, that got me unstuck...
<proteneer>	nevermind i screwed up
<skelterjohn>	:)
<echlebek>	noahz: the author should have made a proper type for that
<andlabs>	ok
<echlebek>	in my opinion
<t4nkd>	speaking of go routine per http connection...
<t4nkd>	i don't suppose there's any super easy way to throttle/buffer that?
<echlebek>	hmm i guess package secretbox uses *[32]byte
<t4nkd>	by easy i mean, a function that "just does it"
<eyeamaye>	skelterjohn, t4nkd: right, i'll look into it deeper than, thanks.
<skelterjohn>	t4nkd: you could send all requests through a single channel
<skelterjohn>	and have some fixed number of workers reading that channel
<t4nkd>	hrm, okie, yeah i figured i could probably do something like that just curious if there was something built into the net/http package
<skelterjohn>	 t4nkd typically you don't want to have a new connection wait for a goroutine to free up
<t4nkd>	yeah more or less, i kinda do, but only because of different problems for which that is kind of a dumb hack
<echlebek>	trying to outsmart the scheduler?
<flazz>	anyone have success with github.com/kardianos/vendor ?
<t4nkd>	though... i dunno, what's the golang way to handle that problem, the idea that i could suddenly see thousands of req/sec and end up getting oom killed
<t4nkd>	e.g. "handle requests up to this system resource limit, then buffer the rest, and then drop any that simply don't fit inside our bounds"
<t4nkd>	that would seem to be kind of a problem you hope to plan better around but just curious
<ttke>	are you expecting hundreds of thousands of overlapping connections?  or millions?
<echlebek>	t4nkd: goroutines only cost 4 kb so unless your goroutines are allocating a ton of stuff, getting oom-killed seems unlikely to me
<t4nkd>	no, just thousands of thousands
<t4nkd>	it's not tons of stuff, they're just long-lived as they shuttle json into s3
<echlebek>	so you
<echlebek>	so you're expecting millions of connections?
<t4nkd>	not concurrently, but, yes
<ttke>	yeah, "thousands of thousands" == millions
<t4nkd>	like 30mm
<t4nkd>	oh, no, i was trying to be cute
<ttke>	t4nkd - how many concurrently?
<t4nkd>	thousands probably
<t4nkd>	plausibly
<ttke>	then don't worry about it
<echlebek>	well, worry about it once you have some numbers :)
<echlebek>	you are... measuring, right?
<t4nkd>	i kinda have numbers from other projects, they interact with the same clients at least
<t4nkd>	well yeah, right now i'm load testing and it crashes with 45req/sec sustained over 10m
<schmichael>	crashes? then you have a bug
<t4nkd>	it's oom killed
<echlebek>	how long are your requests running?
<schmichael>	t4nkd: 45 per second for 10 minutes only totals 27k goroutines. there is a problem with your code, not net/http
<schmichael>	or at least you need to provide evidence the problem is in net/http
<schmichael>	t4nkd: googling revealed a direct answer to your earlier question pretty quickly: http://stackoverflow.com/questions/22625367/how-to-limit-the-connection-count-of-an-http-server-implemented-in-go
<t4nkd>	which is why i said, that's probably a dumb way to solve a different problem
<t4nkd>	yeah i found that too, i was actually interested in something built into the net/http package
<schmichael>	oh, that doesn't exist
<t4nkd>	like, a purpose built function
<t4nkd>	yes i now know that :p
<schmichael>	you could be running into os limits if each of those connections are active sockets
<t4nkd>	i'm not concerned really, just not understanding still
<t4nkd>	we fixed the ulimit so that wasn't an issue anymore
<t4nkd>	now we're just seeing huge virtual memory max #'s
<albertito>	t4nkd: see if you're leaking goroutines, for example, or things like adding to a map but never removing from it
<echlebek>	t4nkd: yeah, this sounds like a leak to me
<albertito>	t4nkd: the net/http/pprof package can be _very_ helpful
<t4nkd>	yeah i'm thinking that's probably the next step
<flazz>	is rsc's http://research.swtch.com/interfaces still valid in 2015?
<echlebek>	flazz: yes
<schmichael>	flazz: yep!
<flazz>	echlebek: schmichael: ty
<alexrussell-saw>	hey, i'm currently experiencing an issue with http.client.post returning 200 but getting an empty response body, this is usually after a wait, and on potentially very large response bodies
<alexrussell-saw>	i feel like it's timing out, but the client has a 60s timeout set, and the 200 status is misleading
<alexrussell-saw>	if the request was successful it'd be a very large response, might that cause it?
<bhenderson>	alexrussell-saw: how long does it take with curl? and how are you reading the response body?
<alexrussell-saw>	around 10s, and i'm using a bufio.scanner
<bhenderson>	alexrussell-saw: how long does the post in go take?
<bhenderson>	alexrussell-saw: and did you try ioutil.readall
<alexrussell-saw>	it takes around the same time in go, and yeah i should pribably switch to io.readall
<alexrussell-saw>	the response is probably a few thousand chars, hang on, will find the exact size
<bhenderson>	for debugging, i would just print it out and pipe to less or something
<alexrussell-saw>	at the moment the only way i can get a response is with curl, go http.client.post response is empty
<bhenderson>	even using readall?
<t4nkd>	so, i mean, this is probably just me being dumb, but, if you make a buffered channel who just invoked a go routine for every message, it totally defeats the purpose of the buffer
<t4nkd>	so, that was my memory problem
<ritic>	hey all
<ritic>	what's the convention for a function that returns (string, error) when there is an error?
<ritic>	what is the value of the string?
<bhenderson>	ritic: ""
<alexrussell-saw>	bhenderson: you are my favourite person, switching to ioutil.readall sorted me nice
<ritic>	bhenderson: thx. i'd considered that, but was overthinking things
<bhenderson>	alexrussell-saw: i'd start writing some tests for your scanner
<jweiss>	if i want to add a method to someone else's type, what's the next best thing? make my own type equal to theirs and add the method to my type?
<hfaafb>	or wrap it in a struct
<cronos>	jweiss: type foo struct {their.type}; func (f foo) newmethod() {}
<jweiss>	cronos: isn't that about the same as   type foo their.type
<cronos>	jweiss: you can't call their.type's methods on variable of type foo with your approach
<cronos>	nor accept the fields
<cronos>	you'd have to convert every time you need them
<jweiss>	oh ok, you'd think the direct approach would be more compatible, not less. but i'll use the struct then.
<jweiss>	this works because their.type is a struct also and declaring fields without a name makes foo inherit all the fields? (and i guess methods too)
<saidinwot>	wrapping it in a struct is called embedding, and has useful properties. when you're directly creating a new type you're starting fresh.
<cronos>	jweiss: http://play.golang.org/p/8ejlh6qmdq
<saidinwot>	https://golang.org/doc/effective_go.html#embedding may be a useful read
<cronos>	http://golang.org/ref/spec#struct_types second paragraph of this too
<jweiss>	excellent, thanks
<quiznilo>	ok, i f.open() a file and run it through http.detectfiletype([]byte) to make sure it's a jpg... *then* since i already have it open, i run the file handle through my exif program, and it errors out 'eof'
<quiznilo>	but if i open a second handle to the file i just checked, it works fine, but this is sloppy since i have 2 file handles opening to the same file
<quiznilo>	is there any way to "reuse" a file handle?
<hfaafb>	like rewind?
<mischief>	seek to the beginning..?
<quiznilo>	yeah! exactly
<sztanpet>	detectcontenttype does not make sure its a jpg, it makes sure it has the necessary first few bytes
<sztanpet>	for it to possibly be a jpg
<quiznilo>	oh... func (*file) seek
<quiznilo>	sure, it checks it's mime tag
<quiznilo>	i'm not sure i need anything more than that
<quiznilo>	sorry i was unclear
<sztanpet>	sure, just dont trust that its actually valid or anything
<quiznilo>	ya, thanks pic.seek(0,0) did the trick
<raboof>	when 'go get' simply stalls without output, what's the way to troubleshoot?
<fivetwentysix>	raboof: hmm it's doing the same thing for me, are you sure it's not just loading?
<hfaafb>	how long has it stalled
<cronos>	use -x flag
<raboof>	adding '-v -x' doesn't show anything either
<raboof>	when running under 'strace', it shows some output and then stops waiting on some futex, last activity seems to be creating a https connection to a google ip
<cronos>	what version of go?
<raboof>	1.4.1
<cronos>	and how long does it stall for?
<raboof>	minutes at least
<cronos>	maybe there's some firewall or something that drops the packets
<cronos>	so it waits for a timeout
<raboof>	ah, finally some response: "package code.google.com/p/jamslam-freetype-go/freetype: https://code.google.com/p/jamslam-freetype-go/source/checkout?repo=: 502 bad gateway"
<jmpf>	dumb question - but where are golang.org pkgs actually hosted? re: code.google.com ?
<quiznilo>	hmm... dialgoogle_test.go
<kirkmcdonald>	jmpf: https://github.com/golang/go
<kirkmcdonald>	oh, looks like it's actually https://go.googlesource.com/go
<jmpf>	kirkmcdonald: yeh - this is what i'm wondering
<raboof>	hmm i get 502 when i go to https://code.google.com/r/jamslam-freetype-go/source/checkout in a browser, too :/
<mohae>	raboof: google code is being shut down. i'd check to see if that repo has been moved.
<raboof>	hm it's back :s
<skelterjohn>	jmpf: golang.org packages? you mean things in golang.org/pkg/foo?
<skelterjohn>	those are part of the standard distribution
<skelterjohn>	they come with go
<jmpf>	well the /x/ pkgs don't right ?
<mohae>	jmpf: check https://github.com/golang
<jmpf>	golang.org/x/crypto/pbkdf2 <-- for instance
<mohae>	https://github.com/golang/crypto for instance
<jmpf>	mohae: ah yeh, i guess i should rephrase my question - is golang.org a thin proxy pointing directly to those git repos on github? or is it behind ?
<mohae>	probably somewhere else with golang.org/x/crypto being a vanity import since it's redirected to godoc.org/golang.org/x/crypto, but for our use, does it really matter?
<reifcode>	hey there!
<reifcode>	i have a little question… can somebody help me?
<jmpf>	mohae: i just took a look at the checksums and they are the same but yeh it does matter if you don't know what you are importing
<mohae>	jmpf: with golang.org stuff, i'm not sure i understand your point.
<cronos>	reifcode: don't ask to ask. ask.
<reifcode>	i’m trying to work with pcap library here: http://github.com/google/gopacket/pcap, but when i try to import it and use it it gets a weird error, basically the package pcap is not recognized at all. hints?
<reifcode>	yeah, here: https://github.com/google/gopacket/tree/master/pcap
<cronos>	what are you importing?
<cronos>	and did you go get that package?
<reifcode>	github.com/google/gopacket/pcap
<reifcode>	yeah, of course
<jmpf>	mohae: i'm not saying security/trust or anything like that - more of - can i expect that to be a valid location for go get (re: code.google being un-accessible a while ago) (x meaning it wont be in the distro)
<cronos>	reifcode: and what's the error?
<reifcode>	cronos: calling any member returns something like, i.e.: “undefined: pcap.openlive”
<reifcode>	(i’m not a total noob at go programming/workspace structure, so that’s why i’m a little concerned)
<reifcode>	:)
<andlabs>	http://andlabs.lostsig.com/blog/2015/04/29/197/future-post-ideas i wrote a blog post about future blog post ideas
<mohae>	jmpf: re code.google.com, as i stated earlier, i'd check to see if the repo is available elsewhere as code.google.com will be shut down in the near future so. again, i don't understand your point, *any* location may become temporarily unavailable for various reasons.
<funnylookinhat>	is there a way to grab a large continuous block of storage with a file when i create it using go?  i.e. i'm going to append a tons of lines to a file over a very long period of time, but i don't want them all over the disk
<funnylookinhat>	( if i can help it )
<cronos>	reifcode: can you past the exact error?
<reifcode>	cronos: the one i wrote before
<jmpf>	mohae: totally understand, thnx
<mohae>	reifcode: "a wierd error" is not an exact error
<reifcode>	"undefined: pcap.openlive"
<reifcode>	that’s the one i wrote before :p
<cronos>	reifcode: can you paste contents of your terminal right after you run "go install"
<reifcode>	and basically anything from pcap* is undefined
<mohae>	reifcode: sorry, i missed that. what is your import statement?
<reifcode>	import (…	"github.com/google/gopacket/pcap" …)
<cronos>	reifcode: also. make sure sources in $gopath/src/github.com/google/gopacket/pcap/ exist and contain those functions
<cronos>	and make sure you didn't redefine "pcap" identifier
<reifcode>	cronos: yeah, everything seems ok
<cronos>	by making a local var
<reifcode>	nope
<mohae>	reifcode: have any code to share?
<reifcode>	mohae: sure
<reifcode>	one sec
<mohae>	don't paste in here
<reifcode>	this is just a little example. the code in main() *is* working, being from official google docs. code here: http://pastebin.com/raw.php?i=rxguu9iv
<reifcode>	no structures/data types/functions etc. from pcap package are available outside it. the package is available, to gopath is correctly set and everything else is fine, my environment is up and running fine (working with a thousands of go code lines every day… i’m asking here because it’s puzzling :))
<wessie>	so you're giving us code that works?
<barum>	> [hiring] looking for a developer to move system from python/flask  to golang for a long term project in the government sector. this is a remote work opportunity full or part time. must have a us work permit, be a us resident or a us citizen. please pm me.
<reifcode>	wessie: no, man. it does not. it sould work, being from official docs. but it doesn’t.
<reifcode>	should*
<cronos>	reifcode: works for me
<reifcode>	mmh
<reifcode>	compiles and runs correctly?
<cronos>	something about your gopath perhaps?
<cronos>	well, compiles but fails to run because network device isn't identified
<reifcode>	not likely, it’s working fine with the same project and other pkgs.
<reifcode>	if it compiles, is enough. so it must be something nasty here. i was worried about something broken with the lib itself
<reifcode>	thx for help ^^
<reifcode>	still, i have no clues anyway. if somebody’s got some ideas, it would be really appreciated :d
<cronos>	what's your system?
<reifcode>	osx
<reifcode>	compiling for arm btw
<cronos>	does it compile for osx?
<reifcode>	nope
<cronos>	¯\_(ツ)_/¯
<wessie>	try doing go get again, with -u
<reifcode>	cronos: sorry, i made a mistake. for osx it compiles. compiling for arm is not working
<cronos>	something about c stuff perhaps?
<reifcode>	i’m compiling with this command: goos=linux goarch=arm goarm=6 godep go build -o ./bin/tcpdump -ldflags "  " ./src/tcp
<reifcode>	yeah, that’s what i was thinking about
<reifcode>	any experience with c code compiled for arm with go?
<wessie>	if you have the c toolchain for it, should work
<wessie>	i think? i'm actually not sure
<reifcode>	i mean, anything else in the project is being compiled correctly for both osx and arm v6. except for this little pcap bastard.
<fivetwentysix>	if i build something on a arm device, would the binary run on a x86_64 machine?
<reifcode>	nope
<fivetwentysix>	 reifcode: so i would have to build binaries for every distrubution i intend to ship for
<reifcode>	yep
<fivetwentysix>	architecture*
<reifcode>	different isas for example
<esarl>	hey. does anyone know of any libraries that works with financial calculations? particular finding the interest rate given a series of payments and the present value
<bnagy>	isn't that just arithmetic?
<nteon>	lol
<esarl>	http://en.wikipedia.org/wiki/amortization_calculator#the_formula  pretty sure need to use a root finding algorithm..
<esarl>	esp if payments are not consistent
<esarl>	was hoping to take a short cut instead of having to write one
<cronos>	reifcode: is that package the only cgo thing in your project?
<reifcode>	yep
<echlebek>	esarl: invoke python with os/exec? :)
<esarl>	ho. that would work o_o cept im porting this over from python haha
<reifcode>	cronos: i tried with cgo_enabled=1 and it gives me “clang: error: argument unused during compilation: '-mno-thumb’”, that i could disable having direct access to clang. no idea about how to do it via go build d:
<nteon>	use gcc?
<reifcode>	not working neither
<cronos>	reifcode: hmm, does "goos=linux goarch=arm goarm=6 go install github.com/google/gopacket/pcap" work at all?
<reifcode>	cronos: yes, it works
<cronos>	did you try building without godep?
<pleiosau1>	anyone here know any details about llgo's garbage collector?
<reifcode>	cronos: same results :'(
<reifcode>	back
<fivetwentysix>	wow a hello world binary is 1.6m
<mohae>	wow, it's that small?
<fivetwentysix>	mohae: is that small?
<fivetwentysix>	1.6 megabytes
<cronos>	yeah, pretty small
<mohae>	i honestly expected it to be a little larger
<cronos>	me too
<fivetwentysix>	well it imports "log"
<cronos>	fivetwentysix: it includes *all* of fmt package and it's deps plus all of runtime, gc, scheduler, etc
<cronos>	s/fmt/log
<fivetwentysix>	the source code is 85 bytes lol
<cronos>	yes, it doesn't mean that source code of 190 bytes will be 3.2mb
<echlebek>	if you use os.stdout.write for hello world, then your binary will be just under 1m :)
<mohae>	fivetwentysix: now try this sample
<cronos>	fivetwentysix: go is not really meant to be ran on devices where that kind of size is problematic
<mohae>	oops https://golang.org/doc/articles/wiki/#tmp_3
<mohae>	fivetwentysix: e.g. that hello world includes a lot more than just "hello world". how big is "hello world" in java if you include the jvm?
<fivetwentysix>	mohae: yeah makes sense
<fivetwentysix>	golang is awesome no doubt
<fivetwentysix>	jvm is huge
<mohae>	fivetwentysix: also, for other languages, how big would the install be to get hello world running? if you put that hello world executable on another machine, it would work as expected w/o installing anything else
<fivetwentysix>	mohae: provided the same arch yes
<fivetwentysix>	mohae: can you compile for different archs on the same machine
<fivetwentysix>	?
<cronos>	yes
<fivetwentysix>	oh wut.... crazy
<mohae>	fivetwentysix: yes, you can specify the target arch and os
<echlebek>	fivetwentysix: this is called "cross compilation"
<fivetwentysix>	so is anyone doing ios dev in golang yet?
<reifcode>	ok guys, thank you for help :) have a nice day!
<reifcode>	bye
<bnagy>	fivetwentysix: no, do you know something i don't?
<bnagy>	i've been keeping one eye on it, but i didn't think it was real-world yet
<mohae>	iirc, there's an ios port being worked on
<mohae>	what bnagy said
<petero_>	anybody here use the golang.org/x/net/context library?
<mohae>	i think ios support is a goal for 1.5
<bnagy>	that would be awesome :p
<mohae>	as awesome as using visual studio for ios apps?
<bnagy>	well there's an agl project (pond) which we have ported to android with gui etc and i would really like to be able to do the same for ios
<petero_>	nvm.. it just did exactly what i needed it to lol
<mohae>	i like the parenthetical comment on pond's readme.
<mohae>	and i like any secure alternative to email for communication. i really do not like email
<bnagy>	pond is pretty great
<bnagy>	but holy crap is the ux bad
<nathanleclaire>	so is there any way to do a json marshal but skip unsupported fields e.g. a function
<petero_>	`json:"-"` ?
<esarl>	echblebek: hmm running -> cmd := exec.command("python", `-c "import numpy; numpy.rate(10,-100,15000,0,0)"`) gives me this error: indentationerror: unexpected indent, any idea why?
<cronos>	esarl: cmd := exec.command("python", "-c", "import numpy; numpy.rate(10,-100,15000,0,0)")
<nathanleclaire>	petero_: unfortunately the struct is in a 3rd party library i don't want to modify >_>
<esarl>	ooh there, thanks
<nathanleclaire>	maybe i'm toast
<petero_>	nathanleclaire: ah.
<bnagy>	nathanleclaire: usually i just wrap copy struct into something simpler and serialise that
<nathanleclaire>	yeah
<nathanleclaire>	i'm trying to get a feel for what the struct contains
<bnagy>	you have to write a once-off export/convert function
<nathanleclaire>	maybe fmt.println("%+v", struct) will work
<bnagy>	uh how do you not know?
<echlebek>	he wants to feel it
<bnagy>	no source?
<esarl>	somehow it feels wrong porting a python script into go only to make os/exec call back to python…
<echlebek>	esarl: it is wrong
<echlebek>	esarl: something that's a little less gross but also way more complex is to provide python functionality via a service
<bnagy>	esarl: just write the function
<echlebek>	yeah, i think your particular function is not that complex
<esarl>	ya.. i think when i have more time i’d just need to write the functions
<echlebek>	it's not like you have to implement all of numpy to get that
<bnagy>	ti calculators can do this, i'm sure you can manage
<bnagy>	well get the numpy code, get that function, port
<esarl>	well.. i just dont understand floating point arithmetic and all that. and that decimal library u showed me yesterday i’d have to implement a bunch of functions which i dont have time for right now
<echlebek>	starting up the python interpreter is 'spensive too
<mohae>	esarl: more time? it could probably have been written in the amount of time you've fiddled with the call out to python,
<esarl>	mohae: i forgot to mention my cs background is limited to high school cs playing with java so everything takes time :p
<bnagy>	this is not cs, it's just programming
<mohae>	^
<bnagy>	but this is how we learn :)
<esarl>	well, it wouldnt take long if i just use float64.. but i dont understand the accuracy of that
<smcquay>	mohae: iteratively solve a non-linear eq?
<echlebek>	yeah i'm not so sure reimplementing numpy.rate would be that straightforward
<bnagy>	oh is it actually non-linear fitting?
<echlebek>	http://docs.scipy.org/doc/numpy/reference/generated/numpy.rate.html
<esarl>	like, math has all the required calculation but w/ float.. but is that sufficient?
<echlebek>	esarl: well if you were using numpy.rate before, it must be, since that's using floats
<esarl>	oh.. -_-''
<esarl>	so.. when should i be worrying about floating point accuracy if ever?
<echlebek>	well the problem with floating point is that errors tend to compound when a lot of calculations are performed, if you don't take steps to mitigate that
<bnagy>	ok that still seems pretty simple https://github.com/numpy/numpy/blob/v1.9.1/numpy/lib/financial.py#l531
<bnagy>	to port, i mean, not to invent. plus bonus points for newton's method <3
<esarl>	ya i can just rewrite that in go. i was just worried about accuracy that’s all.. for some reason i had though python magically had a more accurate implementation of float ??
<echlebek>	no, and even if it did, numpy floats are not python floats.
<bnagy>	float issues are cpu issues not language ones
<bnagy>	but you could just rewrite it using one of the fixed precision libs we were talking about yesterday
<echlebek>	yeah, looking at the code for that function, it wouldn't be too bad
<esarl>	i was planning to. then i realized it had no implementation for x ^ n
<bnagy>	it only uses + - / and **
<bnagy>	it must
<displease>	i have a `func newservices() *services etc` in my services.go, in my $gopath/src/services/services.go file, i've imported services in the file i'm working on in my $gopath, but it's telling me services.newservice() is undefined
<displease>	what am i doing wrong?
<esarl>	so i went to look that up, and i can either implement using a loop, or find a log ?
<esarl>	http://godoc.org/github.com/shopspring/decimal
<bnagy>	worst case just use a for loop
<esarl>	i think for their purpose they dont need it
<displease>	i've checked, i have saved services.go since i've added this
<bnagy>	but they are mostly-wrapping big.rat was my understanding, which has it
<displease>	do i have to have go rebuild services.go or something somehow?
<mohae>	displease: how did you import it?
<esarl>	oh did big.rat have it? i must have missed it
<echlebek>	well big.int has exp
<displease>	mohae: "services"
<displease>	the package is named services
<esarl>	ya.. big.int has i dont think big.rat does
<mygreenpickle>	hey peeps. is there any way in go for me to create a database on the fly before doing a sql.open?
<kirkmcdonald>	mygreenpickle: i'd think that would be up to whichever db you're using.
<bnagy>	esarl: huh, you're right
<displease>	mohae: here i'll throw both files into a gist just for clarity
<bnagy>	for loop then, i guess
<mygreenpickle>	kirkmcdonald: i should have specified that i want to use github.com/lib/pq. i have done my search and it doesn't seem to be a way to do it, which seems really weird to me.
<displease>	mohae: https://gist.github.com/sneakyness/ac393dc3866c6b7dc792
<esarl>	for loop it is lol
<mohae>	mygreenpickle: if you have a way to connect to the server w/o the db name, or an alternate db on the server that you could connect to and sufficient privileges to create a new db. then switch to that database. caveat: i'm just looking at it from the sql perspective
<mohae>	displease: given your package names and import path i can't say as i don't name packages in such a manner; which is inconsistent with conventions.
<displease>	mohae: yeah i realize the names are bad i'm just trying to get something working
<displease>	how am i breaking convention?
<mohae>	displease: note the import path of your imported martini package, which, btw, it's generally recommended that you don't use.
<mohae>	and whoever created that go-martini org...>.>
<displease>	dont use what?
<displease>	i don't think that has anything to do with newservice() coming back as undefined
<mohae>	displease: https://golang.org/doc/code.html
<mohae>	displease: i can't say, as i don't use such package names as that is not conventional in go.
<mygreenpickle>	mohae: i do not quite understand what you mean. the project will run locally on the machine and a user had to enter a database_name into an environment files. my users are not knowlegable in it. the go file has to be able to create it itself.
<displease>	mohae: you can't say what??
<displease>	could you be more specific, i'm not sure if you're nitpicking about things that are unrelated to the issue
<displease>	i'm not even sure what you're saying about importing martini? that's how they do it on the link you just sent me
<mohae>	mygreenpickle: it seems wierd that you want you application to connect to a db that doesn't yet exist. but, if it is something that works within the context of what you are doing, then you will probably need to connect to a valid database on that server, as sql open requires that, make sure the user connecting to it has sufficient privileges to create a db, which again would be wierd for an application db user, and then create said db
<mohae>	and switch to using it.
<echlebek>	esarl: you give up too easily ;) http://play.golang.org/p/pca-neutqm
<kirkmcdonald>	mygreenpickle: i normally think of db creation as being in the domain of database administration, and outside the domain of what the application does.
<mohae>	displease: as i said, your package naming isn't consistent with go's and i can't provide any additional info as i haven't tried importing packages named in such a way. sorry, i can't help in this siutation.
<kirkmcdonald>	mygreenpickle: and indeed postgresql is generally rigged up in this way.
<displease>	how is it not consistent???
<mohae>	mygreenpickle: an application user should not have such privileges
<mohae>	displease: please read the provided link.
<kirkmcdonald>	mygreenpickle: and as mohae says, you don't typically want the db user that your application uses to have this level of permission.
<displease>	mohae: i have, could you please answer the question
<echlebek>	esarl: sorry that was wrong.
<mohae>	displease: i have
<displease>	no you haven't?
<esarl>	that almost works
<cronos>	displease: how did you compile your program?
<esarl>	if numb is not a rational?
<esarl>	and is an integer?
<cronos>	also, what does go env output?
<kirkmcdonald>	(heck, i wouldn't even give the application's user delete permission if i can avoid it...)
<displease>	cronos: go build
<displease>	cronos: https://gist.githubusercontent.com/sneakyness/8935b53e39fc65a5e7bf/raw/2b441aa5e3fdb29c46e35794c405e1d3619009de/gistfile1.txt
<mohae>	mygreenpickle: any db user should only have the absolute minimum privileges they need to accomplish what they are supposed to.
<mohae>	ideally as roles, if the db supports that so individual user stuff doesn't have to be managed, aside from role membership
<cronos>	displease: could you paste output of tree command ran from $gopath?
<mygreenpickle>	mohae kirkmcdonald - thanks for the explanation. in my case, the database will be used to save songs location of his music library on his local machine. which my script will let him do queries on that database for searching files (the idea is more complicated than that but that is a summary)
<displease>	cronos: what is "tree command"
<fivetwentysix>	apt-get install tree / brew install tree
<fivetwentysix>	displease: ^
<displease>	oh okay
<cronos>	displease: a command called "tree"
<kirkmcdonald>	mygreenpickle: perhaps sqlite would be a better fit for this application?
<cronos>	same as ls
<displease>	so just `ls` then?
<fivetwentysix>	kirkmcdonald: one thing is not hard to do is actually dump json to a text file and load it back up
<mohae>	mygreenpickle: what kirkmcdonald said. or you could use an embeddable db written in go so it's just an import
<mygreenpickle>	kirkmcdonald: probably! if you think this is more appropriate, i'll do some research about it.
<displease>	cronos: https://gist.githubusercontent.com/sneakyness/3da405856230cc4a8811/raw/bb305a603aadd2eeaf1d658d0bb97b14c3aa2ece/gistfile1.txt
<mygreenpickle>	mohae kirkmcdonald - thank you!
<cronos>	displease: i asked for tree
<cronos>	i meant that "tree is a cli tool same as ls"
<displease>	oh okay
<echlebek>	esarl: does numb ever need to be a rational?
<esarl>	echlebek: cant u just do numa.exp(numa, numb, nil)*numa.exp(numa, -denb, nil) / dena.exp(dena, numb, nil)*dena.exp(numa, -denb, nil) (with the proper / and * functions)
<kirkmcdonald>	mygreenpickle: with sqlite, if you want to make a new db, you just point it at a file which doesn't exist yet, and it creates it.
<kirkmcdonald>	mygreenpickle: then you issue which ever create table commands you need.
<kirkmcdonald>	whichever*
<fivetwentysix>	displease: i'm guessing you're having trouble with the main and lib package in same repo style?
<esarl>	if im doing amortization schedules, i can’t see why i would, just int is fine.. but in general?
<fivetwentysix>	displease: take a look at goconvey and how they did it
<fivetwentysix>	ugh i have to goto awsloft :(
<displease>	ah ports has it too
<cronos>	why "have to"?
<displease>	cronos: https://gist.github.com/sneakyness/6eb759b36011853b6ad9#file-gistfile1-txt
<fivetwentysix>	cronos: my colleagues are going and want to hang out with them :d
<cronos>	heh, so not so bad after all
<displease>	fivetwentysix: i'm not sure what i'm supposed to be looking at in goconvey
<cronos>	displease: any reason you leave server.go outside of gopath?
<displease>	what do you mean? it's there
<fivetwentysix>	displease: i dont know your problem, but you can see how they have multiple packages in 1 repo and how they import stuff
<cronos>	displease: i mean outside of src
<displease>	services.go is in the same directory as ~/development/go
<displease>	should it be inside src? i haven't installed it
<fivetwentysix>	yeah
<echlebek>	esarl: yeah, i think you could just do that as long as numb is not rational. doing it in general requires newton's method i guess.
<fivetwentysix>	server.go needs to be inside src/
<cronos>	by convention all source code should live inside $gopath/src/somepackage
<displease>	wow see how easy and clear that was to explain mohae
<mohae>	displease: the code link provided earlier explains this...
<displease>	not quite
<mohae>	displease: or you could have read the provided info
<displease>	i did
<mohae>	i'm not going to mollycoddle
<fivetwentysix>	displease: golang development is workspace based
<mohae>	no, because it shows where your code goes, which is where it wasn't
<cronos>	displease: the link mohae linked explains how to organize your code quite well
<fivetwentysix>	so stuff will break if you're workspace aint configured properly
<displease>	cronos: no doubt, but that says it's for packages
<mohae>	displease: which is what you have
<displease>	i haven't installed this yet
<cronos>	displease: everything is a package
<cronos>	package != library
<cronos>	packager can be either a library or a command
<mohae>	what does install have to do with it?
<barum>	[hiring] looking for a developer for a golang long term project in the government sector. this is a remote work opportunity full or part time. must have a us work permit, be a us resident or a us citizen. please pm me.
<cronos>	(command is package who's name is main)
<displease>	i don't think that is explained so so clearly cronos
<displease>	now i understand
<mohae>	https://golang.org/doc/code.html#packagepaths
<cronos>	displease: if you have some suggestions on how to improve the wording, please open an issue on github.com/golang/go
<displease>	i think i will, would you agree that it jumps into mentioning packages without explicitly saying that everything is a package?
<mohae>	it explains in the beginning, under workspaces
<displease>	it says that go files are organized into packages
<displease>	it does not say that everything is a package
<mohae>	and it goes on to say folders are packages
<cronos>	`commands and libraries are built from different kinds of source packages`
<mohae>	no other information is provided, how would you make a conclusion other than folder == package as that is what it says
<cronos>	i can't argue about this because to me this idea seems obvious
<mohae>	i fear, if that's not obvious, then writing software in general may prove to be problematic
<displease>	idk i read that "learning go" book and i don't think it even went into that until the 3rd or 4th chapter, i figured that because i could just put code in a code.go file and run it that doing so was fine
<d1etyd3vil>	topic!
<d1etyd3vil>	!topic
<d1etyd3vil>	e_e
<mohae>	that's not a very good book, just do the tour, read the specs, and read effective go pages on golang.org
<d1etyd3vil>	what is this channel about?
<mohae>	oh, and the code link
<logie>	go programming language
<displease>	i don't disagree, but it was the first one i found googling for a go book, and it looks very book-like and official
<d1etyd3vil>	oh. i don't know this language. sorry. bye.
<quiznilo>	...
<cronos>	displease: sadly, it's just a book written by a random person who thinks he knows go.
<displease>	:)
<mohae>	displease: there aren't any good books for go atm. that's why tour.golang.org, the specs, and effective go pages are recommended to start.
<nilium>	just want to point out that i now know of at least one person who has plagiarized w3schools sample code and submitted it as a code sample for a job application.
<mohae>	did you hire him?
<mohae>	;)
<hyphenated>	there will be this book in a few months.. until then, mohae's suggestion is the best one. http://www.amazon.com/programming-language-addison-wesley-professional-computing/dp/0134190440/
<nilium>	considering i'm the one who found out it was plagiarized, no, they weren't hired.
<displease>	see, if the code.html page had a simple "every go program is made up of packages." like the tour, this never would have happened :)
<mohae>	nilium: i was joking, but what kind of idiot plagiarizes code in that situation?
<nilium>	i don't know, but i do know that a) it was google-able, b) they changed very little, and c) there is sample code on w3schools using ratliff style indentation
<mohae>	the code clearly explains what a package is.
<mohae>	displease: was your code not in a folder?
<displease>	it's in gopath
<displease>	just not in gopath/src
<nilium>	the indentation style is frankly the weirdest part.
<freman>	hmmm
<mohae>	displease: it was in a directory, was it not?
<displease>	i'm not sure what you're asking
<mohae>	displease: look at your tree output, the code was in a folder
<displease>	which code?
<mohae>	but seriously, this is a bunch of nonsense
<quiznilo>	k&d go
<mohae>	nilium: that is really odd
<displease>	anyways, fivetwentysix and cronos, you are both fantastic and helpful people, thank you for having the patience to resolve my confusion. mohae is somewhat toxic/elitest/unhelpful, and should perhaps not offer to help people if they do not have the patience to explain things clearly. nitpicking about how packages are named does not help anyone
<wessie>	not being spoonfed doesn't mean someone is instantly elitest or toxic
<displease>	wessie: insulting someone's ability to program is definitely elitest and toxic
<wessie>	i don't believe he insulted you anyway, rather he pointed you to helpful documentation/starting points for learning go
<mohae>	displease: i provided you with the information necessary to resolve your problem. you were importing a folder, which is clearly stated to be a package.
<displease>	"i fear, if that's not obvious, then writing software in general may prove to be problematic"
<displease>	definitely not importing a folder
<mohae>	sigh what is services then?
<mohae>	that is a folder
<displease>	its just services.go, like i said
<displease>	there is no services folder
<mohae>	but that's not the import
<mohae>	displease: look at your own tree output
<displease>	oh i meant server.go lol
<displease>	anyways, i put server.go in a server folder inside src and it's still telling me that services.newservices() is undefined
<esarl>	echlebek: https://play.golang.org/p/uverlornc9 <- not sure if i done it most efficiently. works fine though it seems a little slow lol
<esarl>	oops forgot the benchmark function: https://play.golang.org/p/7m7anvexlt
<displease>	that was the most confusing thing, why would where server.go is have any effect on importing from services.go? i'm already importing and using webservice stuff without issue
<mohae>	esarl: how does that compare to the python implemenation?
<esarl>	i.e os/exec?
<mohae>	esarl: however, i asked because of your comment about not sure about efficiency
<mohae>	a/about/about not being/
<mohae>	err i screwed that up too >.>
<esarl>	lol sorry im lost
<esarl>	well i havent tried but imagine possibly a lot slower than just os/exec python? but then i guess numpy is using floats
<esarl>	so none of this back and for from decimal -> big.rat -> big.int -> exp -> big.rat -> string -> decimal
<mohae>	esarl: you said that you weren't sure if it was done the most efficient way, i was curious how it compared to the numpy one
<mohae>	esarl: ic
<wessie>	displease: could you perhaps show a tree of your gopath and the related code that has the error?
<displease>	sure i'll do a new tree
<displease>	tree: https://gist.github.com/sneakyness/d214d1ad03d3fbd055c6
<displease>	code: https://gist.github.com/sneakyness/ac393dc3866c6b7dc792
<skelterjohn>	displease: server should be able to import "services"
<skelterjohn>	oh wait, services is the command
<displease>	it does
<skelterjohn>	services is package main, right?
<skelterjohn>	otherwise it wouldn't create bin/services
<displease>	i'm not sure what you're asking
<displease>	it says package services at the top of services.go
<displease>	should it say package main
<skelterjohn>	no
<skelterjohn>	but i saw bin/services
<skelterjohn>	things only go in bin if they're package main
<displease>	probably some leftover shit from earlier fumblings
<displease>	i guess i'll delete that
<displease>	same error, though
<skelterjohn>	what's the error?
<displease>		./server.go:11: undefined: services.newservices
<skelterjohn>	(late to the party)
<wessie>	i don't see anything wrong with the code or tree
<displease>	me either, which is why i was pretty frustrated when homeboy started snapping off about folders and names
<skelterjohn>	displease: delete the pkg directory
<skelterjohn>	perhaps something is out of sync
<displease>	ayyyyyy a new error
<wessie>	are you perhaps using symlinks
<displease>	skelterjohn, you da real mvp
<displease>	is there a clean command i should be running between builds or something?
<skelterjohn>	if source is older than the compiled artifacts in pkg, they won't get rebuilt
<skelterjohn>	in general no
<skelterjohn>	you can just build and it will figure it out
<skelterjohn>	but it 'figures it out' by inspecting timestamps
<displease>	i wonder why it didn't this time
<displease>	must have been some timestamp fuckery
<skelterjohn>	probably something weird with a tarball
<displease>	welp i can't say that this is the first time i've wasted hours because of stale build data
<skelterjohn>	displease: most confusion having to do with things not getting imported properly is because people don't understand how gopath, directories, source, and packages all relate
<skelterjohn>	so that's the first thing we generally talk about
<skelterjohn>	stale artifacts happen too, but less frequently
<displease>	right i get that, but hitting someone with a link and telling them to read it when it actually had nothing to do with the problem i was having is kind of funny/frustrating
<skelterjohn>	well, you don't have to read it
<skelterjohn>	it's just text on a screen
<skelterjohn>	but i'm glad it all got sorted out
<displease>	well i already did read it, when i asked what it had to do with my problem i couldn't get an explanation :)
<displease>	anyways its quitting time, i'm going home. thank you so very much :)
<furball365>	anyone have any luck building gccgo from source recently?
<furball365>	i would like to use gdb and i've heard gccgo is the best option
<skelterjohn>	displease: sure thing
<bnagy>	furball365: reconsider your life choices, imho
<furball365>	i've fetched gcc using the gccgo branch and downloaded the dependencies using the contrib script but now configure is telling me that go could not be built
<nucular_>	golang newbie question: i'm trying to populate a struct with the content of a webpage and a map of html tags and their counts. i've gone through the tour io.reader exercises and some blog posts. my solution seems like the wrong way. can you take a look? http://pastebin.com/y1zzgwwv
<furball365>	bnagy: you've tried debugging with gdb i take it..
<djx>	which "log" libs do you guys usually use? i need one that prints the method here the log message was created
<bnagy>	only when completely unavoidable
<furball365>	bnagy: well.. i have to see what i'm getting into
<bnagy>	but go as a language has enough support tools that i've never even come close to breaking out a debugger
<bnagy>	in fact i don't think i have _ever_ used a debugger for something i have source for, only for re
<furball365>	bnagy: someone from the docker team has claimed success with gdb. it's quite handy when you get a crash or need to break.
<bnagy>	although i accept that this is a minority position
<skelterjohn>	djx: that's not the standard, but it is possible to do
<furball365>	bnagy: i come from c/c++ background.. gdb is quite common down there
<skelterjohn>	djx: you can write a function that calls runtime.callers() and incorporates the result into the log message
<djx>	skelterjohn: what is the standard?
<skelterjohn>	djx: to not have it print the method :)
<bnagy>	furball365: native go programs don't (99.9%) crash
<skelterjohn>	djx: but i understand how that could be useful while debugging
<bnagy>	panics are a whole other animal
<skelterjohn>	bnagy: i have never used a debugger with go either
<djx>	<skelterjohn> oh yep it is useful :-) i found one but i'm not sure "how" to use it
<skelterjohn>	but i've only been writing go code for 4.5 years
<skelterjohn>	djx: i made something that helped with this a while ago, i'll see if i can dig it up
<_cb>	in oop i could inherit horse and dog from mammal (both drink milk) but dog eats meat and horse eats grass and i could inherit hound beagle from dog. how would i accomplish that functionality in go?
<djx>	<skelterjohn> https://github.com/op/go-logging/blob/master/examples/example.go
<bnagy>	_cb: with composition
<skelterjohn>	djx: (small nit) when you address me like that i read it as you quoting me
<djx>	<skelterjohn> you see the "var log" on line 9? if i have multiple files for the same package i can only have one "log"
<skelterjohn>	djx: in general, you address people as i address you to avoid confusion :)
<djx>	<skelterjohn> test
<skelterjohn>	f!
<skelterjohn>	djx: you can use that one log in all files in your package
<djx>	that's what happens when i copy-paste your name from xchat2 =\
<djx>	i only left the "</>"
<skelterjohn>	djx: i have tab completion for your name
<djx>	omg!
<djx>	i've been using this for over 3 years and never thought about that!
<skelterjohn>	haha
<djx>	i have it too!
<bnagy>	:|
<djx>	i feel so bad now...
<djx>	does not
<skelterjohn>	djx: https://xkcd.com/1053/
<djx>	ahah
<skelterjohn>	though i'd guess far fewer than 10k per day learn about irc nick completion
<djx>	i should change my nick to djx_you_can_tab_my_name_while_referring_me
<skelterjohn>	djx: but what about the go stuff? i'm not sure i understood your question about var log
<skelterjohn>	djx: aha! found it https://github.com/skelterjohn/debugtags
<skelterjohn>	um, not what you wanted
<skelterjohn>	but it's what i was thinking of haha
<djx>	skelterjohn: ah that's not bad
<skelterjohn>	https://github.com/skelterjohn/gonicetrace/blob/master/nicetrace/nicetrace.go shows you how to get and display caller information from runtime.callers()
<skelterjohn>	(different repo)
<skelterjohn>	and you could combine those two to have an incredibly verbose debugging logger
<djx>	skelterjohn: so, from the example that i've sent you i was expecting to past var log = logging.mustgetlogger("example") on every file, just for consistence
<skelterjohn>	i tend to not let my code not get complicated enough to really need a debugger, these days
<skelterjohn>	djx: the files are all in the same package, and therefore share the same global namespace
<skelterjohn>	djx: so there is no need to declare it in each of them (in fact that is a compile error)
<djx>	skelterjohn: yep, exactly so i don't know if there's a pattern to put that var log on which of the files?
<skelterjohn>	because it's available in every file, when you declare it just once
<skelterjohn>	oh...
<djx>	skelterjohn: or if i should create a log.go on every package
<skelterjohn>	whichever one is your favorite.
<djx>	just to have that variable
<skelterjohn>	it's important to play favorites
<djx>	lol
<skelterjohn>	and to make it clear to all your files which one is the best
<furball365>	skelterjohn: back.. network went down :(
<djx>	furball365: you can tab the nicks of people when you speak, did you know that?
<djx>	furball365: i didn't :-( skelterjohn taught me
<skelterjohn>	djx: don't make it weird
<djx>	skelterjohn: lol
<furball365>	djx: do you mean that in your client 'tab' lets you autocomplete?
<djx>	skelterjohn: but really, tks for the repos
<djx>	furball365: yep
<skelterjohn>	djx: sure thing
<furball365>	djx: because, if so, that would be kinda trivial
<furball365>	dja: and it doesn't work in my client
<djx>	furball365: i feel bad already about that...
<furball365>	djx: see :)
<djx>	furball365: ;-)
<furball365>	djx: but really.. a debugger is pretty handy sometimes.
<furball365>	djx: if you're coming from the scripting side you probably wouldn't be too keen on it, but if you have to jump into the middle of bug to see context it can be quite handy.
<skelterjohn>	furball365: i was chatting with djx about how some combination of https://github.com/skelterjohn/debugtags and https://github.com/skelterjohn/gonicetrace can go a long way towards debugging
<djx>	furball365: no, it's not for debugging, it's for logging mostly. some things are helpful to see in logs if it fails afterwards
<furball365>	djx: yes.. i've had a conversation with some folks about logging on stackoverflow and agree that it can be low-hanging fruit when you're trying to repro a customer problem
<furball365>	djx: i've tried  remote debug sessions, but usually the customer isn't setup for them
<furball365>	djx: and the heisenbugs can be a real bear to reproduce.. logs can be a lifesaver
<djx>	yep yep and when the costumer calls you the bug is solved :-)
<furball365>	djx: if they are light enough not to interfere with the timing of the bug
<skelterjohn>	furball365: that was so common when i'd do stuff with c++
<furball365>	djx: yes.. happy times :).
<skelterjohn>	if i didn't initialize some memory properly, the print statement would cause it to work
<skelterjohn>	take it out, fails again
<skelterjohn>	gg.
<djx>	lol
<furball365>	djx: yes.. i think perhaps golang has yet to scale to the size of some of the c++/java monsters
<furball365>	djx: just dipping my toe in the water
<furball365>	skelterjohn: i suspect the docker team might see some tougher bugs.. don't know how big their code is. apparently they do use gdb regularly according to that post. this surprised me.
<ttke>	mmm structured logs
<furball365>	skelterjohn et al: this is the discussion wrt trace logging.. http://stackoverflow.com/questions/29871585/how-do-you-log-function-call-return-values-in-golang
<furball365>	skelterjohn: i don't think we had anyone familiar enough with the golang runtime to say whether it would be possible to support automated trace logging in the golang runtime
<furball365>	skelterjohn: it might also apply to event sourcing
<skelterjohn>	you could certainly do it
<skelterjohn>	there is precedent for instrumenting things in the race checker
<skelterjohn>	it would have to be a modification to the go compiler itself, though
<furball365>	skelterjohn: it would be unique.. which is sometimes ok
<skelterjohn>	furball365: i don't follow
<furball365>	skelterjohn: if it is unique and provides value to devs then it's ok :)
<skelterjohn>	man, gerrithub.io takes forever to import a pr
<furball365>	skelterjohn: and if it's unique to golang it draws attention to its strengths relative to other environments. i suspect some in the clr/jre community may have looked at it. event sourcing is a common-enough pattern.
<skelterjohn>	furball365: make it happen ;)
<furball365>	skelterjohn: i could do it, but my attention is currently on a larger project higher up the stack and i managed to get past the immediate problem. i don't know if the runtime has the hooks necessary to do it, currently, either.
<furball365>	skelterjohn: just a thought, in any case. meanwhile i have no luck with gccgo and i start to feel it's not a well-travelled path. there is a fairly length page on it on the golang site, though. maybe the latest gccgo branch is broken somehow.
<furball365>	skelterjohn: they might want to consider moving away from gcc btw. companies are moving towards llvm.
<_cb>	using composition how would i make it so that horses and dogs share the drink milk function but horses  eatgrass  and  dogs  eatmeat? understand how i can use interfaces to the one or the other but not both.
<furball365>	anyone have any positive experiences using gdb? i hear docker uses it with some success, but so far i can't get the latest gccgo to configure with go support
<_cb>	is this the correct way? http://play.golang.org/p/uy4c6ypvek
<quiznilo>	i should test out https://www.reddit.com/r/golang/comments/34b67y/wgo_managed_workspaces_on_top_of_the_go_tool/
<quiznilo>	give some feedback
<wessie>	quiznilo: could've just linked to the github, the author is in here :)
<quiznilo>	i know
<furball365>	quiznilo: out of idle curiousity, what is this thing that you know?
<quiznilo>	that the author of what i posted is currently in the channel
<quiznilo>	i actually wouldn't have posted that link if he wasn't
<furball365>	quiznilo: ah.. i just logged in and it seemed like you might be the go oracle i've been seeking. my client does not scroll very high.
<quiznilo>	of crouse
<quiznilo>	carry on...
<furball365>	quiznilo: yes.. good to know..
<furball365>	anyone here tried to use gccgo lately?
<furball365>	trying to install it, but configure fails on osx
<furball365>	i'm doing it under the assumption that gdb suddenly becomes useful, but this may just be rumor
<mohae>	furball365: gdb doesn't understand go's concurrency model
<mohae>	try https://github.com/derekparker/delve
<mohae>	oh, your using gccgo, i don't know if my link would be of use (never tried)
<furball365>	mohae: hi again. according to the golang page, gccgo has native support for gdb. it seems like an exercise, though.
<furball365>	mohae: looked at delve, but it seems alpha still
<mohae>	furball365: well, gdb doesn't understand go's concurrency model
<mohae>	and delve does, if you're debugging go, for which delve will work better than gdb, regardless of delve's status.
<furball365>	mohae: i see some posts from docker devs that indicate they are using gdb successfully.
<mohae>	and as long as the debugger does what it needs and works better than the other option, why would 'alpha' matter
<mohae>	furball365: good luck then
<mohae>	just stating there are known issues with using gdb to debug go
<furball365>	mohae: i'm always cautious of alpha, particularly in a debugger. usually you have enough problems at that stage without having your tools contribute.
<furball365>	mohae: yes, i know. i was trying to get gccgo installed but it balks during configure.
<mohae>	again, i'm just stating the fact that delve works for debugging go. whether it has the exact functionality you are looking for is a different thing, but it does work well for debugging go
<furball365>	mohae: ok. seems worth a try, then. i applaud their efforts. perhaps jetbrains get interested if there is a debugger.
<furball365>	mohae: thanks
<furball365>	mohae: i don't use jetbrains btw.. just vim currently
<mohae>	np
<furball365>	mohae: looked at the open issues on delve.. it's still too unstable for production use
<cronos>	you... debug in production? :o
<furball365>	cronos: sure.. sometimes it's necessary. you should try it.
<cronos>	it's not like your success relies on your debugger. it's just a tool to help you identify issues.
<cronos>	debugging in production for me most of the time consists of analyzing logs after the issue happened
<furball365>	cronos: well.. there are certainly no shortage of shops pitching the mvp startup line, but if the first impression of the customer is that your product is losing their time/data then they may not stick around.
<furball365>	cronos: there is a realization among startups now that pushing out an mvp isn't always the best course
<furball365>	cronos: particularly if the market is tight.
<cronos>	i don't really see how startups and mvps relate to open source debugger
<cronos>	it's not a product they try to sell to you
<furball365>	cronos: i suspect jetbrains could sell me one :)
<furball365>	cronos: i think golang has enough traction now to draw their interest
<cronos>	ugh, i'd like to see a person who'd pay to use a debugger for go
<furball365>	cronos: i think docker uses gdb based on some www posts. i see a lot of people saying it doesn't work, though. perhaps it's because the projects aren't really big enough yet to justify breaking into the code with a debugger.
<cronos>	but anyway, my point was: delve is something worth checking out if you can't live without a debugger. if it's unbearably broken, leave it and look for something else.
<furball365>	cronos: fair enough. they seem to be moving quickly but it might be a bit frustrating for a bit.
<cronos>	yeah, go code is easy enough to read and follow so that it's really rare that you would *need* a debugger
<furball365>	cronos: well.. i've got a moderately large piece of go code which i'm unfamiliar with that prints out an error message after about 10 seconds and it would be nice to just put a breakpoint on the message to figure out the context. a log doesn't really do that well.
<alectaylor>	hi
<quiznilo>	hello
<furball365>	cronos: i spent about 6 months debugging 1 million+ lines of c++ on a tight schedule. at that scale a debugger is nice.
<quiznilo>	insane
<cronos>	furball365: well, here our debugging approaches diverge
<cronos>	yah, 1m loc *and* c++ sounds horrible
<furball365>	cronos: perhaps because of scale, or perhaps because you are familiar with the code
<furball365>	cronos: and you aren't that far above c/c++ :)
<cronos>	there are way fewer ways to shoot myself in the foot with go
<furball365>	cronos: yes, that is certainly true. it seems very pragmatic to me. there is always the leaky paradigm, though. when you slip off that cliff then a debugger can help.
<alectaylor>	i'm from the python world and am trying to decide whether to use go or python for the next component in my system.
<alectaylor>	is there a go equivalent to fabric? - /me is currently reading: http://kukuruku.co/hub/golang/ssh-commands-execution-on-hundreds-of-servers-via-go
<andlabs>	what is fabric
<ebonics>	alectaylor, in my experience with go (limited) i've found that finding your own library is the best option
<ebonics>	there's so many shitty libraries you need to assess them for yourself
<ebonics>	cause people will just link you the first result on google
<_cb>	ebonics you mean making your own library?
<alectaylor>	btw this is fabric: http://www.fabfile.org/
<ebonics>	_cb, no i mean to find the most full featured library you need to do research
<ebonics>	there's not many mature libraries out there yet
<_cb>	yes, agree. go is very young
<andlabs>	i'm not sure what that libray is supposed to be doing
<andlabs>	but if it's not on godoc.org...
<cronos>	alectaylor: there's http://godoc.org/golang.org/x/crypto/ssh for ssh and http://godoc.org/github.com/pkg/sftp for file transfer
<alectaylor>	cronos: yeah, just seeing if there's something atop those libraries that abstracts away things cleanly
<cronos>	they are quite abstract imo
<alectaylor>	fabric has a bunch of rather convenient helpers
<cronos>	for example?
<alectaylor>	(and is built atop paramiko, which is similar to crypto/ssh)
<furball365>	alectaylor: perhaps salt might be worth a look. kubernetes is built on top of it. docker is built on go. they both have a fair bit of momentum.
<alectaylor>	salt and ansible are pretty cool also
<alectaylor>	but i just want something very simple for running a few commands in response to events
<alectaylor>	(specifically a queue of events)
<_cb>	if it is production go with python. if you are experimenting go with go
<quiznilo>	this http://godoc.org/code.google.com/p/go-uuid/uuid needs a sample program
<alectaylor>	_cb: of all my components only two are currently written in other languages, mesos (c++) and libcloud+my wrapper (python). everything else is go
<ebonics>	alectaylor, what exactly do you need the library to do
<alectaylor>	connect to a host, run a few commands (at different permission levels), then disconnect.
<furball365>	alectaylor: if you are looking for speed and clean pragmatism then golang is better than python. python has a lot of ways to do the same thing, it lacks the focus of the golang development tools, and it has serious speed brakes. last i used it i went with cython.
<ebonics>	i guess pragmatism is a good way to describe go
<alectaylor>	mmm
<ebonics>	it's an extreme form of it though
<alectaylor>	from what i've seen of go it's nice, but not quite as neat+powerful as haskell
<ebonics>	there's like absolutely no design involved in writing a go application
<alectaylor>	lack of boilerplate sounds good to me
<bnagy>	jet fuel can't melt steel beams
<alectaylor>	bnagy: youtu.be/sdf35v
<ebonics>	it's nice actually, i'm still getting used to it though
<furball365>	ebonics: yes, highly pragmatic i think. i use the lint plugin in vim and it wants me to do everything it's way :). i don't mind. indent/comment/naming style isn't the main issue for me.
<ebonics>	i think i still prefer rust though
<alectaylor>	rust has better patterns imho
<_cb>	ebonics rust over go?
<ebonics>	but that may change as i use go more
<furball365>	ebonics: i like the goroutine scheduler as well.. it's erlang's model, but you don't have to drop out of the environment for tasks which require performance.
<ebonics>	furball365, yeah goroutines are what kept me from abandoning when i learnt there's no inheritance lol
<quiznilo>	skelterjohn: i love this wgo... i love it's reason for existing
<furball365>	alectaylor: i don't know if rust has a strong corporate sponsor. golang is from google and docker. it isn't going away anytime soon.
<ebonics>	_cb, definitely like the syntax and language better yeah
<xe>	furball365: mozilla
<quiznilo>	'golang is from google and docker.'?
<_cb>	haskell, clojure and assortment of functional languages have been out there forever.  don't see functional becoming the 'next thing'. go brings a lot to the table and rust is making nois
<quiznilo>	docker?  rly?
<ebonics>	i can't stand rust at all right now though
<ebonics>	half the libs require nightlies which change every hour, like sometimes extreme changes
<furball365>	xe: ah.. well.. i've heard good things about rust but golang fits my requirements for now
<ebonics>	cbf with that
<_cb>	does docker have a hand in go? i thought it was all google
<quiznilo>	hmm... docker didn't have anything to do with the development of the language
<quiznilo>	ya, it's all google and volunteers
<xe>	furball365: rust is great for the people at work who complain that go has no generics
<furball365>	_cb: docker is built with go
<quiznilo>	yes
<_cb>	ahh generics .............
<ebonics>	xe, i have a severe dislike of go typing
<ebonics>	i don't understand the rationale at all for it
<ebonics>	i haven't read very many docs yet though
<xe>	i've been thinking about toying with the go compiler source code and trying to implement generic programming in it
<xe>	if only to make them shut up
<bnagy>	it's like an hn thread.. but right here in my living room
<alectaylor>	also annoyed with gerrit and whatnot making it difficult to patch go
<freman>	http://play.golang.org/p/fpvudwekht - trying to unmarshal the id's to an array of "id"... but can't figure out how, am i just going to have to []map[string]string and iterate it?
<furball365>	xe: good lord
<_cb>	generics are nice but not indispensable
<alectaylor>	a simple pr or issue+patch would be much nicer
<ebonics>	haha ha ha
<furball365>	xe: a tin hat might keep out the voices :)
<xe>	_cb: they are stubborn c++ programmers
<ebonics>	i guess that's what's nicer about the rust language too
<xe>	i am a more stubborn c programmer
<ebonics>	there's a lot of go features that would clearly improve the language imo
<|craig|>	ebonics: however then go would have the problem of having too many features
<ebonics>	with rust, it's a lot more community-centric
<quiznilo>	interesting statement
<bnagy>	freman: you're looking at a []map[string]string so yeah if you want something else you're going to have to transform it
<quiznilo>	is that your gut feeling or do you have any evidence that rust is more community-centric?
<freman>	ohkay
<ebonics>	quiznilo, just look at the pr logs of go and rust
<furball365>	xe: me too. there's quite a lot of blogs etc. about generics and golang.
<ebonics>	to be fair go is more developed so it's not the best comparison but still, i have been reading quite a lot and most people agree that go needs better typing
<alectaylor>	rarrr - https://groups.google.com/forum/#!topic/golang-dev/0ielw_bbtrk
<_cb>	imho anyone that complains too much about generics does not understand pointer
<alectaylor>	_cb: i'll give you a few pointers
<_cb>	i will take pointers
<quiznilo>	every computer language has to have generics, dammit!
<ebonics>	also the project structures of go.. i don't think i'll ever get used to it
<furball365>	ebonics: design by committee doesn't have the best reputation. golang has strong opinions in its overall approach. i don't think it would survive a committee. that is something that some ruby/python developers have a problem with but i think the decisions have so far saved me time.
<_cb>	ebonics what do you mean by project structures?
<quiznilo>	oh right, golang is a dictatorship, i won't argue that
<quiznilo>	there is still a lot of community involvement though
<ebonics>	furball365, yeah i understand
<ebonics>	quiznilo, i don't mean in developing libraries or something
<ebonics>	rather contributions to the language itself
<quiznilo>	no, either am i, i'm talking about contributions to the core
<ebonics>	_cb, flat directories and stuff
<the_last>	hi, i'm new to go and trying to figure out something basic, can someone please help me with this: https://gist.github.com/anonymous/9adfb88454f8943283ef -- basically as you can see on line 17 i'm assigning to t[i] using trade{}, but if you look at my "after" version of the struct (on line 32) it's a bit different. i don't have a trade object anymore. so now i can't assign it the same way (see line 44). is there a way i can assign it similarly,
<quiznilo>	https://github.com/golang/go/commits/master
<furball365>	btw i wish golang would publish a clean standard for use by gilab/gogs/ other git hosting services. the 'go get' functionality is nice, but i had to switch back to github because it was just a dead-end trying to get gitlab to support it.
<bnagy>	the_last: don't do what you did in after
<furball365>	maybe it's already there.. but i couldn't find it
<bnagy>	problem solved
<the_last>	bnagy: sure, but i'd like to do what i did in after, i prefer to be able to reference the trades as an array instead of a useless .trade
<bnagy>	i'd like a pony with a silver bridle
<the_last>	note to self: don't reply to trolls.
<quiznilo>	https://github.com/golang/go/graphs/contributors will take awhile to load
<quiznilo>	the hell?  jul 16, 1972?
<furball365>	quiznilo: what on earth are you doing?
<bnagy>	the_last: i'm not trolling. the before is more or less correct go code. trade is a type, that's how strongly typed languages work
<bnagy>	a slice of some anonymous struct makes no sense
<quiznilo>	trying to measure how 'community oriented' go is, by way of number of contributors to the project
<bnagy>	whatever other problems you're having based on the before code should probably therefore be approached a different way
<the_last>	bnagy: so the after is not correct go code? why does go allow you to do an array of anonymous structs?
<bnagy>	tbh i don't know
<bnagy>	i can't think of a sensible use for that pattern
<andlabs>	*array of* not really
<andlabs>	*map of* can come in handy
<andlabs>	though map of bool might also work
<andlabs>	oh wait anonymous structure not empty structure
<andlabs>	it wasn't a concious design decision
<andlabs>	it's orthogonality
<andlabs>	allow an arbitrary type specifier as the t in an array [..]]t
<andlabs>	you can allow anything, including structures
<andlabs>	the altenratives are
<andlabs>	- banning anonymous structures entirely
<andlabs>	- requiring that t in [...]t be a type name
<andlabs>	or another [...]t
<andlabs>	or a []t
<andlabs>	or...
<bnagy>	so what's the type of these anonymous structures?
<furball365>	andlabs: i find interfaces used a lot in the code i'm using, with a lot of casting at point of use
<andlabs>	furball365: i don't follow
<andlabs>	bnagy: the type of these anonymouss tructures is the structure type
<andlabs>	it is itself
<andlabs>	finish this sentence: "the type of an object of type struct { ... } is"
<furball365>	andlabs: it's not really clean oo. i see declarations like map[string]interface{} for key/value pairs then later on the value is cast to whatever type was (hopefully) put there.
<the_last>	struct!
<alectaylor>	hold up, i can't simplify my code like so?: `fmt.println("foo:", os.getenv("foo")) || "hello")`
<quiznilo>	bicycle
<alectaylor>	:(
<andlabs>	nope
<alectaylor>	that sucks
<the_last>	not struct, or not bicycle?
<bnagy>	oh, the full specifier
<quiznilo>	struct { ... }
<quiznilo>	ya
<andlabs>	what, did you think you could just say struct? =p
<bnagy>	http://play.golang.org/p/1in931ekhl
<alectaylor>	is there at least an environ.get("foo", "hello") type command? - or am i going to have to start maintaining a "utils.go"?
<the_last>	lol
<alectaylor>	:(
<quiznilo>	alectaylor: you have mismatched parens in that and everything
<quiznilo>	horrible
<the_last>	bnagy: interesting
<the_last>	i guess thats what i was looking for, pity it's gross :d
<bnagy>	just don't do it, the before code is right
<alectaylor>	quiznilo: xd, copy/pasted then edited inline here
<the_last>	okay, i'll leave it as it was, thanks
<andlabs>	furball365: i'm still not sure where what you're telling me is coming from
<furball365>	andlabs: ?
<ebonics>	bnagy, does the struct get redefined every iteration
<ebonics>	or does the compiler optimize that
<bnagy>	i have nfi i would never do it
<bnagy>	but it must be at compile time surely
<bnagy>	this isn't ruby
<alectaylor>	woh
<alectaylor>	how weak are golang's constants? - https://gist.github.com/anonymous/abba85587e518ba59a29
<heydabop>	alectaylor: that code has so many compilation errors
<_cb>	the_last http://play.golang.org/p/8vw42buglv
<heydabop>	value = strconv.itoa(value) obviously doesn't work
<heydabop>	itoa takes in an int and returns a string, value certainly can't be both of those
<heydabop>	alectaylor: also, none of those consts are consts as you're running code to set them
<the_last>	thanks _cb
<_cb>	np am a go newbie and it was a learning experience ;)
<the_last>	:)
<ebonics>	_cb, you can do
<ebonics>	http://play.golang.org/p/b-o0iv6j0w
<ebonics>	instead :p
<alectaylor>	heydabop: that's the first bit of go i've written. working from: https://github.com/offscale/gossha/blob/master/main.go. trying to allow for more configuration.
<alectaylor>	heydabop: wait, so go isn't reflective?
<_cb>	ebonics true but that would change the question posed by the_last. i wanted to answer the question as stated
<alectaylor>	wait, lol, the return type should be int
<alectaylor>	:p
<heydabop>	regardless of the return type, you cant do x = string.itoa(x)
<heydabop>	hell you can't do that in c++ either
<mohae>	you can also do http://play.golang.org/p/tomhne2kmf
<iankronquist>	hey, where can i find docs for the go 1.4 syscalls package?
<bnagy>	iankronquist: online, or you can (and probably should) run godoc locally
<bnagy>	personally i just godoc -http=:6060 2>/dev/null &
<_cb>	using composition instead of inhertance any thoughts on  struct mammal{} struct dog{ m mammal } vs struct dog{} struct mammal {d dog} ?
<alectaylor>	heydabop: so something more like this? - https://gist.github.com/alectaylor/06d07e485fa1bca2f740
<iankronquist>	bnagy: where online? not here: http://golang.org/pkg/sys/
<bnagy>	you asked about syscall, right?
<iankronquist>	bnagy: syscall has been deprecated as of go 1.4
<heydabop>	alectaylor: im just gonna introduce you to this https://play.golang.org/p/dewfaqpp0h
<mohae>	alectaylor: um just making stuff up doesn't work too well: https://blog.golang.org/constants
<heydabop>	alectaylor: click run and see what happens
<heydabop>	alectaylor: but again, you can't define a const with those functions
<iankronquist>	bnagy: https://docs.google.com/document/d/1qxzi9i1pofzpujqzxhyry6eehytqitkkjhfpq0zpxzs/edit?pli=1
<bnagy>	...
<alectaylor>	heydabop: how do i define constants that have value from an environment variable, or if that isn't set, then use a default?
<iankronquist>	"a new subrepository, go.sys, will be created.
<iankronquist>	where do i find docs for that.
<mohae>	alectaylor: you also might find https://golang.org/ref/spec and https://golang.org/doc/effective_go.html helpful
<mohae>	alectaylor: you don't
<heydabop>	alectaylor: you don't
<mohae>	alectaylor: read the constants link
<mohae>	and the spec, etc
<hyphenated>	alectaylor: you define variables then don't change them
<mohae>	if the value comes from an env variable, how can it be a compile time constant?
<hyphenated>	or define variables and expose the values via functions
<alectaylor>	i'm thinking to use this instead: https://golang.org/pkg/flag/
<alectaylor>	and no consts
<bnagy>	iankronquist: maybe https://godoc.org/golang.org/x/sys/unix
<iankronquist>	bnagy: there we go, thanks
<hyphenated>	i think you should still read what go's constants are, so you understand the choices
<alectaylor>	mohae, hyphenated: that github project that i'm working from, is it really bad, or should i work on it and try to improve?
<mohae>	alectaylor: given your questions and posted code, i'd work on learning go first
<bnagy>	iankronquist: but if you have installed it locally the godoc thing still applies
<alectaylor>	https://github.com/yuriynasretdinov/gossha
<hyphenated>	alectaylor: what project? you should learn go, so you can judge the quality yourself
<iankronquist>	bnagy: thanks.
<hyphenated>	i will say "yes it's bad" simply from the clues in the url
<heydabop>	alectaylor: i think you need to write a lot of your own code, do the go tour, and read effective go before you say someone elses code is bad...
<heydabop>	alectaylor: not in that order
<hyphenated>	oh.. it's a 'package main', so it kinda gets a pass
<alectaylor>	heydabop: my linters was complaining on that project quite a bit
<alectaylor>	*were
<heydabop>	alectaylor: your code won't even *compile*
<mohae>	linter doesn't matter if you don't know the language
<alectaylor>	yeah, i know that, which is why i was posting here asking about it
<heydabop>	alectaylor: what i'm saying is don't try to shortcut. do the go tour and read effective go
<mohae>	alectaylor: what exactly is your goal?
<heydabop>	much better than just diving into coding
<heydabop>	you're going to find out that go is not c++
<hyphenated>	you seem to be learning via trying everything then determining which mistakes you make. that's likely to teach you how to make bad things compile and run, rather than how to write good things
<alectaylor>	is there a good book instead? - like maybe a textbook?
<heydabop>	^
<heydabop>	alectaylor: do the go tour
<heydabop>	alectaylor: seriously
<mohae>	but, it does seem to be a common methedology
<mohae>	alectaylor: no, you have been directed multiple times to the good resources
<heydabop>	alectaylor:  https://tour.golang.org/welcome/1
<_cb>	and all the posers come out of the wood work
<heydabop>	alectaylor: and then, refer to the effective go page, and the reference
<hyphenated>	mohae: common, with this outcome.. http://xkcd.com/1513/
<heydabop>	alectaylor: the go tour will start you off much better than any book
<mohae>	the scary thing to think about is that this methedology gets applied to dynamic languages that won't complain about being abused
<alectaylor>	this looks shiny: http://miek.nl/downloads/2015/go.pdf
<mohae>	ooh no errors, it must be working!
<heydabop>	alectaylor: holy shit man
<heydabop>	alectaylor: do the go tour, please, it is the best way to get started with go
<mohae>	let me ignore advice and go pick crap from a google search
<mohae>	hyphenated: heh, i like that one
<heydabop>	mohae: seriously. "hey anyone have any advice? oh you do, great, because i have my own advice and it's better"
<mohae>	heydabop: even better, i don't have time for the tour so let me waste the rest of the day/week trying random things from the web
<heydabop>	a 112 page pdf *must* be faster than a interactive tutorial!
<mohae>	right, what would the go team know about go anyways, random from internet must be better.
<_cb>	alectaylor ignore the posers
<mohae>	blind leading the naked there
<heydabop>	23:55 < _cb> np am a go newbie
<heydabop>	alright then
<heydabop>	mohae: hahahaha, i like that
<_cb>	heydabop, moahe a newbie not a poser
<hyphenated>	i just remind myself that sturgeon's law applies to people too, and that it's not even worth a facepalm moment
<heydabop>	_cb: your last 3 statements have had the word "poser", well done
<_cb>	posers don't answer questions. they get on high horses and give 'advise'
<heydabop>	_cb: i answered literally every question he asked
<heydabop>	and then directed him to help, so he could answer more questions later
<_cb>	google this, google that, do the tour, read the docs. jeez.
<heydabop>	_cb: i never told him to google anything
<mohae>	_cb doesn't like me because i told him his ideas and desire for "securing" weak passwords were stupid and dangerous
<_cb>	you told him to do the tour. oh wow takes a genious to recommend that
<heydabop>	_cb: i also solved his compilation errors, and told him why they wouldnt work
<heydabop>	_cb: then, to prevent him from running into the same issue, i guided him to ways to teach himself
<heydabop>	_cb: becasue a programmer who cant teach himself and cant answer many of his own questions is fucking worthless
<heydabop>	_cb: you can either direct someone to a method to teach themselves a language properly, or sit here for hours, solve their questions, and get them to a state where they can do nothing but write code that compiles and runs by a miracle
<mohae>	autodidasm is a good thing
<heydabop>	_cb: meanwhile they have no idea what they're actually doing
<heydabop>	mohae++
<_cb>	heydabop you are a poser. sorry
<heydabop>	_cb: ahahaha, i really dont think you know what that means
<heydabop>	i guess i should go tell my boss im a poser and need to be fired
<mohae>	heydabop: you'll get a raise out of it if you do it right
<the_last>	guys, is this valid? data [][]string[]map[string][][]fee
<heydabop>	mohae: maybe if i pose just right ;)
<mohae>	um, that's called vogueing :)
<_cb>	ok posers can you answer the_last question?
<_cb>	and by posers i mean mohae and heydabop
<hyphenated>	the_last: no, but even if it were, it'd be a sign of insanity
<the_last>	hahaha
<mohae>	indeed, that is insanity
<mohae>	what are you trying to accomplish?
<the_last>	the most convulated thing imaginable
<the_last>	convoluted too
<mohae>	that's not much of an answer
<hyphenated>	the_last: with a specific purpose or goal?
<the_last>	nah not really, my friend is doing data []map[string][][]fee and it hurt my face
<hyphenated>	if you take out the first 'string', it's valid
<mohae>	well, that's a slice of a map[string][][]fee where fee is a d2 array
<mohae>	that seems a bit more sane the_last ;)
<the_last>	yeah, not as bad
<mohae>	note, i didn't say sane
<the_last>	i just want heads to explode, that's all
<heydabop>	it kinda hurt my eyes
<mohae>	the_last: well, the 2d string slice is what made yours not work
<mohae>	heydabop: not bad for a poser, huh? ;)
<mohae>	heydabop: btw, i realize you weren't calling me that, it's just more fun to joke with you about that instead
<_cb>	the_last data [][]string[]map[string][][]fee is not legit but type data [][]string; type x []map[string][][]data is
<the_last>	_cb that'd be equivalent to: type x []map[string][][][][]string yeah?
<mohae>	rofl
<mohae>	or at least i hope that was a joke the_last
<_cb>	the_last you don't have fee defined and thus can't solve the original question.
<the_last>	mohae: no joke, i just suck :d
<the_last>	< is learning go
<heydabop>	mohae: oh i know :p
<_cb>	moahe it is a joke. want to guess on who?
<heydabop>	mohae: i was about to ask you to stop being a poser
<heydabop>	mohae: how dare you answer a question
<mohae>	the_last: ok, since it isn't, what are you trying to accomplish here, since you didn't state when asked prior.
<mohae>	the_last: but the two are not equivelant
<_cb>	mohae the_last is experimenting with the language. trying to understand what it does. so am i
<the_last>	what _cb said
<mohae>	the_last: i was just trying to understand why you wanted a 4d slice
<the_last>	because the fourth dimension is awesome
<mohae>	the_last: no arguments
<_cb>	like :)
<hyphenated>	it gets old quickly
<heydabop>	hyphenated++
<mohae>	it's relative
<_cb>	what gets old?
<heydabop>	*whoooosh*
<mohae>	whoosh
<the_last>	dinosaurs are pretty old
<freman>	if i want to accept a string or an object i have to set the param to interface and switch later right?
<mohae>	yes, then assert accordingly
<_cb>	was i wrong about mohae?
<_cb>	mohae who are you and what did you do with the poser?
<heydabop>	who wouldve guessed that the new guy to the channel and language would be wrong about someone else in the channel
<_cb>	i am pretty sure i am right about heydabop
<freman>	is it possible to implement the 'ok' feature? ie: foo, ok := amap["string"] && foo := amap["string"] (ie: make the second response value optional?)
<heydabop>	freman: you could probably take the err approach
<heydabop>	freman: which would basically be doing that
<freman>	if i do that it complains about calling a multi-return func when i don't list all the responses
<heydabop>	freman: however iirc, you'd have to do foo, _ := to explicitely ignore the second return value
<freman>	yeh zacery
<mohae>	i wouldn't combine them
<mohae>	makes it less readable
<freman>	no, i was trying to set up a "get" function that took an interface, queried the set by object.id or id (passed as string)
<heydabop>	freman: it would probably be better to just have two functions, one to take a string and one to take an int
<mohae>	since that get function is getting an interface, check the interface's type and assert from there, if this is a continuation of your priior question
<heydabop>	whoever is using it should likely know whether they have a string or an int anyway
<mohae>	right, heydabop's suggestion is better
<heydabop>	freman: if im understand your goal correctly
<mohae>	like how strconv doesn't have an interfacetoa function, but instead has type specific ones
<mohae>	err missed a , there
<_cb>	freman it should be foo, ok := x, y. am a go newbie and may be wrong about this but don't think in this context the second return can be optional because ok has to resolve to somethign
<context>	it can be ok (or anything really) or _ if you 'dont care' about it
<mohae>	i prefer copacetic myself
<context>	hahahha
<freman>	http://play.golang.org/p/4_znjrin8e
<_cb>	i think if you have x,y := a you will get an assignment count mismatch: 2 = 1 even if y is _
<context>	my first guess is panic() doesn't take printf style params
<freman>	yeh probably - i've clearly not executed it :d
<heydabop>	freman: i still think you should have to get functions
<freman>	i'm just trying to convert my scratch pad of "hey, i wrote this and it works" to something nicer to work with
<context>	then you need to fist-face
<freman>	haydaboop this is actually 3 get functions and 3 has functions
<heydabop>	freman: one takes a imagetreeitem, and one takes a string. make the user convert a []byte to a string. and you have a map for the other conversion
<heydabop>	freman: also, you should really learn more about the language instead of just writing something without really understand how it works
<heydabop>	are you coming from c/c++?
<context>	freman: most people put default at the bottom cause its a "catch all"
<freman>	i'm coming from all the languages, mostly perl. i've been putting default at the top ever since reading effective go :p
<context>	also..
<context>	freman: if you want help, you dont paste code without running it
<context>	and especially dont paste code like:
<context>	panic("i don't know what to do with type %t", t)then
<heydabop>	just because go looks like other languages, doesn't mean it works like other languages
<freman>	i ran it through "format" - you don't want to see the hacky mess i was originally working with
<heydabop>	active poser mode!
<heydabop>	freman: have you looked at the go tour?
<freman>	yes
<heydabop>	freman: it'll probably start out more basic than youll want
<heydabop>	finished it?
<freman>	yes
<context>	)then .... wtf is that ?
<_cb>	poser alert not that much work to tke the %t out and add a main
<context>	what other languages do you do that in?
<heydabop>	_cb: the code is much farther from working than that....
<_cb>	http://play.golang.org/p/jijuhkyt-v that runs without erros
<context>	freman: http://www.amazon.com/introduction-programming-go-caleb-doxsey/dp/1478355824/ref=sr_1_4?ie=utf8&qid=1430373501&sr=8-4&keywords=golang
<freman>	i don't kwow what you mean ")then"
<heydabop>	_cb: well not shit, because nothing fucking runs
<context>	freman: http://www.amazon.com/go-programming-blueprints-mat-ryer/dp/1783988029/ref=sr_1_1?ie=utf8&qid=1430373501&sr=8-1&keywords=golang
<context>	read those.
<heydabop>	s/not/no/
<heydabop>	freman: wait, didnt you say you had 3 get functions?
<context>	and whatever you do, do not read 'mastering concurrency in go'
<heydabop>	context: yea, there's no "then" in his code...
<context>	oops :x i must have typed that in there before switching windows
<context>	also, perl doesnt relate to any other language. you're better off forgetting perl forever (<- bias cause i know more then just perl)
<context>	:p
<freman>	i know much more than perl. perl, java, python, php, delphi, javascript, enough c to give myself a bloody nose...
<mohae>	well perl code is like snowflakes and the language itself is a snowflake
<context>	but i do give perl props. it is infact better than one other language. but that language was originally written in perl so it was screwed from the start
<heydabop>	freman: i recommend this http://play.golang.org/p/dxkevaguqg
<mohae>	_cb: the compile error is obvious, but that's not the point of the discussion. getting something to compile w/o an error is not always meaningful
<heydabop>	mohae: what would you know, fucking poser
<mohae>	sorry i forgot
<context>	hahaha.
<heydabop>	freman: or, have a function to get a imagetreeitem by id, and then make getchild and haschild only take *imagetreeitem
<mohae>	the interface{} route along with a single function is a road to pain
<mohae>	and people using your package will thank you for having the type specific functions to call instead
<context>	i think the general consensus is "avoid interface{}"
<mohae>	well the tendency to lean towards interface{} as a solution for not having separate function betrays a strong dynamic background, imo
<context>	interface{} is like a regex. the fix everything, but very rarely are they the proper solution
<mohae>	and like regex, now you haven 2 problems
<context>	;)
<mohae>	if you're lucky
<context>	but if you want dynamic then dont use go
<freman>	https://github.com/freman/wharfie - i have done other go things, i'm just trying to work out the limit of what's tolerated in the way of 'smart' :d
<mohae>	kiss prinicple is best
<mohae>	worst case: only as complicated as necessary
<heydabop>	freman: don't convert your users types for them :p
<freman>	how about, imagetreeitem.string() then just make one function that accepts string
<heydabop>	freman: that would also work
<mohae>	if that fits your needs
<mohae>	unnecessary flexibility is the bane of good api design
<freman>	that'd do for the most part - when printing i only care about the id, and when looking up i'm most likely to be using string or coming from []byte (in fact almost always []byte)
<context>	freman: then make the api firm... "always []byte"
<heydabop>	then you could instead have the function take []byte if that works better
<mohae>	if it's going to be from []byte, then do that
<mohae>	less allocations
<heydabop>	mohae: "api". geez man the hardcore poser is showing
<mohae>	i know, i can't help it. i was born that way
<mohae>	but my momma still loves me, or at least that's what she tells me
<heydabop>	#fabulous
<heydabop>	lol
<context>	as for wharfie, should that 'layer' be a volume?
<mohae>	docker, should have guessed
<mohae>	but layer is a container term
<context>	run echo | tail | cat ?
<context>	thats convoluted as all hell
<mohae>	i liked docker's original 42 limit'
<context>	err sorry
<context>	run echo | nc | tail | bash
<context>	even more convoluted
<context>	curl | bash
<freman>	yeh convoluted because ubuntu base image doesn't have wget or curl
<context>	also, how does that work? you echo "get .." | .......
<mohae>	add it to the base image
<mohae>	or is that out of your control?
<heydabop>	mohae: lol, i think that's beyond his control
<mohae>	heydabop: oic
<context>	oh nm....
<context>	so make a layer with curl ...
<freman>	that's just the example for others using it "from ubuntu" internally we have a stack
<mohae>	i was just thinking createa layer with the stuff needed
<mohae>	ya
<heydabop>	also why the hell does it not have wget or curl...
<context>	s stands for simple. not stupid
<mohae>	because ubuntu
<heydabop>	touche
<mohae>	they probably are in the process of writing their own replacement for those
<freman>	all our env is built from stack:latest which has everything most apps need
<freman>	just some of our apps are huge which
<context>	they probably think "they" are not using docker to create an entire vm
<mohae>	freman: can't you add your own layer(s)
<freman>	stack is our layer on ubuntu
<context>	huge will be huge...
<mohae>	freman: do you use any automation tools?
<mohae>	e.g. chef, puppet, salt, etc.
<freman>	nope, just what we wrote :d
<context>	docker, maybe fig?
<mohae>	well, i'd still use a automation tool to config docker to what was needed for my app deployments
<freman>	most of it is managed by our deployer, and deployments are usually "git clone, set $x $y $x, docker build, docker push"
<mohae>	but i'm kind of crazy that way, i did write a tool to automate creation of packer templates too
<context>	i wouldn't. chef/puppet/etc is bring an elephant to a chicken fight
<freman>	we have a fairly automated build already, stack takes 40 minutes to build, but usually only one command to do so
<context>	docker is automation.. but not in the same way as chef/puppet
<mohae>	not really, even with docker, something to manage the configuration of the various layers is useful.
<freman>	anyway, i have to get, thanks for the input - i will aim for simpler :d
<context>	there was a fork in the road.. docker is one way, chef/puppet/etc is the other
<mohae>	context: right, and it's common to use other tools in conjunction with docker because complexity is complex
<mohae>	context: not really, you just rely less on those tools
<mohae>	unless your docker images will never change
<context>	then you just have two tools to manage
<freman>	we use docker on coreos with 90+ nodes btw, so docker is kinda a requirement (i know about rkt it didn't exist - lots of things didn't exist), because we rarely touch the stack layer we didn't see the point to much more than shell scripts for automating it's construction
<mohae>	how do you like coreos?
<mohae>	freman: ya rkt is more recent, the intent is good but who knows what will happen there
<context>	ive played with but id love knowledge of use in a real prod environment
<freman>	we've had no real issues with it, early teething problems and a lot of custom hackery later...
<freman>	but does what it says on the box
<context>	its easy to say "yeah use etcd for discovery" but is it 'that easy; ?
<freman>	yes and no
<mohae>	well, is discovery really that easy?
<freman>	discovery was always easy - once we started using confd to do it
<freman>	and beacon to announce (beacon listens to docker on every machine and tells etcd what's started up)
<context>	ahh ok
<freman>	the way it is in the documentation? that's a lot of work :d
<freman>	i'll be back in an hour if you'd like more info :d
<context>	i have a fig (docker-compose) with nginx-proxy that works with docker events but havent had a chance to see how it actually works
<the_last>	gonuts is doughnuts.
<context>	cause "gonuts is krispy kreme" doesnt roll off the tongue
<__john_doe__>	hey guys, one general question, regarding go and restfull apis. providing multilingual feedback is unnecessary complexity or something that should be implemented?
<hyphenated>	__john_doe__: both
<__john_doe__>	hyphenated: lol
<hyphenated>	it'd be "nice" if you could, but relatively tricky
<hyphenated>	you wouldn't want the paths to be language-dependent or the fields in the request/response, unless you're really ambitious. data and error messages could be, but deciding the language would be a trick, as well as deciding a suitable way to map your messages to a translated result
<distorce>	would someone mind sanity checking this map setting method ? http://play.golang.org/p/4v7fneyzsy
<kettlecookeddude>	if i close a buffered channel, i can still read from it, right? assuming it has data.
<dmac>	distorce: what are you wondering about? the map zero value is nil, so it panics when you assign to it.
<distorce>	dmac: how should i be doing it ?
<distorce>	if thats not the correct way
<dmac>	distorce: you'll need to initialize the map first with make()
<dmac>	https://play.golang.org/p/udtaovnywn
<distorce>	dmac: thanks ! let me take a look over that and try and understand better
<dmac>	distorce: alternatively, https://play.golang.org/p/mcpi1q3g5a
<distorce>	dmac: could you put make in the struct ?
<distorce>	or thats just for saying there will be a map here
<distorce>	will be a map in this struct *
<dmac>	you mean in the struct definition?
<distorce>	dmac: yes
<dmac>	no, you can't put make there
<dmac>	if you have a struct that requires some initialization, typically you'd make a newtags() function to create and return an initialized tags
<furao>	http://play.golang.org/p/r0xrmzpru2  why i can’t use reflect like that to get the type name of the child struct?
<distorce>	dmac: thanks for the info
<distorce>	dmac: such a great help
<dmac>	you're welcome
<eatingthenight>	could you run this same command using pure go? mysql -h host -u user_name -ppassword database < file.sql > output.log
<dmac>	furao: embedding doesn't work like that, really
<dmac>	parent doesn't know that it is embedded in child
<furao>	ah :(
<furao>	spoiled by python
<dmac>	furao: https://stackoverflow.com/questions/22153269/how-to-reflect-fields-of-containing-struct-from-a-method-of-the-embedded-struct
<dmac>	furao: https://play.golang.org/p/cvzym0xb8s
<dmac>	that's as close as you can get, but it's abnormal in go and there's going to be a better way to solve the problem
<dmac>	eatingthenight: you would use https://golang.org/pkg/os/exec/#cmd and set its stdin/stdout
<eatingthenight>	dmac: thanks! i t hough i would have to resort to an the os package
<__john_doe__>	hyphenated: yes i know that... guess ill have to assume that all developers can read english lol
<maze>	good day, can somebody give me some pointers how to efficiently base36 encode a big.int?
<bnagy>	maze: use bi.bytes() and encode that
<bnagy>	i've never heard of base36 though, but maybe i was just a sheltered child
<nalum>	hello all, i'm wondering how to handle a error loading a config file. the app can get it's config from a file and/or environment variables, the environment variable override the config file values. if the config file loads but then fails to unmarshal should i return an error or allow the environment variables to be read?
<bnagy>	i'd warn at most, if env trumps file and env has valid config then yay
<maze>	bnagy, nothing fancy, just 0-9+a-z
<nalum>	bnagy: so just an additional log entry, thanks
<bnagy>	nalum: that's just, like, my opinion though
<bnagy>	personally i wouldn't have things that ambiguous
<bnagy>	like -config filename would be use a config file or die, otherwise just use env
<bnagy>	maze: k, well assuming you have an encoder, just get the bytes() or your big.int and you're all good
<nalum>	bnagy: okay, i wasn't too sure on how to approach this aspect of it anyway. i've seen other allow for both and having the environment override the file. but maybe having it defined as one or the other is better. will have to think on it some more
<techgrin>	in this example, why do they do `p=new(int)`? https://gist.github.com/insanity54/c99921bebde702557b8f
<maze>	bnagy, gotcha, works well, thanks!
<__john_doe__>	can anyone recommend good and efficient library for converting html to pdf?
<hollyrain>	how to cast  []interface{} to []string ?
<pmezard>	loop and append
<unga>	gohpers, i seem not be able to understand go docs. in which order are select case exectuted ?
<unga>	see f.ex https://gist.github.com/giulioungaretti/3592272d8f8960aeb4d7
<pmezard>	unga: this doc
<pmezard>	duh
<pmezard>	https://golang.org/ref/spec#select_statements
<pmezard>	?
<unga>	yea,
<unga>	 point number 2
<unga>	means that if they both are good to go, one of the many possible cases will be selected randomly ?
<pmezard>	yes
<unga>	pmezard: so in this example: https://blog.golang.org/pipelines/bounded.go
<unga>	the function digester may return instead of sending the result if both channels are opened?
<pmezard>	if done is closed, yes
<pmezard>	otherwise, you cannot receive from "done" so it is not executed
<unga>	pmezard: yes, but what if it's open?
<unga>	pmezard: right, right. now i get it
<unga>	and in that case it will block, untill it can recive (i.e. never) or when done is cloesed. right pmezard ?
<pmezard>	right, because you can always receive from a closed channel
<unga>	pmezard: awsome!
<r00trunner>	should we prefer if x = n; x < lim { over x = n if x < lim { ?
<rogpeppe>	r00trunner: i'd prefer: if x := n; x < lim {
<rogpeppe>	r00trunner: when possible
<rogpeppe>	r00trunner: but if you want the side effect, i'd do x = n; if x < lim
<r00trunner>	rogpeppe: thx
<ebonics>	can someone tell me why when i call connect and close from another package it seems that close gets called first? it's something to do with goroutines i'm sure but i don't understand where they came from https://dpaste.de/xkom
<ebonics>	nvm i fixed it my design was horrible
<ebonics>	<-- noob
<slacktd>	hi, if you where to choose between doing rpc calls with the standard library net/rpc or using rabbitmq with the reply-back pattern (https://www.rabbitmq.com/tutorials/tutorial-six-python.html). which one would you chose and why? for requests that don't need a response (such as sending an email) i already use rabbitmq but for requests that need i response i am not quite sure to use net/rpc or rabbit.
<ebonics>	slacktd, just stick with it? you already know it plus why add more dependencies
<slacktd>	ebonics: true that i already use rabbit and would not need net/rpc but am i missing something? in my thoughts it feels like doing a net/rpc call is faster but i don't know how it works when there gets alot of requets, if it buffers them somehow, how to scale it etc. with rabbit i can just add more workers to the que and know i will answer back faster, don't know how i would do that with net/rpc. probably
<slacktd>	need to understand what it happening in the background when doing an rpc call
<logie>	i like all of them
<tichodroma>	is http://www.golang-book.com/ still current?
<jayunit1000>	hi go.  i want to stream cmd.output stream to standard out in a go program as characters are being written.  any thoughts on the simplest way to do this?
<skelterjohn>	jayunit1000: cmd.stdout = os.stdout
<jayunit1000>	thanks skelterjohn !
<ebonics>	process exited with: 1. reason was:  ()
<skelterjohn>	sure thing!
<ebonics>	ok.png
<wunki>	i'm dealing with a json which a part of could be one of the structs i have defined. i know which struct it should be by looking at a different key (type). would there be a way to automate this, without a large if/else statement?
<wunki>	i was thinking of a map[string]type but you can't point to a type
<hfaafb>	wunki: i've had to deal with this problem before, i was recommended to defer decoding with *json.rawmessage and switch on the deciding key
<hfaafb>	i believe you could technically use reflect to point strings to types
<hfaafb>	you could use map[string]func to handle the *json.rawmessage
<hfaafb>	so little functions that handle the message depending on the deciding field
<wunki>	hfaafb: thanks! looking into it
<wunki>	hfaafb: you meant this right: http://golang.org/pkg/encoding/json/#rawmessage
<hfaafb>	yep
<bijan_>	is it possible to post a map to a handler like in php? i mean like for example <input type="hidden" name="product-qty[1]" value="2">
<bijan_>	i have a variable amount of hidden fields that shall contain the product id and the quantity
<bijan_>	what's the recommended way to do this?
<hfaafb>	bijan_: is it field[n] or field[]? golang doesn't automatically consolidate fieldname[] like php does
<swiper>	hi
<bijan_>	hfaafb: field[n] where n is the product id
<hfaafb>	they should show up as form fields, but you'll have to iterate them manually
<hfaafb>	you'll probably use parseform
<bijan_>	hfaafb: okay so i have to iterate over all form values because they are not gathered in a map?
<hfaafb>	http://golang.org/pkg/net/http/#request.parseform
<hfaafb>	they're not gathered in a map automatically by net/http, no
<bijan_>	hfaafb: okay i thought that i might be missing something
<hfaafb>	https://groups.google.com/forum/#!topic/golang-nuts/ncwrkpyc6l8
<swiper>	hi is this go ?
<moter8>	swiper, yup!
<bijan_>	hfaafb: yeah yeah i know how to iterate over them. i just thought that there might be a trick to gather variables in a sub map
<bijan_>	:)
<moter8>	swiper, welcome to #go-nuts :)
<swiper>	go language or go game ?
<bijan_>	hfaafb: thx btw
<moter8>	go language!
<swiper>	k
<swiper>	hi i was considering which language to learn for data analysis is it go or python or r just checking out on this
<cylon512>	in case of statistics maybe r nice option, in case of large set of data, due to high performance go can be a really good option @ swiper
<cylon512>	python really nice language as well, however it's slower comparing to go , however if you do use python compiler, maybe it' acceptable as well
<deldotbat>	did you try rewriting it in php7?
<marcop>	python is poopy
<swiper>	lot of other says python since you can learn alot faster than  r <same effort>
<cylon512>	actually there is not much effort to learn go as well, it's language with low entry requirement
<nucular_>	]
<skelterjohn>	cylon512: i dunno, for some reason it takes people a bit to get the hang of how interfaces work
<skelterjohn>	cylon512: lots of people think they can treat them like reference types
<ebonics>	skelterjohn, can you tell me how you would call this method for example: https://godoc.org/golang.org/x/crypto/ssh#config.setdefaults
<ebonics>	i know you don't have to, but as an example
<skelterjohn>	ebonics: var c ssh.config; c.setdefaults()
<ebonics>	that didn't work
<skelterjohn>	ebonics: but i feel like you have a "true" question buried under there somewhere
<skelterjohn>	ebonics: show me code that doesn't compile
<skelterjohn>	or if that's not what you mean by "didn't work", tell me what you expected to happen that didn't happen
<ebonics>	1 sec sorry
<ebonics>	i think my ide is trolling me
<ebonics>	nevermind skelterjohn i'm an idiot.
<r00trunner>	what is the difference between uintptr and *uint?
<skelterjohn>	ebonics: it happens
<ebonics>	i had it right but for some reason my ide was highlighting it
<ebonics>	i thought there was some special property about that method i didnt understand
<skelterjohn>	r00trunner: uintptr doesn't mean a ptr to a uint
<skelterjohn>	r00trunner: it means using a uint to hold a pointer
<hfaafb>	my genitals are bleeding rm
<hfaafb>	oops
<hfaafb>	wrong channel
<inflatablewoman>	anyone know of a good golang lib for ceph?  all the ones i have found wrap the c lib.
<skelterjohn>	hfaafb: n1
<k0nserv->	i have a problem, i am trying to do value.([]byte), but i get an error complaining about `use of package bytes without selector`
<k0nserv->	anyone have any ideas on how to get around that?
<mohae>	don't type bytes
<skelterjohn>	k0nserv-: you sure you didn't write value.([]bytes)?
<k0nserv->	nope it's []byte
<mohae>	look at the line number
<skelterjohn>	k0nserv-: pastebin the file, or the piece of the file with the problem
<hfaafb>	you have bytes somewhere
<k0nserv->	actually it might have been that
<skelterjohn>	:)
<k0nserv->	thanks
<cylon512>	skelterjohn: yes, maybe, however if person read the documentation and understand what is written there , many confusion waved , of course different language background can lead to "confusing" approach
<skelterjohn>	cylon512: i basically never expect anyone to ever read any documentation
<skelterjohn>	but especially with interfaces, people think of the other interfaces they know: those from java
<skelterjohn>	which (like everything in java) are references
<skelterjohn>	i've even had more experienced gophers argue about interfaces and value semantics vs reference semantics (they have value semantics)
<r00trunner>	skelterjohn: but *int means a pointer to an int right?
<skelterjohn>	r00trunner: certainly
<cylon512>	however, it's explicitly stated in all books, for those who do learn go to wave "other language" approach, explicitly object oriented, like java for example
<skelterjohn>	*uint is a pointer to a uint. uintptr is a uint being used as a pointer.
<r00trunner>	skelterjohn: why do i even need a uintptr then?
<skelterjohn>	r00trunner: if you are doing fancy things with pointers, like arithmetic
<skelterjohn>	r00trunner: for pure go code you will never need uintptr
<r00trunner>	skelterjohn: aaah ok pointer arithmetic only works with uintptr, i see
<skelterjohn>	but if you ever interface with c, it can be useful
<r00trunner>	meaks sense
<r00trunner>	skelterjohn: cool, i like it
<skelterjohn>	:)
<r00trunner>	convention question: do you prefer x, y := 1, 2 over x := 1 \n y := 2?
<skelterjohn>	r00trunner: it really depends on what's going on
<skelterjohn>	r00trunner: but in general for syntactic things like that, if 'go fmt' doesn't fix it for you, it's fine
<moter8>	i prefer two lines, but that is just my opinion
<r00trunner>	skelterjohn: what's your personal taste?
<skelterjohn>	as i said, it depends on what else is going on
<r00trunner>	skelterjohn: ok, i would logically group declarations
<skelterjohn>	for instance, if i have two indices into the same array, i and j, and i want them to start at the beginning and end, i wouldn't hesitate to do "i, j := 0, len(arr)"
<skelterjohn>	but there i and j are very closely tied together, and i never think of one without the other
<skelterjohn>	if instead they're indices into two different arrays, i'd probably do each on its own line, to follow how it's structured in my head
<r00trunner>	skelterjohn: good way
<momomomomo>	just want to announce that yesterday we had our first go + rust joint meetup in mn; and it was really excellent. one of our presenters is working on go/rust interop, which is an interesting side project to tackle. i hadn’t looked at the runtime since ~1.2/1.3, but it’s inspired me to dig in and see what changes of vyukov’s have gotten in...
<momomomomo>	if you’re in the mn area next month, we’re going to have another joint go/rust meetup
<skelterjohn>	i can't remember
<skelterjohn>	which is mn?
<skelterjohn>	maine, minnesota, montana...
<momomomomo>	minnesota
<freeze>	where in mn?
<momomomomo>	minneapolis; downtown near hennepin & the light rail
<freeze>	nice. like 10 blocks from me lol
<momomomomo>	http://www.meetup.com/golangmn/
<skelterjohn>	freeze: well then you should definitely go!
<freeze>	yup
<skelterjohn>	i wonder if there will be one in nyc soon
<skelterjohn>	now that i do go for work i would probably go
<skelterjohn>	(had been python for the past two years)
<momomomomo>	skelterjohn: start one up?
<skelterjohn>	there is a meetup group, i send its organizers an email
<skelterjohn>	unfortunately my employer is a bit hostile to having that sort of event in the building
<skelterjohn>	as in, takes a lot of energy to organize
<momomomomo>	skelterjohn: i don’t host in my building
<momomomomo>	a really dope gopher volunteered to host and sponsor, so we lucked out
<skelterjohn>	momomomomo: i certainly don't want to go through the effort of renting space :) the best meetups are held by smaller companies
<momomomomo>	yeah, we lucked out quite a bit; but you’d be surprised what sending an email like: http://www.meetup.com/golangmn/messages/boards/thread/46172282 can do to get volunteers/sponsors
<momomomomo>	skelterjohn: ^
<skelterjohn>	well, this is the one i sent a few minutes ago https://secure.meetup.com/messages/?convo_id=175178374426161152
<skelterjohn>	hmm, i wonder if you can see that
<skelterjohn>	probably not
<momomomomo>	skelterjohn: nope
<skelterjohn>	entire text is "anything coming up soon? i'd be happy to talk for 15-30."
<skelterjohn>	so, maybe that will work
<skelterjohn>	can always get chimeracoder to talk too, he'll talk about anything at any time for as long as you let him
<chimeracoder>	:x
<chimeracoder>	lmao
<momomomomo>	skelterjohn: bummer, if you get a response, offer to organize etc. or, offer to fork the group temporarily (which is usually a bad/sad event for most projects)
<rindvieh>	spleak: you might want to take a look at https://github.com/constabulary/gb
<rindvieh>	http://go-talks.appspot.com/github.com/davecheney/presentations/reproducible-builds.slide#1
<skelterjohn>	rindvieh: no one of that name in here
<tv`>	davecheney still needs to explain why exactly he wanted to reimplement the go tool
<rindvieh>	just saw that
<skelterjohn>	tv`: because he got spoiled with the original gb, and wanted some of its goodness back
<skelterjohn>	i maintain that the go tool was a step down from the original gb ;)
<rindvieh>	skelterjohn: proves my inability to read the polari log
<tv`>	skelterjohn: just saying, people are thinking constabulary/gb is vendoring while it's a lot more
<skelterjohn>	rindvieh: classic hijacking, but you might also consider checking out github.com/skelterjohn/wgo
<skelterjohn>	rindvieh: similar philosophy to constabulary/gb, different approach
<rindvieh>	skelterjohn: thy
<tv`>	constabulary/gb has just huge amounts of code that make me wary
<skelterjohn>	frankly i think constabulary/gb is too ambitious
<chimeracoder>	skelterjohn: how was it a step down?
<r00trunner>	how can i use uintptr?
<skelterjohn>	chimeracoder: it lots workspaces and forced you to manage gopath yourself
<jmoiron>	with great care
<skelterjohn>	*it lost
<skelterjohn>	chimeracoder: i think the original gb was a bit before your time :s
<jmoiron>	maybe you can confirm/deny since you have more visibility into this
<jmoiron>	but my feeling from the go tool is that it was designed very much for a pre-existing workflow
<jmoiron>	and not for a general one
<chimeracoder>	skelterjohn: yeah, that's why i asked, haha
<jmoiron>	basically, the one already in use at google
<skelterjohn>	chimeracoder: github.com/skelterjohn/go-gb
<jmoiron>	but i've no idea what that is, so it's just a guess
<chimeracoder>	oh, that's basd off the original, i see
<skelterjohn>	jmoiron: it's fairly compatible with the internal build workflow, yeah
<chimeracoder>	jmoiron: i think that's what rob pike explicitly said
<skelterjohn>	chimeracoder: my go-gb is the original, constabulary/gb is unrelated as far as code ancenstry
<jmoiron>	he probably did
<chimeracoder>	at one point - "we didn't think about vendoring, because this is how we do it at google, and the go tool works that way"
<skelterjohn>	chimeracoder: but davecheney was one of the most enthusiastic users of my gb :) so there are some traces in there
<jmoiron>	i've yet to run into significant problems with go dependency management that i feel have been addressed with other tools
<momomomomo>	i’m not familiar with most of the other options, but i’ve enjoyed using nut
<skelterjohn>	jmoiron: that's wgo's approach - address it with another tool
<skelterjohn>	i also wrote that too.l
<momomomomo>	and also wondering why it wasn’t mentioned in davecheny’s talk
<skelterjohn>	momomomomo: because as tv` hinted at, constabulary/gb is not actually focused on deps but on a workspace build system
<skelterjohn>	nut is a way to freeze deps by rehosting and rewriting import paths
<skelterjohn>	i don't like the "rewriting import paths" bit though
<jmoiron>	i still think people take on dependencies too lightly
<tv`>	rewriting code is just silly
<skelterjohn>	wgo doesn't make you do it
<chimeracoder>	jmoiron: to be honest, i feel the same way - at the time i care about dependency managmeent, i usually want to containerize my application anyway
<chimeracoder>	i also usually have to worry about dependency management for other parts of the app (e.g. javascript) long before i do for go, which makes containerizatio necessary
<jmoiron>	without some kind of formal verification that exported behavior hasn't changed, version numbers are just a guess
<jmoiron>	and a misleading one
<wessie>	i wish people just abandoned "go get" when they want the dependency management
<tv`>	jmoiron: ooh are we ranting about semver? it ignores bug fixes.
<skelterjohn>	i think 'go get' is ok to use when you want to bring something in for the first time
<skelterjohn>	then freeze it (with 'wgo save'!)
<jmoiron>	tv`: a lot of dep management systems seem to be based on it or at least its philosophy
<tv`>	jmoiron: a lot of the people writing those for go cargo culted bundler, npm, etc
<jmoiron>	anyway that's a bit of a distraction, workspace management is fine, but it seems pretty simple
<jmoiron>	tv`: they are cargo culting weird stuff
<jmoiron>	those things exist because you need to distribute libraries with the code everywhere you intend to run it
<chimeracoder>	tv`: i see no reason that version numbers can't be semantic, just like everything else - look at the web
<tv`>	jmoiron: the essence of cargo culting is doing it without real understanding ;)
<jmoiron>	of course :)
<jmoiron>	chimeracoder: without a guarantee though what does is mean
<jmoiron>	s/is/it/
<wessie>	i do wonder why dave abandoned `go build` and `go install` though, if you control the evocation of them their limitations are pretty moot
<chimeracoder>	jmoiron: i was just trolling :-s
<jmoiron>	ok sorry :)
<tv`>	wessie: the slides have a tiny mention of "getting -tags right"
<tv`>	wessie: but he needs to write out the reasons
<wessie>	what is wrong with -tags exactly? i don't believe i had any issues with it
<tv`>	wessie: my guess it, coordinating with -installsuffix
<tv`>	or just rebuilding when tags change, or something
<tv`>	keyword: guess
<tv`>	(fwiw, -tags netgo -installsuffix netgo makes things easier to manage)
<wessie>	seems a bit overkill to abandon everything and not just go get
<tv`>	wessie: totally unexpected from normally moderate seeming davecheney
<wessie>	gb also seems to use different flags for things go build also does, that's going to be confusing at some point
<jmoiron>	you make it sound like davecheney is his golden age super hero alter ego
<tv`>	jmoiron: underneath his shirt, there is a very colorful uniform with the "gb" logo?
<deldotbat>	anyone know a good free vps or secure cheap vps? non-us?
<tv`>	deldotbat: https://i.imgur.com/02pcb8t.jpg
<deldotbat>	but i consider u guys smart so i ask in the right place :)
<wessie>	you've retired the old one? a sad day
<deldotbat>	its like my one trick of 15 years of dev'ing :>
<deldotbat>	just ask programmers
<mousetrap>	what's wrong with aws's free tier?
<deldotbat>	eh id rather host out of us b/c buttcoin
<deldotbat>	good idea tho ty
<postitnote>	question: if i have several different routes that have duplicate code (for example, to get url params) what options do i have to reduce duplication?
<tv`>	functions
<hfaafb>	functions
<hfaafb>	oh
<hfaafb>	snappp
<tv`>	high five
<bhenderson>	does make(map[string]string, 100) create 100 empty strings?
<wessie>	it allocates 100 map buckets i presume
<bhenderson>	ok
<wessie>	or well, 100 spots
<deldotbat>	postitnote: go is functional, just make some helper functions
<tv`>	yeah most likely one bucket with 100 slots, at that point
<tv`>	bhenderson: "create ... empty string" is confusing words
<tv`>	bhenderson: that's like saying "create nil pointers"
<tv`>	all that exists is the place to store it, when it later gets a real value
<wessie>	so something like 200*stringheadersize
<postitnote>	deldotbat: so like a parseurlparams function? is that the same as middleware?
<deldotbat>	yep
<deldotbat>	good idea to make your own middleware fncs also
<deldotbat>	but no middleware is usually called automatically (after you tell it to once) in between the route handler and the http reader, ie setmiddleware(checklogin).setmiddleware(getprofile)
<tv`>	ruh roh
<tv`>	you mean there's a thing that records what you tell it about the middleware, and then calls functions
<tv`>	that doesn't make it any more automatic than anything else on a computer
<deldotbat>	bhenderson: no do it does not, fmt.println(make(map[int]string,100)) prints []... so its just a 100 slot (capacity) map,
<hfaafb>	what is the problem encountered when assigning vars to url params?
<deldotbat>	theres a thing
<bhenderson>	deldotbat: great, thanks
<postitnote>	deldotbat ok that's what i was just going to ask. i'm ok to do it without middleware then or do you recommend putting these helper funcs into middleware?
<tv`>	i'd call parseurlparams inside the handler just because then you can assign the parsed data into a variable nicely
<deldotbat>	bhenderson: totally up to you, i usually dont unless im sure its not gonna need any further data from my req handler
<postitnote>	tv` ok thank you. i'm not going to have the same number of params in each route. what would you return from the parseurlparams func?
<postitnote>	tv` i suppose the only option is a slice of strings
<msingle>	i'm new and thick headed, but am trying to pass a *bufio.writer in to a function that uses *io.writer -- what obvious way of handling this am i missing?
<deldotbat>	postitnote: im nuts so i return map[string]interface{}{...data...} :p
<wessie>	msingle: you're using a pointer to an interface, use io.writer
<deldotbat>	kind of like phps $_get
<postitnote>	deldotbat i'mnot sure if that's a joke or not
<deldotbat>	nope
<deldotbat>	haha
<postitnote>	ok, i'll play around with it
<wessie>	i probably would go with a scan like method for url parsing myself
<wessie>	i bet it exists already too
<msingle>	thanks!, wessie
<ebonics>	is there a more er.. clean way of doing this: https://dpaste.de/1tvi
<tv`>	ebonics: fmt.println(resp)
<ebonics>	tv`, ?
<tv`>	the rest is a (broken) rube goldberg machine
<tv`>	nothing in that example motivates any of the machinery
<ebonics>	i didn't post the full code
<ebonics>	i just want to know if that pattern can be reduced
<ebonics>	as i'm not too familiar with go's full range of language features
<deldotbat>	when someone defines a struct and then after the type they put `json:fieldname1` this is key-name for the js obj after marshalling and unmarshalling right?
<ebonics>	deldotbat, i think it's just meta data which can be used via reflection in any way you want
<sixy>	deldotbat: yes.  it's called a tag.
<sixy>	deldotbat: json uses it for field names, other packages use tags in other ways.
<deldotbat>	ok ty
<deldotbat>	has anyone done serializing / restoring of web app data and then had their data blow up or corrupt yet?
<wessie>	ebonics: the example can be reduced to what tv` said though, if you want actual suggestions actual code would be better to share
<deldotbat>	feeling like sql is too much pita atm
<dfinninger>	hey all, i'm having some issues parsing json. gist: https://gist.github.com/dfinninger/f24bfeb37d2635fb1cc9 <- this is the relevant code snippet
<mohae>	dfinninger: export your fields
<dfinninger>	i get the jsonstr that i am send to the server fine. and i get the htp response back intact as well
<dfinninger>	...
<dfinninger>	mohae: i'm still not getting a parsed response :/
<deldotbat>	ebonics: http://play.golang.org/p/xpqto_elyn
<deldotbat>	idk if it locks the cpu at 100% tho, i dont think it would but not sure
<dfinninger>	respnse body: {"response":"ok","id":"1430411126243186758"}
<dfinninger>	parsed body: &{response: jobid:}
<lungaro>	i am having a text/template issue and am not sure why -- i can't get a template to execute from another -- http://play.golang.org/p/0n53lxlnsl
<lungaro>	the output from t2 is never rendered and no error occurs afaics
<lungaro>	i bet i know why, they're not globally scoped
<dfinninger>	mohae: i got it. i had an ioutil.readall that was reading it before the json decoder. i guess that was closing the readcloser
<deldotbat>	lungaro: http://play.golang.org/p/_4kx-tnsmo
<deldotbat>	idk how to do it with two templates
<lungaro>	i figured it out
<cassyblanca>	linode and digitalocean are my go-to companies.
<cassyblanca>	i believe they have some non-u.s. server options, but i'm not entirely certain.
<cassyblanca>	and, uh, you're basically not going to find a "free" vps.
<cassyblanca>	depending on what you need, though, there are other options. for example, if you're just trying to host a simple blog website you might be able to get away with a free tier of heroku, or as mousetrap mentioned aws.
<deldotbat>	dont linode for business
<postitnote>	 here's my parseurlparams func http://play.golang.org/p/usjwlghpli   which i have a question about. so, i'm creating a map in this func that i otherwise wouldn't have to create if i didn't have the parseurlparams func. do you normally consider the convenience of a helper function worth the extra allocations that come with creating a new object (a map). in this case, the consequence is negligible, just wondering in general terms
<deldotbat>	two bitcoin exchanges went under b/c someone rooted a whole linode data center to get them
<deldotbat>	like a thousand boxes to get one ^_^
<eatingthenight>	why would anyone use linode for something as valuable as a bitcoin exchange
<deldotbat>	they never even said after the first one or the 2nd one "well were gonna increase security"
<deldotbat>	yea lol
<jhowl>	rofl
<postitnote>	for example, if i just parsed the urls manually in each route without the helper, i'd never have to create the map that i do in parseurlparams. is it silly to worry about that stuff? (this is my first go program)
<jhowl>	ive had good experiences with digitalocean, heard nothing but bad things about linode recently unfortunately
<jhowl>	that's definitely the worst i've heard
<deldotbat>	any idea where their datacenters r?
<jhowl>	if youre running a cryptocurrency exchange, cold storage or bust
<jhowl>	they have a few
<jhowl>	new york, sf, amsterdam...
<jhowl>	there's more but i cant remember off the top of my head
<_1_john2>	i can
<postitnote>	digital ocean has gotten a bad rap for interpreting its terms of service regarding censorship https://vpsexperience.wordpress.com/2014/01/05/digital-ocean-threatened-to-shut-down-my-blog-if-i-didnt-remove-or-edit-a-blog-post/
<jhowl>	postitnote wtf
<jhowl>	didn't see that one coming
<deldotbat>	postitnote: looks fine, maps take more memory than arrays, but id guess 90% of frameworks out there are gonna use more memory than your map, so i wouldnt worry about it
<deldotbat>	postitnote: yea i remember reading that last year
<postitnote>	deldotbat: ok, thanks, so you regarding my question, you'd take the convenience of the helper function (with the increase memory of the map) rather than parsing the url manually each time?
<deldotbat>	postitnote: yea definitely
<postitnote>	deldotbat: ok, thank you
<_1_john2>	;)
<deldotbat>	interface can be a pita tho
<postitnote>	deldotbat: i could probably do string string map, why did you suggest interface?
<deldotbat>	my proj was all custom typed
<deldotbat>	i did interface and json returns ;/
<postitnote>	ok, in my case, the only values that are being parsed are strings on a form submission
<deldotbat>	should be ez to work with then
<postitnote>	yup, just how i like it
<deldotbat>	until someone does a $('form').serialize().submit() and sends you ints over post ;d
<deldotbat>	 /msg #carderz send pizza now
<deldotbat>	oops
<jhowl>	haha
<deldotbat>	fk i want pizza
<jhowl>	me too
<deldotbat>	ya
<jhowl>	everyone wants pizza
<deldotbat>	did u know chinese put tuna fish on pizza
<deldotbat>	its like.. the most popular kind of pizza ...
<deldotbat>	>:/
<jhowl>	hahahaha what
<jhowl>	i'm trying to imagine what that would taste like and i'm failing
<deldotbat>	tastes like cat food man
<jhowl>	eh
<jhowl>	still better than having pineapple on a pizza
<heydabop>	tuna?!  http://abc7news.com/news/tuna-company-2-employees-charged-in-death-of-worker-in-oven/684362/
<ttke>	soylent tuna
<jhowl>	tuna thursdays in #go-nuts.
<deldotbat>	jesus lol
<jhowl>	maybe they sold it to the chinese pizza companies
<deldotbat>	god no thx
<deldotbat>	i had some of that b4
<quora>	also the standard of using
<quora>	foo_buildtag.go
<cassyblanca>	i wouldn't mind being able to separate things a little bit. this may be due to the fact that i only actually looked into go starting last night, but being able to separate out my c files from my go files (i was playing with writing bindings to some c libraries) would be nice.
<mohae>	cassyblanca: separate how?
<flazz>	i did scala for a few years with a ton (likely proven countable-infinite) ways to organaize a package
<cassyblanca>	being able to store them in a sub-folder would seem a decent alternative to me. but again, maybe you _can_ do this - i haven't actually tried (hadn't thought about it until now).
<jmoiron>	you can't really
<mohae>	well sub-folder would be its own package
<jmoiron>	i wish the go tool was able to cache objects it created with the c compiler
<cassyblanca>	like i said, i'd just like some alternative that would enable me to keep certain bits of c alongside the rest of the code in a module, but preferably separated a little. i'm not entirely certain what would be the cleanest way to operate
<jmoiron>	they are already separate files
<mohae>	cassyblanca: you mean like this? https://github.com/cloudflare/golz4
<mohae>	the src dir has the c files
<mohae>	and jmoiron makes a good point
<mohae>	as usual
<jmoiron>	not sure that #include "src/lz4.c" works for larger projects
<cassyblanca>	jmoiron: yes, but having a large number side-by-side is hardly ideal.
<mohae>	jmoiron: i recently re-read your crossing streams post and i felt bad that i have places where i used ioutil.readall
<mohae>	jmoiron: true, but it was just a small example
<jmoiron>	don't feel bad, i still do too :p
<jmoiron>	mohae: yeah, definitely.
<cassyblanca>	mind you, i imagine if you get to that point then there are better ways of structuring things in the first place.
<mohae>	jmoiron: my excuse is, but i know that will be a small file
<mohae>	lmao
<jmoiron>	the silly thing is there's rarely an excuse
<cassyblanca>	so it may be kind of moot
<jmoiron>	the io.reader interfaces are all easier to use
<mohae>	jmoiron: right, that's why i felt bad
<jmoiron>	my excuse btw is that i was using an api (database/sql) which needed a string anyway
<jmoiron>	cassyblanca: i wrapped a decently large library and it was a bit weird to have a bunch of headers in my package but i got over it
<jmoiron>	the sqlite package supplies the c code in one dir
<djx>	what's the difference between making a := *new(a); a = a{} and a := a{}?
<djx>	being a a struct
<cespare>	the first one is pretty crazy
<cespare>	djx: it's like the difference between    a := 12345 * 234 - 35145; a = 3     and     a := 3
<cronos>	heh
<djx>	lol
<djx>	then i have no idea what the hell i'm doing wrong
<smw_>	djx, a := 3 vs a = 3    the first is a declaration
<djx>	smw_: i know the different between := and = but didn't know the different between := and "new"
<bnagy>	new is a syntax appendix that is designed to trick new users
<bnagy>	*statement may not contain 100% facts
<st33med>	new is all new
<smw_>	djx, new return a pointer to a zero value of the type
<smw_>	djx, that is all
<st33med>	yep
<mohae>	djx: https://golang.org/doc/effective_go.html#allocation_new
<bnagy>	djx: imvho just use a:= &t{} and save your sanity
<st33med>	it'll make room for it on the heap, zero it, and that's it
<djx>	now, how about slices?
<mohae>	right, new is vestigial
<mohae>	djx: make
<djx>	a:=[]a{} makes sense?
<st33med>	djx, slices are basically a section of an array
<bnagy>	djx: sure
<st33med>	yep
<mohae>	st33med: it'd be more accurate to say they are a window on a backing array
<st33med>	they are a window to my soul
<djx>	even if afterwards i try to do a = append(a,stuff)
<bnagy>	well as long as stuff is one or more as then yeah
<bnagy>	as opposed to eg one slice of as
<bnagy>	these and many more fascinating topics covered in the tour of go ;)
<st33med>	i like append. it gives an arraylist functionality from java right in the main library.
<mohae>	djx: you're better off using var myslice []t or make
<djx>	i realized now that "make" allows 1, 2 or 3 parameters
<mohae>	djx: make([]t, len, cap)
<st33med>	djx, yes. second is size, 3 is capacity
<st33med>	what mohae said
<mohae>	but new([]t) will return a *[]t, which is why you are having problem with append
<st33med>	for chans, second is buffer, i don't know what the third would do
<djx>	mohae: http://golang.org/src/builtin/builtin.go?s=7091:7129#l172 only 2 parameters, not 3 :)
<mohae>	right, make parms depend on what you are making, i used slice because of djx's prior
<mohae>	djx: depends is the answer, for slice it's 3 and your prior question pertained to slice
<cronos>	djx: read package docs for that package ;)
<mohae>	djx: if you only use 2 parms for making a slice, you might be suprised at the results.
<djx>	cronos: mohae: nice...
<mohae>	bonus points for reading source though ;)
<bnagy>	personally i don't use make []t unless i'm using the params
<bnagy>	but i use it for maps
<jmoiron>	i use cap a lot
<jmoiron>	maybe too much
<mohae>	^
<mohae>	it's good for reducing allocs
<jmoiron>	sure is
<st33med>	expanding your slice
<st33med>	slice slice, baby
<pnsrc>	so, i've finished golang-book, it was good, except than the last chapter which overwhelmed me, what should i do next, i've been doing some projecteuler.net assignments
<mohae>	st33med: are you using go in one of your classes?
<mohae>	pnsrc: tour.golang.org, the specs, effective go
<bnagy>	pnsrc: what was in the last chapter?
<st33med>	mohae, yep, for a project that the professor said i could do. it's either his assignment or one of my own
<bnagy>	work on that :)
<st33med>	and i chose to do an irc chat bot
<st33med>	with concurrent plugins
<mohae>	st33med: cool
<pnsrc>	crypto, files, servers
<jmoiron>	pnsrc: what do you want to make?
<st33med>	you can do annnnnnnnnnnyyyyyyyttttttthiiiiiiiiiiiiiiinggggggggg
<pnsrc>	it didn't discuss them, it just had examples
<st33med>	what examples?
<jmoiron>	when i'm focused on an actual project, that's when i really learn
<st33med>	which ones did you like that is
<adiabatic>	st33med: "the only limit is yourself"
<bnagy>	well don't write a pdf parser, that's my advice
<bnagy>	so anything but that
<st33med>	adiabatic, "the world is your oyster"
<st33med>	:d
<pnsrc>	jmoiron,  i want to learn go, i had some c++ background, but i wanted to relearn programming
<jmoiron>	pnsrc: you'll learn go by building things in it
<cespare>	i need an io.writer that only remembers the last n bytes (using a fixed size buffer). does such a thing already exist?
<st33med>	pnsrc, programming is largely the same across all languages for the most part.
<st33med>	just with different whistles and bells across every one
<st33med>	different syntax
<pnsrc>	st33med, i know, the problem with my c++ background was that, i learned a language, not the concept
<st33med>	the major difference is imperative v functional only.
<bnagy>	i really don't agree with that :)
<st33med>	bnagy, fite me irl.
<mohae>	communication is the same across languages, it's just the alphabet, grammer, syntax, and idioms that change
<st33med>	yep
<mohae>	oh and words
<st33med>	and speed
<flazz>	panics are always caught and reported by the runtime right?
<bnagy>	flazz: if by reported you mean 'it crashes' then yeah
<flazz>	yeah, but it also prints the stack traces of all goroutines too right?
<bnagy>	yep
<mohae>	but don't rely on panics
<st33med>	stack traces are based god
<st33med>	i've programmed a lot in c for some of my classes and having to debug that with just 'segmentation fault' and gdb is a royal pain
<djx>	and it only took me one and a half hours to realize that i has "copying" a structure with = which i thought it was a bultin type
<djx>	i'm going to cry a little now
<flazz>	thought so, why would you make a lib with an exported func that recovers, but panics nowhere?
<jmoiron>	recover in a library is generally a bad sign
<mohae>	so are panics
<flazz>	jmoiron: that is what my impression from effective go is
<st33med>	don't panic!
<st33med>	pass errors
<st33med>	also always bring a towel
<jmoiron>	panics are okay for "programmer error"
<edcarter>	anybody have an idea why this is happening? "(type io.readcloser has no field or method reader)". reader is in the readcloser interface
<pnsrc>	https://play.golang.org/p/5lesb5fe7r this is my prime number finder in go, horrible compared to gosieve, how is it for a beginner?
<pnsrc>	it has no concurrency,
<jmoiron>	interfaces are not structs
<quantalrabbit>	when i do a cmd.run() i get an non-nil error when having this for cmd:  cmd := exec.command("mysql", "-u", "sqluser", "test", "<", "data/test.sql") .  the file data/test.sql does exist and sqluser does not require a password.
<djx>	pnsrc: i'm not a go expert but can't you put the num % i that is on line 12, on line 13?
<jmoiron>	exec.command doesn't do shell indirection
<bnagy>	pnsrc: uh.. does it work?
<pnsrc>	it gave the right prime
<bnagy>	cause it looks like you wanted to count primes up to 10001 but it outputs 104k
<djx>	bnagy: i just saw that too =\ yeah it doesn't sound good
<pnsrc>	djx, isn't it on line 13?
<pnsrc>	https://projecteuler.net/problem=7
<djx>	pnsrc: sorry, the on line 12 can't be on line 11
<djx>	it's 5:37 am, i'm starting to lose vision by now :p
<bnagy>	pnsrc: ah, ok.
<quantalrabbit>	jmoiron: thanks
<pnsrc>	djx, do you mean i should lose the if?
<bnagy>	in that case your variable names are confusing :) i also wonder if you can re-use some of your work in isprime
<pnsrc>	bangy, djx, thanks
<bnagy>	but it's fiddly because you need to keep expanding your sieve
<bnagy>	pnsrc: https://github.com/golang/go/wiki/codereviewcomments
<bnagy>	that has lots of general tips, like isprime not isprime
<mohae>	and that if else can be rewritten to just be an if with early return
<bnagy>	dammit that's what i was about to say :d
<mohae>	and why reassign x to primenum?
<bnagy>	if else is actually a smell in go
<bnagy>	i'm sure it's right once in twenty, but usually when i write it i'm just wrong
<mohae>	it's usually a sign you should rework your evaluation
<pnsrc>	i actually changed those (x and if) lat night and it worked, i didn't have the updated code with me now,
<mohae>	also don't need num := x, i also don't see the need for is there
<pnsrc>	thanks:) i'm reading it, btw, i'm using emacs with go, i've been advised to use liteide, should i do that?
<mohae>	emacs is fine
<mohae>	if you're an emacs person, i doubt you'll like liteide
<pnsrc>	thanks
<st33med>	i haven't touched emacs. i'm more of an ide person, but prefer vim.
<bnagy>	pnsrc: https://play.golang.org/p/mz0ei13uyp
<djx>	bnagy: i think that's what he's doing (your comment of line 14
<djx>	bnagy: the idea is there but yeah, i*i is bad :(
<bnagy>	djx: yes, that's what the code does. it's inefficient
<bnagy>	i*i is fine
<mohae>	pnsrc: https://play.golang.org/p/a_i-9hpdi1
<bnagy>	otherwise you'd have to mess around with math and converting to float
<bnagy>	mohae: your code sux i would have done it way differently
<mohae>	bnagy: ok, i was just cleaning up his code
<djx>	bnagy: but i*i is one multiplication per cycle, right? so i would do sqrt(x)+1
<mohae>	not actually writing my own
<bnagy>	mohae: ^^ basically exactly same https://play.golang.org/p/mz0ei13uyp
<bnagy>	djx: that would work in another language
<bnagy>	that had a sqrt builtin
<djx>	bnagy: http://golang.org/pkg/math/#sqrt
<bnagy>	12:46 < bnagy> otherwise you'd have to mess around with math and converting to float
<bnagy>	benchmark *shrug*
<pnsrc>	wow, i didn't know  i could put return in if, i typed that out, but then i went with the mess i wrote
<pnsrc>	thank you all so much:)
<bnagy>	honestly the main problem is checking all the odd non-primes instead of using a sieve
<djx>	bnagy: argh.. it costs more doing a multiplication per cycle or a float(stuff)?
<mohae>	bnagy: i missed moving the increment to the loop, d'oh!
<bnagy>	64 bit mult is very fast
<djx>	bnagy: but it is per cycle :-(
<mohae>	i'd multi it
<bnagy>	but i agree that doing it once per loop iteration isn't dreamy
<mohae>	right, my first thought when looking at it was damn that's expensive
<djx>	bnagy: can we make a bench test in goplay just to be clear? :-)
<bnagy>	djx: i don't know if play can run package testing?
<mohae>	djx: write it in your local so you can ensure you run the bench long enough to stabilize
<djx>	i don't know :\ i can try in my pc
<bnagy>	write two versions, then write a _test.go then put a bench function in it
<bnagy>	testing has native auto-tuning benchmarks
<bnagy>	you could always log search to find an i*i limit and then cache that
<bnagy>	but srsly how much do we want to bikeshed a naive isprime?
<mohae>	about as much as i actually did on the playground
<bnagy>	miller-rabin || gtfo
<scientes>	x/sys/unix doesn't work with gccgo
<mohae>	rofl, i was just thinking that you'd know a better algo w/o bikeshedding
<scientes>	gccgo 5
<scientes>	5.1*
<bnagy>	mohae: i think it's miller-rabin in stdlib anyway
<djx>	bnagy: =| sqrt has a low performance
<djx>	bnagy: you win this round :-)
<bnagy>	yeah, it is, but you have to pay the price of creating math.big
<quantalrabbit>	here's my naive sieve:  https://play.golang.org/p/sh_n4wq941
<mohae>	that's a package i haven't needed to use
<djx>	bnagy: i've to go, the sun is rising ;-)
<st33med>	bikeshed sound familiar....
<st33med>	that's a lingo term
<mohae>	quantalrabbit: why a map?
<quantalrabbit>	mohae: to sieve with.
<quantalrabbit>	i didn't check what an upper bound should be for the nth prime so max is arbitrary.
<bnagy>	quantalrabbit: hm.. well it works :)
<bnagy>	ohh i see i missed the inner loop cause i was looking for multiplication
<bnagy>	derp. nice. :)
<bnagy>	maybe you could invert your map logic and use struct{} instead, i think they're smaller than bools in memory
<mohae>	0 bytes
<pnsrc>	i'm currently on go-effective, is https://github.com/astaxie/build-web-application-with-golang/ a good resource to begin with?
<bnagy>	https://play.golang.org/p/zl1bie6fvr it's hell-ugly though :(
<mohae>	pnsrc: i'm repeating myself, but tour.golang.org, https://golang.org/ref/spec, and https://golang.org/doc/effective_go.html
<pnsrc>	i did tour.golang.org, and am reading effective_go
<quantalrabbit>	pnsrc: why not give exercism a try?
<pnsrc>	like this? https://github.com/karan/projects
<mohae>	pnsrc: then it's a good time to pick something you would like to do and write it.
<mohae>	and did you do the web crawler?
<pnsrc>	no
<mohae>	one up st33med and write a chat bot with markov chains
<st33med>	wat?
<mohae>	;)
<st33med>	well... i guess. i mean... damn.
<st33med>	work with google if you do that. :p
<pnsrc>	it's a good idea
<mohae>	or find an open source project you'd like to contribute to
<pnsrc>	thanks
<badmadrad>	sup gophers. put together a simple tool for installing go cross platform. not sure how useful it will be for everyone but if you are interested:
<badmadrad>	https://github.com/badmadrad/gophrz
<st33med>	ohey
<eatingthenight>	any ideas why bufio.readline would all of a sudden start returning empty slices :<
<eatingthenight>	nevermind was being stupid :< ugh
<hyphenated>	that's the usual cause.. ;-)
<robot-beethoven>	does anyone know of a good article for non-programmers that concisely explains the importance and need of testing in software development?
<vegai>	manual testing / automatic testing / unit testing? :)
<robot-beethoven>	whichever could convince a client not to do development on a production server
<vegai>	well, any sufficiently large book will do in that case :p
<vegai>	hardcover, preferably
<vegai>	more seriously, perhaps some of the classic xp articles
<badbugz>	a code tester walks into a bar. orders a beer. orders ten beers. orders 2.15 billion beers. orders -1 beers. orders a nothing. orders a cat. tries to leave without paying.
<badbugz>	robot-beethoven: just regurgitate https://www.reddit.com/r/jokes/comments/2m1b9b/a_code_tester_walks_into_a_bar_orders_a_beer/ to your client
<badbugz>	as many other do
<robot-beethoven>	i've been getting the impression that some people without programming experience have the following logic:  programmer says his programs need testing, therefore programmer makes mistakes, therefore programmer is not a good programmer
<badbugz>	robot-beethoven: it's those suit types mate!
<badbugz>	no actually fuck them
<robot-beethoven>	they have a single production server (developed in house), and want me to develop rest clients for it, but without any testing against the server, since the only instance of the server is the server (and i can't have the source to run my own instance)
<robot-beethoven>	i've been trying to calmly explain that this is not possible (at least, if you want it to work)
<badbugz>	just ask them to give you their production server snapshot.. is the rest service's spec available?
<robot-beethoven>	they gave me a spec
<robot-beethoven>	unfortunately, the people i get to deal with directly have no understanding of computers
<badbugz>	yeah happens
<robot-beethoven>	i think they contracted someone to write their server a while ago, and that person is long gone
<badbugz>	ahhh
<robot-beethoven>	but i don't want to enter into some giant mess, and then get blamed for it
<badbugz>	if they can't give you the snapshot, just write it to the spec
<badbugz>	and test it accordingly... i gtg
<tucnak>	hey there! i am looking for a way to set custom handlerfunc for http.notfound
<tucnak>	i've been trying to come up with pretty solution after searching through forums for a while
<tucnak>	but looks like issue itself remains open
<adiabatty>	tucnak: can't you make your own and call it?
<tucnak>	adiabatty: thanks for replying! in fact, i can't
<tucnak>	adiabatty: well, i can call it from "/" route it url != "/"
<tucnak>	adiabatty: but that won't work for fileserver, for instance
<tucnak>	iirc if fileserver doesn't find a file requested, it'll return http.notfound
<tucnak>	i'd love to somehow override it
<adiabatty>	the go way seems to be copy-paste agnostic — the bulk of the code is in http://golang.org/src/net/http/fs.go
<adiabatty>	line 343
<adiabatty>	that said, if that code gets updates, you're gonna need to update your copied-and-modified variant
<adiabatty>	another idea: check if the gorilla toolkit has a more customizable file server thingy
<tucnak>	adiabatty: thanks!
<tucnak>	that still doesn't seem like a great idea
<tucnak>	i'd try to patch the whole thing asap and touch ppl on gerrit
<jowy>	what is the difference between exported and unexported? its like scope (public, protected, public) ?
<robot-beethoven>	unexported can only be referenced from within that package
<pmezard>	yes, between package
<jowy>	i see
<jowy>	and it must include comment otherwise it wont be compiled, that very strict :d
<pmezard>	include comment?
<jowy>	at line 13, character 1, file controllers/home.goexported method homecontroller.get should have comment or be unexported
<pmezard>	ah, but that's go vet isn't it?
<jowy>	and i just add // get method on top of function it works
<jowy>	yeah
<robot-beethoven>	jowy: it's just nudging you towards best practices; the godoc tool can generate documentation from comments
<robot-beethoven>	but it will still compile
<robot-beethoven>	without them
<jowy>	ah i see
<jowy>	and is there any fastest way to compile multiple package?
<pmezard>	compared to what?
<jowy>	right now i still cd to package dir and do go install
<pmezard>	go install your/path/...
<pmezard>	where "your/path" is relative to src/
<pmezard>	and the "..." everything under
<jowy>	lemme try
<jowy>	thanks pmezard its working
<pepton>	:q
<ra0>	howdy
<ra0>	is there a way to pass additional flags to clang calls during a 'go get'?
<hyphenated>	ra0: the same options you'd need to make it work when doing a go build should also work with go get
<ra0>	i'm trying to go get gopkg.in/qml.v1, but it compiles against qt5 and pkg-config is supplying incorrect paths
<hyphenated>	you should probably try to avoid needing those, if possible
<ra0>	so i think my options are to edit all of qt5's *.pc files, edit go-qml's cgo preamble, or pass correct paths to clang during the go get compilation
<hyphenated>	fixing pkg-config seems to be the correct approach
<ra0>	yeah, i suppose i'll have to try that
<hyphenated>	or at least figuring out why there's a difference between what answers pkg-config provides and what you actually need to build against
<ra0>	it's a bug in qt on os x, i think
<bnagy>	make sure you installed pkg-config and qt via the same method
<bnagy>	osx doesn't have pkg-config so you'd only get it via brew or ports or whatever
<bnagy>	so you need to install qt the same way :)
<ra0>	both were from ports; i've also tried using a standalone qt install but still can't pass the correct paths to clang
<ra0>	it seems to stem from this issue: https://trac.macports.org/ticket/44204
<bnagy>	borked port, huh
<ra0>	well, the standalone qt install had the same issue, and it appears that brew does too but they have a temporary workaround in place
<bnagy>	yeah, read it. you could do that?
<ra0>	qt's *.pc files themselves are incorrect
<bnagy>	either way i would avoid making this a go issue
<bnagy>	looks like brew just symlink a bunch of headers in
<ra0>	it's not, i just wanted to see whether it could be solved by passing the paths to clang during the go get
<bnagy>	you can mess with the flags in the cgo magic comments
<bnagy>	but imho don't
<ra0>	which is easier to manage as a temporary fix than continuously re-patching pc files or symlinking lots of folders
<tucnak>	https://www.youtube.com/watch?v=y6120qolsfu
<tucnak>	sry wrong chat
<bnagy>	anyway i don't know a way to do it from go get, only by modifying the cgo directives
<bnagy>	which is also going to be a pain in the butt to maintain
<ra0>	yeah, thanks. that was the answer i was looking for
<ra0>	indeed
<bnagy>	pkg-config on osx is a cluster :/
<jkbbwr>	so if you guys were building a modern rest api, would you simply stick to stdlib + a router of some description?
<jkbbwr>	or do you have any preferences of frameworks or libraries
<kim^j>	jkbbwr: stdlib is all you need really.
<kim^j>	but my preference is stdlib + gorilla/mux
<jkbbwr>	also does anyone have any opinion on gorm
<kim^j>	ew, orm. that's my opinion.
<georgej>	hello folks.
<georgej>	what tool would you recommend for vendoring depenedncies in a way that works well with external tools, like goimports, or others?
<fd0>	georgej: good question, let me know if you find something ;)
<xetius>	does deleting a map entry shrink the storage?
<georgej>	fd0: well, from my understanding most solutions work with external tools, either trough setting gopath or rewriting import paths. i was looking for recommendations.
<georgej>	xetius: what storage?
<xetius>	i dont know how the map is implemented, but the storage associated with the map
<georgej>	xetius: my understanding is that map capacity is mostly implementation defined. if you make a map without a capacity, a big enough capacity is given such that the map is not need to be resized often.
<georgej>	this might also mean that deleting an entry does not clear the map's storage, unless many other items have been deleted, which require the map's storage to be resized. however i've not looked in the implementation code, but i expect this to be the behavior.
<xetius>	georgej:  that was what i expected… trying to trace down a memory leak
<georgej>	you could perhaps have seen this if you could call cap() on maps. i believe you can get the map capacity using reflection though.
<xetius>	it was a long shot.  i think it’s actually something to do with marshalling json
<suchab>	i'm trying to use a varadic function, like this: if _, _, err := db.execute(ctx, authorupdate, marshal..., a.id); err != nil { ... }
<suchab>	but i'm getting an error, which i can't quite figure out. marshal is here an array, and i
<suchab>	i'm using the ql package, more specific following this example: http://godoc.org/github.com/cznic/ql#example-marshal
<adac>	in ubuntu how to get th path to the godep binary?
<suchab>	do i use append(marshal, a.id)...?
<adac>	i guess i need to add ~/gocode to the path
<tucnak>	guys, am i right that golang uses mark&sweep gc?
<p_l>	conservative mark&sweep, iirc, not sure if also generational
<mwhudson>	uh hasn't been conservative for a while now
<mwhudson>	and it's not generational but in 1.5 it will have bits that can run concurrently with the program
<tucnak>	mwhudson: is there a chance it'd be as fast as java's?
<mwhudson>	tucnak: that's not really a question with an answer :)
<p_l>	mwhudson: so it's now copying/moving?
<tucnak>	mwhudson: i mean, theoratically, is it possible?
<mwhudson>	i think it's still somewhat less sophisticated than the best java gcs
<p_l>	mwhudson: or do you mean precise?
<mwhudson>	the advantage of go is that you can avoid a lot of allocs
<mwhudson>	p_l: it's precise
<tucnak>	iirc there is a bunch of reasons implying that gc in go can't be generational
<jkbbwr>	god i miss decorators :(
<p_l>	haven't seen anything that would make it a language issue (current runtime, maybe, language design, nope)
<tucnak>	i am really new to the whole technology, playing with go for a few weeks, but i find it incredible, all the imperative feel and everything
<tucnak>	oh, a question
<tucnak>	i am trying to patch http module atm
<tucnak>	basically i want to make http.notfound customizable
<tucnak>	is there a chance it'll be accepted on reddit?
<tucnak>	like, generally, how does community accept such changes?
<hyphenated>	jkbbwr: what for?
<hyphenated>	tucnak: on reddit?
<jkbbwr>	hyphenated: just a really really really nice syntaxic sugar for what im doing atm
<jkbbwr>	hyphenated: tokenbasedauth(servesjson(product))
<hyphenated>	tucnak: um.. http://golang.org/pkg/net/http/#notfoundhandler ?
<hyphenated>	oh you want the opposite of that
<tucnak>	hyphenated: on reddit?
<jkbbwr>	06:45 < tucnak> is there a chance it'll be accepted on reddit?
<tucnak>	oh sry
<tucnak>	i meant gerrit
<tucnak>	hyphenated: isn't notfoundhandler a read-only method?
<hyphenated>	they're not really dirty hacks if the http package exposed those things intentionally, to provide alternative implementations
<tucnak>	hyphenated: can't see point in limiting such functionality
<hyphenated>	if you feel very strongly about it, you can open an issue
<hyphenated>	but you're asking for it to be customizable, which isn't actually necessary, and would probably make it fit only one new use case (yours) instead of a variety of them
<taruti>	tucnak: you can just use a custom mux handler in your http.server and do whatever you like there.
<tucnak>	taruti: that's what i'm doing here
<tucnak>	hyphenated: do you really think that custom 404 page is a rare case nowadays?
<taruti>	with custom things, one would probably want to customize lots of things, and end up with the custom handler like you ended up anyways.
<hyphenated>	yes, i meant exactly what taruti said ;-)
<skripted>	good day to you all - quick question: i've never sent emails before with go, but can i send multiple emails with one smtp connection in go?
<hyphenated>	the default and intentionally simple servemux, fileserver and so on don't allow you to set a custom one. but you're quite able to provide a different servemux with whatever customization you need
<taruti>	tucnak: yes it does. you write yourfancymuxdoingwhateveryouwant.
<tucnak>	taruti: can you pls provide a trivial example
<tucnak>	cuz seems like i missed the point
<taruti>	tucnak: e.g. file handler might check 1) if the session is present (or not needed for that file), 2) open the file, 3) if it fails for some reason (not existing, permission denied, io error, ...), perform a reasonable default for that type of file and log it etc.
<tucnak>	taruti: wait a sec, official docs imply that file server is an expected solution to use in situation when you need to route a part of fs
<tucnak>	taruti: in the meantime, it's not flexible
<tucnak>	i can understand the point of minimizing excessive customizations
<taruti>	tucnak: it is a barebones solution, that is enough in the simplest cases, in production apps one typically has complex custom requirements :)
<tucnak>	but at this point it's just not flexible to provide anything that could be used in real app
<tucnak>	what's its point then? :)
<taruti>	it works well enough for the simple cases.
<tucnak>	for example
<taruti>	and actually you end up reusing parts of it (e.g. servecontent)
<hyphenated>	tucnak: it's useful as a building block for the "real app"
<taruti>	with real apps, one ends up with browser bugs etc that have to be circumvented in the backend
<hyphenated>	tucnak: since every "real app" will have its own requirements and dependencies, it's impossible to design something that suits everybody
<taruti>	like hyphenated says
<tucnak>	again, i see the point of minimizing excessive improvements, but at this particular case, don't you think that custom 404 response is somewhat being customized like in every single app?
<taruti>	tucnak: it would need also 403, logging, permissions, etc typically
<hyphenated>	tucnak: i don't, but like i said originally, if you feel strongly about it, open an issue and see what the real answer comes back as
<hyphenated>	at least now you're not ignorant of other ways to achieve what you want though
<tucnak>	hyphenated: taruti: alright, i'll start an issue on github (is it the right place to do so?)
<taruti>	speaking of net/http the 206 interaction with some browsers (chrom*) is nasty, and we ended up with custom code for that.
<tucnak>	hyphenated: taruti: anyway, thanks for your help!
<nbari>	hi all, i am how could i use the pkg.flag to print a custom defaults message, instad of printing something like l=map[]: ....
<nbari>	basically i would like to remove the type of the argument '-l=map[]' or '-r=[]'
<nbari>	i would like just to print something like '-l: my custom description'
<hyphenated>	nbari: flag.usage = yourfunction
<nbari>	currently i am using flag.usage = func() { my_custom_msg flag.printdefaults() } just to change de defaults but how to do it for the printdefaults() ? does flag.usage per arg ?
<hyphenated>	you don't. you just provide a long message
<nbari>	mmmm ok
<guest43149>	hi gophers, i stumbled upon a problem with errors and i'm not sure if the behavior i saw is intended
<guest43149>	https://gist.github.com/ligustah/de5dc3e5882877978954
<guest43149>	apparently the nil reference is implicitly cast somehow, which makes it not seem like a nil error to the "if err != nil" check
<guest43149>	even though it definitely is a nil pointer (see the log output)
<guest43149>	would be nice if someone could have a look at it and tell me if this is supposed to happen
<guest43149>	thanks in advance!
<edayo>	hi all, is it possible to make a map such as this: map[string]interface ?
<r00trunner>	which style do you prefer? http://ix.io/ii5
<sauerbraten>	i have code for a program in gopath/src/foo ("package main"). how can i get godoc for this?
<muraiki>	guest43149: i don't have an answer as to how to fix it, but look at what the types are for your return value and nil using the reflect package, as in here: package main
<muraiki>	import (
<muraiki>		"fmt"
<muraiki>		"reflect"
<muraiki>	)
<muraiki>	type errortype struct {
<muraiki>	}
<muraiki>	func (e errortype) error() string {
<muraiki>		return "error"
<muraiki>	}
<muraiki>	func getnilerror() *errortype {
<muraiki>		return nil
<muraiki>	}
<muraiki>	func main() {
<muraiki>		var err error
<muraiki>		err = getnilerror()
<muraiki>		fmt.println(reflect.typeof(err))
<muraiki>		fmt.println(reflect.typeof(nil))
<muraiki>		if err != nil {
<muraiki>			fmt.println("received:", err.error())
<muraiki>		} else {
<muraiki>			fmt.println("all fine")
<xe>	muraiki: see the golang playground
<muraiki>		}
<muraiki>	}
<muraiki>	oh god, i didn't mean to paste all that!
<mpl>	stahp
<muraiki>	sorry t_t
<sauerbraten>	omfg
<muraiki>	guest43149: i meant to paste the go playground url but apparently copied the wrong thing. yay no caffeine yet. https://play.golang.org/p/b0rnqjdlme
<r00trunner>	which style do you prefer? http://ix.io/ii5
<tucnak>	r00trunner: imo #1 is good unless you have >2 options. with 3 options, #2 is better already
<sauerbraten>	r00trunner: hard to say, switch-case has the conditions nicely aligned, but switching on nothing and the empty default look strange
<muraiki>	guest43149: i think the problem is that you're not returning the error interface, you're returning a nil pointer to errortype. if you change getnilerror to return "error," the code works as expected
<sauerbraten>	r00trunner: if you don't have an else in option #1, you could make it two seperate ifs
<sauerbraten>	then the conditions would align again
<guest43149>	@muraiki thanks, that is indeed what i did to fix it in my real code, however it still had me confused as to why the compiler would even allow this to happen
<muraiki>	guest43149: that happens because there's a difference between "nil" and "a pointer to something, which happens to be nil"
<muraiki>	the latter is typed, the former isn't
<muraiki>	or rather, the former is simply of type nil.
<guest43149>	yea, i see
<guest43149>	still feels wrong to me, having a null pointer pass through err != nil
<muraiki>	because you don't actually have nil
<muraiki>	you have a pointer to errortype, which is currently not populated... heh i don't know the best way to explain it :)
<guest43149>	i think i understand what's happening. i just don't understand why it's allowed to happen
<muraiki>	it's like comparing nil to option[errortype]
<muraiki>	ah ok
<muraiki>	yeah, it is counterintuitive to me also
<guest43149>	especially with error types, since err != nil is probably the most used line in go code :p
<muraiki>	yeah, it is one annoyance i have but deal with because i enjoy using go more than one of the other primary languages at my day job, perl. :)
<guest43149>	didn't know there were still people using perl :p
<muraiki>	well, we've been around since 1997, so there's a bit of a legacy here :)
<guest43149>	:d
<muraiki>	perl in 2015 actually has some nice stuff going on in it, but not nice enough that i'd recommend anyone learn it if they know another dynamic language like python or ruby
<guest43149>	always feels kinda hacky to me
<muraiki>	and that's how we're ending up using go... good concurrency constructs are especially a sore point in perl
<guest43149>	perl that is
<carl->	any recommendations for web scraping / parsing in go .. i personally love beautifulsoup in python :) as an example.. not 100% content with goquery that i have tried in go so far
<muraiki>	guest43149: here's a little more info... it seems the recommendation is to always use error if you are returning a "nil error": http://golang.org/doc/faq#nil_error
<guest43149>	@muraiki ah, great! thanks a lot
<guest43149>	that does indeed describe the problem i encountered
<muraiki>	so if you are writing a function that returns a pointer, but the fn could fail, return (*pointertosomething, error)
<guest43149>	in my code i did have a function like func dowork() (*type, *internalerror)
<guest43149>	which was then called like t, err := dowork(); if err != nil { return err }
<muraiki>	yeah i think you want to not return *internalerror but rather internalerror that conforms to the error interface
<muraiki>	see https://gobyexample.com/errors
<r00trunner>	is switching two cases without a default case better than if-else if?
<catphish_>	does go have its own hostname resolution mechanism rather than trusting the underlying os?
<catphish_>	so modern versions will revert to getnameinfo() if nsswitch doesn't permit?
<aram>	iff they are build with cgo and without netgo.
<aram>	and recent means like a week old
<catphish_>	i think i understand, thanks
<catphish_>	i'm using somebody else's go program and it's failing to look up some names
<catphish_>	i guess i'll just report it to them and be patient
<aram>	note that if you cross compile you automatically disable cgo
<aram>	and the go resolver will only do essentially "files dns", so avahi/ldap/yp won't work.
<catphish_>	aram: that's exactly my issue
<catphish_>	i was hoping there was a way to address it
<aram>	the way to address it is to recompile the program with a cgo-enabled go.
<catphish_>	thanks
<zhaoym>	what's the motivation of using pointer receiver in `func (t *time) gobdecode(data []byte) error` while most other methods of time don't use pointer receiver?
<amandac>	zhaoym: to make it able to edit itself, i’m guessing
<smw>	zhaoym, what amandac said, a decoder needs to edit itself.
<zhaoym>	makes perfect sense. gobencode uses plain time. thanks guys.
<zhaoym>	i've been over-using pointer receivers i thikn
<napsy>	hello. are maps thread-safe?
<sztanpet>	no they are not
<sztanpet>	the manual is clear about this
<zhaoym>	napsy: https://blog.golang.org/go-maps-in-action
<sztanpet>	and http://golang.org/doc/faq#atomic_maps
<edayo_>	hi all, is it possible to make a map such as this: map[string]interface ?
<sztanpet>	yes
<edayo_>	how would i use declare it?
<sztanpet>	map[string]interface{}
<napsy>	ok thx
<edayo_>	ive tried: vr := map[string]interface{"a":structa, "b":structb}
<remeh>	abstractdata := make(map[string]interface{})
<sztanpet>	declaring such a map usually signals that you are doing something wrong
<remeh>	abstractdata["key"] = abstractdata // mind... blown
<edayo_>	:)
<remeh>	sztanpet is right
<edayo_>	im trying to create a list of models
<smw>	edayo_, the type is "interface{}" so map[string]interface{} so map[string]interface{}{"1": 2}
<edayo_>	sorry, im comming from pythin, goism are still rather strange to me
<edayo_>	smw, what if instead of integers i want to use structs?
<smw>	edayo_, map[string]interface{}{"1": t{1}}
<smw>	edayo_, where t is a struct. i would like to point out that a map[string]interface{} is almost guaranteed to be a bad idea
<muraiki>	if all the structs are the same, then you don't need interface{}... you can just do map[string]sometype where sometype is something like type sometype struct { foo, bar string }
<edayo_>	hmm, i tried that, musta done something wrong. thanks for the pointers
<edayo_>	muraiki the structs arent the same
<muraiki>	ah
<lemmi>	 edayo_ then think about making them implement the same interface
<muraiki>	yeah, that's the way to do it :d
<edayo_>	problem is these yahoos dont have methods :s
<edayo_>	they are gorm models
<gra1>	hi, do anyone has any example for api testing ?
<amandac>	skelterjohn: it would seem i’ve managed to google enough to make working emacs lisp to make it work with wgo!
<amandac>	er, to make go-mode
<amandac>	hrm, maybe not. :(
<hsuh1980>	hi guys, any idea to rewrite this code to be more efficient? i couldn't express it in another way... https://gist.github.com/hugows/fd992d775980a4870201
<hfaafb>	go has no tco afaik
<hsuh1980>	that makes it even worse :)
<hsuh1980>	(the code, not go)
<foofoobar>	i currently have some code to load my template like this: http://play.golang.org/p/udgzxqhxua
<foofoobar>	i assume its better to use a absolute path here, correct?
<hsuh1980>	i've put my code in the playground as well: http://play.golang.org/p/9xxztd4qgr
<nbari>	hi all, in this: http://play.golang.org/p/ldyu8gud3l
<nbari>	how can i specify pad ?
<nbari>	where pad is the number of spaces i want to ident but don't know how to doint when pad is a int (pad := 3)
<nbari>	i would like to do sometghing like: fmt.printf("%0(pad value)d", 12)
<nbari>	but how to properly parse/set the pad_value ?
<tv`>	nbari: docs help.. http://play.golang.org/p/nxcj0wrr9c
<tv`>	"either or both of the flags may be replaced with the character '*', causing their values to be obtained from the next operand, which must be of type int."
<nbari>	many thanks tv`
<nbari>	tv`: i would like pad based on the length of the string, i know the number of lines by doing len(lines), if for example i get 100, i wouldl like to pad only using 3
<nbari>	i tried len(len(lines)) hoping i could get a 3
<nbari>	but i think i need to convert int to string in order to get the lengh of the string
<nbari>	any way of how to properly/better doing it
<nbari>	basically i would like to know the lenght of the string the int is representing
<mohae>	look at the strconv package
<nbari>	if number = 100 pad = 3, if number 10000, pad = 5
<mrcaipirinha>	len(fmt.sprint(321))
<mrcaipirinha>	?
<nbari>	mrcaipirinha: thanks :)
<mrcaipirinha>	np!
<mrcaipirinha>	if you do just len(string(321)) i think it interprets it as a unicode character
<nbari>	mrcaipirinha: http://play.golang.org/p/be9whwuu8y
<nbari>	using string returns 2
<nbari>	sorry i mean on the example i paste
<mohae>	strconv
<nbari>	if using pad := 300 it returns 2 instead of fmt.sprint(pad) that returns 3
<mrcaipirinha>	yep
<mrcaipirinha>	you have to convert the number 321 to its string representation, and that is *not* what string() does :)
<tv`>	mohae: ever feel futile?
<mrcaipirinha>	*textual representation ? english is not my mother lang..
<mrcaipirinha>	nbari: this is probably more correct http://golang.org/pkg/strconv/#formatint
<mohae>	tv`: nah, it amuses me that people work so hard at banging their head against the wall instead of reading the docs
<mrcaipirinha>	"only way to do it ain't fun"...
<nbari>	mohae: many thanks
<mohae>	mrcaipirinha: probably itoa
<mrcaipirinha>	mohae: nice
<nbari>	what about this: fmt.println(len(strconv.itoa(pad))): http://play.golang.org/p/zi7nqhlrmn
<nbari>	what could be the best way of doing it ?
<d0100>	how can i serve files inside an imported package?
<nbari>	with fmt.println(len(fmt.sprint(pad))) i don't need to import strconv
<mrcaipirinha>	thats good, now use this and move along :)
<tv`>	d0100: nothing says the source tree is available where the binary is run
<tv`>	nbari: how do you think fmt works..
<d0100>	oh, true, so i'd have to embed my files? what's the easiest way to share a (back|fron)end application that is meant to be imported as a third party app?
<nbari>	tv`: same way strconv maybe or maybe is using it internally i think
<mrcaipirinha>	nbari: there is a utility called goimports that makes dealing with imports easier
<mrcaipirinha>	it might be available for your editor/os
<mrcaipirinha>	having to import more packages shouldn't be a nuisance :)
<mohae>	not sure how importing packages you use would be considered a nuisance
<amandac>	skelterjohn: \o/ i’ve done it! https://www.irccloud.com/pastebin/qvoj76wb
<mrcaipirinha>	oh, just because he said "with fmt.println(len(fmt.sprint(pad))) i don't need to import strconv"
<mrcaipirinha>	maybe i misread it
<nbari>	tv`: https://golang.org/src/fmt/print.go?s=6663:6699#l237 i got it that far
<mohae>	i think that's more of a i'd rather not do it the right way
<nbari>	maybe i am wrong but if i like to avoid importing if i don't need to or i can solve it with out need to import
<nbari>	but in this particular case, i am confused on what could be the best practice aproach
<wessie>	so i presume you import no packages?
<wessie>	you can just rewrite them all into a single one
<tv`>	nbari: if a is built using b, and you only need the functionality of b, what should you use?
<nbari>	fmt.println(len(fmt.sprint(pad))) oder fmt.println(len(strconv.itoa(pad)))
<tv`>	that outer fmt.println is a red herring
<nbari>	tv`: just b
<mohae>	nbari: why would importing strconv be a thing to avoid?
<nbari>	not to avoid, is just that i think fmt.sprint can do the job saving me from importing strconv
<amandac>	why avoid importing strconv? it’s going to be tree-shaken away and inlined, anyway, for the most part.
<nbari>	at the end if i import it or not, after compiled the speed/perfomance i think is not influenced because of this right ?
<edayo_>	guys, can anyone help me take a look at this (http://play.golang.org/p/s3wkcjcjxi) and tell me what i'm doing wrong? thanks!
<tv`>	nbari: fmt is way more complex than strconv
<mohae>	http://play.golang.org/p/td66apkntg
<mohae>	edayo_: it's an interface{} not an interface
<edayo_>	ah! thank you mohae!
<nbari>	tv`: ok but if already included, i think i could use it instead
<amandac>	nbari: that’s roughly equivalent to saying “i have a hammer, but so i might as well use it to drive in this screw."
<nbari>	ok so please guys then help me undestand better go, 1. it doesn't metter how much imports i do, the thing that metters more is to use the propper tool either if that concist of importing n packates ?
<cassyblanca>	so you're saying that you shouldn't treat everything as a nail just because you got a new hammer?
<tv`>	nbari: fmt imports strconv anyway, you using fmt but not strconv is not really a win
<cassyblanca>	correct, the number of imports you have really isn't going to affect anything significantly. as long as you're actually _using_ things from what you're importing - importing things you won't use is pointless.
<nbari>	since is a compiled language, i could have a multiple imports but after compiling the final product benefits from the best algorithm used ?
<nbari>	oh ok
<eatingthenight>	is bytes.buffer the best way to concat long strings?
<mohae>	it's the fastest
<eatingthenight>	yes i guess that was my real question
<eatingthenight>	thanks mohae
<mohae>	np
<edayo_>	the strange case of two different structs with the same address: http://play.golang.org/p/b7k1xq8tqu i'm sure i'm missing something obvious but what?
<mohae>	edayo_: it's a copy
<amandac>	edem: for doesn’t make a new variable and allocation for every element it iterates
<edayo_>	the strange case of two different structs with the same address: http://play.golang.org/p/b7k1xq8tqu i'm sure i'm missing something obvious but what?
<mohae>	that's a better explanation
<mohae>	edayo_: asking the question again won't change the answer
<amandac>	er, edayo_, see above, sorry edem
<cassyblanca>	he'd disappeared
<amandac>	ah
<cassyblanca>	<amandac> edem: for doesn’t make a new variable and allocation for every element it iterates
<cassyblanca>	i can't blame you, there are 1239 people in here. :p
<edayo_>	sorry my client disconnected, i didnt know the initial post was delivered
<amandac>	edayo_: see the line that cassyblanca just re-pasted
<mohae>	edayo_: that's ok, i didn't know you dc'd, sorry
<edayo_>	ok.. it seems i have some re-reading to do, thank you
<mohae>	edayo_: are you trying to modify that element and save the changes?
<edayo_>	no
<mohae>	ok, then it shouldn't matter
<edayo_>	at this point im just basically playing around, trying to get a feel
<eatingthenight>	https://play.golang.org/p/udkyr0z6ro this has been puzzling me for a while. why does io.copy not actually pipe the string to stdin? the connection is made fine but then it just prints out the --help command for mysql.
<whippythellama>	edayo_: maybe this would help clarify?  http://play.golang.org/p/v-0sfx3ulo
<jkbbwr>	eatingthenight: out of interest why not a database driver?
<cassyblanca>	basically you're just taking the address of e in each iteration - not the address of any elements in lst. iteration starts, the struct is copied to e, then you're taking the address of e. if you want the address of the struct itself, &lst[i] should work.
<amandac>	eatingthenight: mysql may be checking if stdin is a tty, and falling out if not
<cassyblanca>	...basically, what whippythellama just posted. :p
<whippythellama>	:)
<mohae>	but that was an excellent explanation cassyblanca!
<eatingthenight>	jkbbwr: this is for importing a huge mysql dump or i would use a mysql driver
<whippythellama>	+1
<jkbbwr>	eatingthenight: why not bash?
<eatingthenight>	jkbbwr: i am using go because i wrote a program that splits up the dump table by table and then imports 10 at a time
<nesv>	mr_const: yes, that's the execution module, but if you are looking to do it from states in an sls file, look here http://docs.saltstack.com/en/latest/ref/states/all/index.html and search for "postgres_"
<cassyblanca>	so i have been using go for maybe around 48 hours now. i think my favourite thing is how it handles c bindings, as opposed to certain other languages' ffis. >.>
<mohae>	nesv: sounds like you want #salt
<eatingthenight>	amandac: anyway to debug that or work around it that you know of?
<nesv>	oh frick
<nesv>	mohae: sorry about that
<mohae>	nesv: np
<wessie>	eatingthenight: i don't see you starting the process anywhere?
<eatingthenight>	wessie: combinedoutput runs the command and returns stdin and stderr
<wessie>	ah so it does, i never use that method
<eatingthenight>	yeah i had to look around for it was helpful for debugging
<eatingthenight>	but now i have no errors and it's still not working
<wessie>	well mysql does open an interactive prompt, i doubt it plays nicely with a non-tty
<eatingthenight>	wessie: darn :( any way around this?
<eatingthenight>	wessie: i was looking at the sql package but it doesn't have any methods that would let me write a few hundred mb without reading it into memory
<wessie>	actually it should work, according to others that tried
<wessie>	so you might be invoking mysql wrong
<whippythellama>	eatingthenight: there's a 'go expect' module which i found and have no experience with - https://github.com/thomasrooney/gexpect  :)
<wessie>	eatingthenight: i was just surprised initially as to why io.copy would finish happily with no one reading stdin, but i guess with very little data it just puts it into an internal buffer
<mohae>	eatingthenight: i'd connect to the port it listens on
<whippythellama>	there's also running a batch of commands - https://dev.mysql.com/doc/refman/5.0/en/batch-mode.html
<tv`>	eatingthenight: that "without reading it into memory" part is just weird
<whippythellama>	but really, you probably want to think about using a mysql library instead
<skelterjohn>	amandac: cool! want to pr it into the wgo repo?
<tv`>	eatingthenight: your use of os/exec is prone to deadlocking
<eatingthenight>	tv`: how so? if the connection terminates?
<tv`>	eatingthenight: and if you got the mysql invocation right, it'd probably sit there waiting for more input, afterward; you never close its stdin
<tv`>	eatingthenight: you start writing to the pipe before the process is running
<amandac>	skelterjohn: not entirely sure i should. apparently using the advice-add thing is heavily frowned upon in the emacs circles, given when i was googling how to hook into when the buffer is made, pretty much everyone was like “you can’t… welll, you kinda can, using advice, but you shouldn’t use advice” or similar.
<tv`>	eatingthenight: none of this is about go; this is about unix
<amandac>	skelterjohn: but if you’d be ok with upsetting people with massive nerd-boners for emacs, sure. :p
<eatingthenight>	tv`: o thank you i didn't even notice that!
<amandac>	actually, i may anyway, just to see if anybody can find a better way to do it
<amandac>	skelterjohn: i’ll give it some more battle-testing, and if it doesn’t fall over in a couple days. i’ll fork and make a pr — it has a rather unfortunate method of falling over, which is why i’m going to battle test it some.
<amandac>	skelterjohn: if it fails inside the hook, emacs will fail to create any new buffers whatsoever
<eatingthenight>	tv`: you are insane. thank you so much you just pointed out everything wrong with the script :)
<eatingthenight>	thank you everyone for the help
<skelterjohn>	amandac: sounds good, thanks!
<r00trunner>	should we align types in structs?
<aquarat>	i press ctrl+s and it aligns them automatically (identation)
<aquarat>	that's in liteide
<eatingthenight>	atom has a nice plugin for it as well
<eatingthenight>	with go you should not have to worry about formatting at all really
<tv`>	r00trunner: whatever gofmt does
<aquarat>	but it's a good idea to have stuff neat anyway :p
<amandac>	skelterjohn: oh nice, it looks like using that same setup-go-mode-env inside a hook for ‘go-mode makes flycheck play nicely with wgo as well! :d
<skelterjohn>	what is flycheck?
<amandac>	on-the-fly syntax checking for a buttload of languages
<tv`>	.. with shitty go support :-/
<amandac>	tv`: got one with better go support? :/
<skelterjohn>	tv` is never happy.
<tv`>	amandac: nope
<skelterjohn>	amandac: 'go build'?
<amandac>	skelterjohn: go-fmt then go-vet then it does go-build if i’m understanding their code right
<tv`>	amandac: well, actually, i do; flymake worked better for me
<tv`>	even though it's the "less modern" one
<amandac>	skelterjohn: presumably it should work for pretty much any process that gets spin off from a go-mode buffer’s variable context, if i’m understanding this lisp stuff right
<amandac>	the advice-add stuff is nessary because nsf’s go-autocomplete creates it’s own buffer from scratch
<tv`>	amandac: ensuring you've seen http://dominik.honnef.co/posts/2013/03/writing_go_in_emacs/ http://dominik.honnef.co/posts/2013/08/writing_go_in_emacs__cont__/
<amandac>	tv`: i have,but only skimmed them
<amandac>	tv`: one problem i have is the creating-a-new-window thing gofmt-before-save does is rather intrusive imo
<tv`>	amandac: i seen no such thing here
<amandac>	tv`: try making syntaally-invalid code and saving it
<amandac>	tv`: a new frame/window/whatever pops up with the errors
<tv`>	amandac: not here ;)
<amandac>	tv`: how did you make it not do that? :p
<tv`>	i don't think i did anything speical
<amandac>	tv`: http://a.ddna.cc/image/2x0g1j2s0g3o
<amandac>	that’s with (add-hook ‘before-save-hook ‘gofmt-before-save)
<tv`>	maybe a different go-mode version?
<tv`>	i'm currently at 0bcbcf12730049d685e02f9e9451554d56f71f99
<amandac>	i installed it from package-install
<muraiki>	mmm bacon pie
<amandac>	http://a.ddna.cc/image/0p2x3k343x17
<amandac>	the late 2013 date stamp there is rather worrying
<v0idcat>	amandac: yup, last version is 20150503
<amandac>	v0idcat: i’ve disabled the straight-from-git version of melba, because it was causing problems with some packages. is it regularly tagged into melba-stable?
<amandac>	melpa-stable*
<v0idcat>	amandac: i don't know about melpa-stable. this one is from melpa
<amandac>	ah
<amandac>	looks like he does regularly tag it
<amandac>	tag 1.3.0 is the latest, as of 2 days ago
<v0idcat>	yes and melpa-stable is supposed to auto-pick from git tags, right? maybe it has the wrong repo
<amandac>	yep
<amandac>	nope, 1.3.0 is the latest according to melpa-stable too. :p
<v0idcat>	hmm then you simply need to update?
<amandac>	yup, trying that now
<amandac>	nope
<amandac>	still popping up a new thing for gofmt errors
<bmercer>	i'm probably missing something really obvious, but i'm using bufio to read in a file with newlines, and then doing splitbytes() on it, but the data is not what i'd expect...
<bmercer>	i wonder if i need to strip newlines and such first
<amandac>	tv`: it seems you set gofmt-show-errors to nil at some point.
<tv`>	bmercer: see bufio.scanner
<tv`>	amandac: very likely
<tv`>	amandac: "its value is buffer" says emacs
<amandac>	tv`: hrm
<bmercer>	tv`: makes sense, now i just need to figure out how to make a splitfunc!
<tv`>	bmercer: splitting lines is already provided..
<bmercer>	ahh, it's an example
<marcop>	hey bmercer
<bmercer>	tv`: i am not splitting on lines
<bmercer>	hiya marcop
<bhenderson>	hi, how does one read a bytes.buffer twice?
<saidinwot>	if the buffer is read fully, it will truncate itself to empty.
<saidinwot>	you can save the underlying byte array before starting reading
<st33med>	yep. store it in a variable.
<bhenderson>	gotcha
<bhenderson>	thanks
<mohae>	bytes.buffer is faster than append
<tv`>	i've yet to see an app where unicode fiddling is the bottleneck
<cronos>	mohae: hmm, why?
<mohae>	cronos: good question, i haven't looked at the append code
<wessie>	do i want to question why such an abbomination was required in the go ecosystem? (gohper)
<mohae>	but if you do some benchmarking...
<cronos>	mohae: i would expect them to use roughly the same growing algorithm
<tv`>	e.g. for the case of write+read+write, bytes.buffer can "slide" the contents inside the []byte, where naive append and re-slice will leave (referenced!) garbage around
<daved>	wessie: oh shit.  is it that bad?
<skripted>	when creating an email queue, should i use a queue like redis and a second go instance to poll and send the mails? or would you recommend to send the mail directly from the main program but in a goroutine?
<tv`>	wessie: who said anything about required
<schmichael>	someone dared to use our lovely mascot as a name for their library?!
<wessie>	tv`: well someone felt it was something we should have :)
<tv`>	the whole idea of "common libs" is an oxymoron
<cronos>	skripted: how many emails do you expect to send?
<cronos>	i'd send them right away
<daved>	wessie: oh, you're referring to the gohper lib...
<tv`>	the "gohper" thing just seems like somebody's favorite collection of navel lint
<skripted>	cronos: tons, i'm using mandrill for that but still it's about the splitting
<tv`>	lots of things, why would you share
<mohae>	i write things that probably aren't the best idea, but they usually seemed good at the time, or i didn't know better
<tv`>	the shitty part is, these people are so enthusiastic about their latest creation, it ends up on https://github.com/avelino/awesome-go and what not
<tv`>	"awesome" very much isn't
<cronos>	skripted: tons is not a number
<cronos>	unless you measure them by mass somehow
<tv`>	also, those who have not known the go wiki packages page are doomed to reinvent it, about as poorly
<mohae>	http://www.reddit.com/r/golang/comments/34pcow/gohper_v01_released_with_much_changes_common_libs/cqz0v6g explains why. dry strikes again!
<cronos>	skripted: if you can't process the load right away, queue will only delay the inevitable
<cronos>	you can simply have multiple hosts with this service and a load balancer in front
<cronos>	queue will help however if you have bursty load
<wessie>	apparently os.file was too non-dry and all the os functions should accept callbacks
<wessie>	why did i click :(
<tv`>	wessie: the order of clicks shall be downvote, close tab
<mohae>	i don't see a reason to go to r/golang
<tv`>	mohae: it has, unsurprisingly, gone downhill a lot
<mohae>	tv`: indeed, it's rare enough to find anything of value there that it's in the waste of time category
<mohae>	and i'm good enough at wasting my own time
<skripted>	cronos: i'm a noob at queues/jobs/load balancing, right now i have a rest api and on a few routes i'm sending invitation mails per user.. so you suggest to use a queue and job when i have many requests at once but use a simple goroutine within the api when they are steady?
<mohae>	tv`: btw, i find this suggestion to be an excellent one! https://github.com/boltdb/bolt/issues/360. i eagerly anticipate your implementation ;)
<tv`>	mohae: definite pony there
<cronos>	skripted: no, i suggest you use a simple goroutine always
<cronos>	if that happens to be a big issue, scale the number of instances of your service
<skripted>	even if only the sending is the culprit i should copy the whole application including the api?
<mohae>	tv`:  d'oh, i should have scrolled down. sadness
<mohae>	skripted: have you previously sent out lots of emails?
<cronos>	skripted: one big sending would probably cause you delivery lag which is fine
<skripted>	mohae: no i'm building my first production app :( and i heard all others are using redis and workers for such things but i know i'm using go and i have amazing goroutines so i only wanted to make sure that i can achieve the same with it :)
<cronos>	are they using ruby?
<skripted>	yea
<skripted>	mostly
<cronos>	heh, surprise
<skripted>	but also php with cronjobs
<cronos>	oh god
<cronos>	worst case scenario, your run out of fds because on number of concurrent requests at which point you simply convert this sending stuff to use a pool of workers instead of individual goroutine for each email
<mohae>	skripted: well, in doing such things with email there are other things that become involved.
<mohae>	gl
<cronos>	skripted: also, i believe most popular email services support batching of emails
<cronos>	so you can send n identical emails in one request
<skripted>	cronos: i will definitely need to send 1email/user because of extra tokens
<skripted>	:/
<cronos>	well, how many users do you have?
<skripted>	none yet, but it's about writing the software <now>
<cronos>	if you're just starting out, write the simplest thing first and put decent monitoring in place. when you start noticing issues, revise your design
<skripted>	alright :)
<cronos>	i find it to be a bad approach to future-proof everything you do and trying to come up with perfect design initially
<skripted>	i will try sending the mails directly from the web service with goroutines :)
<skripted>	you got a point hehe
<skripted>	cronos: one more thing, i already tried to send like 12 emails with smtp.sendmail at once and it took ~8seconds .. i'm afraid it's because of reopening new smtp connections for each mail, can i send them in one connection?
<cronos>	skripted: i'm fairly sure smtp as a protocol allows this. you'll have to manually use smtp.client though
<cronos>	or you can just use mandrill's api instead of smtp
<skripted>	cronos: ok! thanks a bunch! :)
<eatingthenight>	any ideas on how i could optimize this? https://github.com/michaeljs1990/split-mysql-dump/blob/master/split-mysql-dump.go it takes a long time when trying to split large files.
<mohae>	regex, for those that think the only tool is a hammer
<cespare>	if you're going to criticize the approach, it's nice to suggest an alternative
<eatingthenight>	mohae: what would you replace it with? just check is a substring in present?
<eatingthenight>	*if
<mohae>	cespare: um, alternatives to regex are pretty obvious in go
<mohae>	hey let's start up a state machine when we can jus check to see if the string exists
<mohae>	eatingthenight: yes
<cespare>	mohae: yes, to you and me
<cespare>	mohae: i guess what i'm trying to say is: don't be a dick
<mohae>	cespare: and i saw you suggest an alternative with your criticism
<mohae>	pot meet kettle
<eatingthenight>	ok i'll check that out and see how the performance improved :>
<guest64688>	i do not understand var shadowing in golang. https://play.golang.org/p/crvxa8nwwk
<guest64688>	i'm sure there is some proper reason for this behavior, but i don't see it.
<cespare>	mohae: i opened with an alternative suggestion.
<andlabs>	guest64688: every { introduces a new variablescope
<andlabs>	and you can freely shadow in each new scope
<andlabs>	it's actually not too hard
<guest64688>	but it is very confusing when mixed with multiple assignments, isn't it?
<kirkmcdonald>	and the scope of a specific variable begins at the end of its declaration.
<kirkmcdonald>	guest64688: a multiple declaration like that will declare all of the names which are not declared in the current scope.
<kirkmcdonald>	not already declared*
<guest64688>	kirkmcdonald: aha!
<guest64688>	that makes sense
<kirkmcdonald>	guest64688: thus, line 15 of your example declares a new 'err' in the current block, but does not redeclare 's'.
<guest64688>	but is there a way to still access the vars from the outer scope?
<kirkmcdonald>	guest64688: no. they are shadowed.
<mohae>	guest64688: not if it's defined in the inner scope
<kirkmcdonald>	(or maybe it's better to say "occluded"...)
<chris_s>	i'm seeing a build failure for the current git master that i believe is not being spotted on the buildbots. is there a good place to report this? here?
<cespare>	chris_s: no; file an issue
<cespare>	chris_s: or write an email to golang-nuts if you want someone else to sanity check
<chris_s>	if i'm right, anyone pulling git master and building on unix as a non-root user will be seeing this right now, so i'll file an issue as soon as i've confirmed the exact changeset.
<cronos>	chris_s: what's the issue?
<cronos>	perhaps it's something local for you
<chris_s>	--- fail: testscmcredentials (0.00s): creds_test.go:60: writemsgunix failed with write unix @-><nil>: sendmsg: operation not permitted, want eperm. syscall/creds_test.go assumes a net.operror.err is directly syscall.eperm, but i think commit 055ecb7be5805e07498488c59c6f01644fdacccc changed that. the entire test is conditional on uid != 0.
<cronos>	yeah, sounds like an issue
<chris_s>	i assume buildbots either run as root or fake it in a virtualization environment/container/etc.
<eatingthenight>	mohae: i have it so it takes about 11 seconds now to parse a 3.2gb file.
<mohae>	eatingthenight: how long was it taking before?
<eatingthenight>	about a minute
<mohae>	nice
<mohae>	eatingthenight: good job
<eatingthenight>	mohae: thanks for the help going to try and see if i can speed anything else up, maybe taking out the append new line will help since it does it every line.
<mohae>	eatingthenight: if you want further improvements, i think you'll need to profile
<mohae>	eatingthenight: bytes,buffer instead of append would be faster and less gc pressure
<chris_s>	there, issue submitted. thanks for the advice!
<moter8>	woah, ubuntu still has 1.2 in its repos
<nemith>	15.04 is 1.3.3 :(
<aram>	just use the official binaries
<aram>	or compile from source
<aram>	it takes literally 30 seconds to compile.
<nemith>	just a pain to have another thing to manually update
<moter8>	hmm, trying to set it up but it doesnt work
<moter8>	ls /usr/local/go/bin exists
<moter8>	echo prints out the correct path, yet go fails
<moter8>	wait, there is no bin folder
<moter8>	nevermind, wrong archive
<mohae>	downloading the compiled tarball and extracting it takes 2 commands, which is the same as updating your repo and installing
<mohae>	more chars though
<st33med>	i don't see the point of rolling release if a lot of things aren't released with it up to date
<st33med>	er monthly
<nemith>	mohae: for one package
<st33med>	6 months more like
<mohae>	for 1.5 a bit longer
<moter8>	"rollign release"?
<moter8>	ubuntu isnt rolling release
<mohae>	nemith: well, there's a lot of things for which the package manager isn't the best route.
<st33med>	i corrected myself
<moter8>	aah
<mohae>	st33med: that's up to the package managers, not go
<nemith>	mohae: like?
<moter8>	sorry :)
<nemith>	i do agree that it's not go's fault
<st33med>	yep i'm aware mohae
<smw>	st33med, 6 months gives them time to do some quality control
<st33med>	yep. though 1.4 was released during that time.
<mohae>	i'd rather have 6mos than 6 weeks
<st33med>	way before package freeze
<mohae>	st33med: package manager versions will usually be out of synch with current
<st33med>	mhm
<aram>	nemith: it's only once every 6 months though.
<aram>	i agree it's non-ideal.
<aram>	you should complain to canonical.
<nemith>	not really.  that is major releases only
<nemith>	minor releases are more frequent
<aram>	that is true.
<djx>	hey, does anyone have a repo with some sort of plugins implemented in go?
<moter8>	uh, plugins?
<moter8>	what are you looking for
<djx>	moter8: not plugins for go, but a particular piece of software that has the possibility to have plugins
<djx>	moter8: nothing in particular, i can't figure it out the best way to solve a problem that i have in my hands, i'm "studying" what's out there to see if there's anything that comes to my head
<moter8>	ah i see what you mean, sorry, i dont know of any
<zuz>	djx: i would imagine some large go project might support plugins, maybe fleet?
<djx>	moter8: i'm having sort of a writers' block :-)
<djx>	zuz: looking at it
<djx>	zuz: coreos/fleet?
<mohae>	djx: packer uses plugins
<zuz>	yes, i'm not well versed in the project structujre
<mohae>	or supports
<djx>	mohae: https://github.com/mitchellh/packer this packer?
<feliwir>	hi
<feliwir>	how do i use go on windows properly? the getting started guide doesn't say how to setup up workspace etc. on non unix platforms
<v0idcat>	djx: best bet is probably rpc
<djx>	v0idcat: the "normal" rpc or that is a go project?
<vzp>	why would i get a "bad map state" panic accessing a mutex guarded map?
<vzp>	go version 1.4.2 btw
<v0idcat>	djx: yes, normal rpc. load and unload "plugins" by spawning processes of your go programs and communicate between them and your "main" by rpc
<djx>	v0idcat: yeah... i really have to decide that too, if the plugins can be accessible by rest or whatever or a subroutine..
<bnagy>	feliwir: yes it does
<djx>	hmm or both...
<v0idcat>	djx: that's a different topic
<bnagy>	feliwir: it's just simpler than you maybe expected. you just set gopath and make sure the bins are in path.
<v0idcat>	djx: and in theory, while all still abstract at this point, "plugins" aren't directly accessible. your main process handles the communication between them and the world
<skelterjohn>	jmoiron: you around?
<skelterjohn>	or anyone else, experience using mysql + ssl cert + go client?
<feliwir>	bnagy: do i need to set it each time?...
<jmoiron>	skelterjohn: i've never used mysql w/ ssl from go
<djx>	v0idcat: yep
<skelterjohn>	jmoiron: oops, meeting, poorly timed question
<feliwir>	bnagy, doesn't say anything windows specific apart from that: https://golang.org/doc/code.html
<bnagy>	you said the getting started guide
<bnagy>	i am looking at a windows section, an msi installer, instructions for setting your environment variables...
<feliwir>	yeah it doesn't say anything aswell.. it just links on that page
<feliwir>	i know how to set those, but i don't want to pollute all my environment variables^^
<bnagy>	none of the instructions in how to write go code are platform specific, they just describe a directory structure afaict
<hfaafb>	pollute your env vars with... one or two vars?
<bnagy>	you don't want to "pollute" your environment variables huh
<hfaafb>	are these real complaints
<feliwir>	:d
<esarl>	is there a way to map a function to an integer like map[int]func? trying to do something like this https://play.golang.org/p/da_ghl7gp-  not sure how to get it to work
<bnagy>	esarl: make the function a type
<bnagy>	(i didn't look at your link sry)
<yalue>	is there any case where a := myarray[:num:num] is not the exact same as a := mayarray[:num] ?
<smw>	esarl, you need to know the function signature
<esarl>	type shiftfn func(date, int) date <- i tried this and i got a syntax error lol
<cronos>	esarl: https://play.golang.org/p/inhwe-1jfb
<smw>	esarl, map[int]func(string) int would be a map of functions that take a string and return an int
<cronos>	esarl: that type is fine, your map declaration was wrong
<cronos>	can't use := on package level
<esarl>	oh, oops
<esarl>	doh… haha thanks!
<cronos>	yalue: yes, when cap(myarray) != num
<mohae>	djx: yes
<bnagy>	i have never used full slicing :/
<bnagy>	is there a well known pattern for it?
<smw>	what is full slicing?
<mohae>	[:]?
<bnagy>	it's not instantly obvious to me why the cap is max-low
<bnagy>	blah[1:3:5]
<mohae>	oh, including the cap?
<smw>	bnagy, mostly good for memory allocation from a slab
<smw>	bnagy, something like memcache would probably find it very useful if it were written in go
<smw>	bnagy, it allows you to build an allocator on top of go.
<bnagy>	but how would the cap be used there?
<bnagy>	as opposed to doing arithmetic on low:hi
<smw>	bnagy, a client requests 5mb, you send it a 5mb slice of your memory and know they won't modify memory sent to other clients
<bnagy>	ok, but how is it better than sending them chunk[:5001] ?
<smw>	bnagy, as i said, memory allocation :-)
<bnagy>	ignoring real mb
<smw>	bnagy, they can't use append and expand chunk
<bnagy>	oh!
<bnagy>	ok, cool :)
<smw>	bnagy, i have never actually used it. but it has certain uses :-)
<bnagy>	and now why is it max - low ?
<smw>	why is what max-low?
<bnagy>	if i want to hand out chunk[5000:10000:10000] (to get cap 5000)
<bnagy>	i guess it's as intuitive as [5000:10000:5000]
<smw>	bnagy, because 0 is now 5000
<bnagy>	and less error prone
<bhenderson>	is the fact that range returns copies surprising to anyone else? http://play.golang.org/p/jrgijj2lyw
<smw>	bnagy, no, it is much more intuitive, it is giving the cap as a position instead of a length
<hfaafb>	i'm sure its surprising to at least one person
<cronos>	not surprising at all
<bnagy>	smw: yeah ok i am getting it now. thx :)
<smw>	bhenderson, assignment caused a copy of the value... that always happens
<yalue>	cronos, others, thanks for the explanation. it makes sense now. i was just confused by the specification saying the syntax was "a[low : high : max]"
<yalue>	i didn't make the connection that "max" == "cap" in this case
<bhenderson>	smw: ah, interesting
<bhenderson>	didn't think of it like that
<dani2981>	hi, i am using io.readfull and i got a eof error. my reader is a network connection. this error happens in, lets say 20% of the connections. anyone has a idea of what is the problem ?
<smw>	dani2981, you are getting disconnected?
<smw>	the server sent all of its data before you were ready?
<smw>	dani2981, you are getting eof or unexpectedeof?
<saml>	how do you generate rss or atom?
<dani2981>	smw:eof
<v0idcat>	saml: probably http://www.gorillatoolkit.org/pkg/feeds
<saml>	noice
<cronos>	dani2981: is there supposed to be as much data as you ask it for sent?
<v0idcat>	!choice nice noise
<smw>	dani2981, huh, you are not supposed to be able to get an eof from readfull...
<cronos>	smw: "the error is eof only if no bytes were read"
<smw>	cronos, ah, didn't see that
<dani2981>	cronos: yes, it is only 4 bytes. this 4 bytes are a indicator of the size who comes after.
<cronos>	so yeah, presumably closed connection
<bnagy>	closed reader?
<saml>	no, gorilla feeds don't have many fields like.. <category>
<dani2981>	cronos : this is a server application. i am pretty sure i did no close the connection on the server side.
<bnagy>	those wacky bidirectional comms protocols
<cronos>	client disconnected then
<cronos>	or if you have some weird load balancer it can kill connections after some timeout
<dani2981>	it is a very simple file transfer server. i did receive 4 bytes with the size of the file. to this i make a readfull. after this i do another readfull with the size encoded on this 4 bytes.
<dani2981>	cronos : no load balancer,
<bnagy>	you might want to try not readfull for that protocol, fwiw
<bnagy>	but not saying it's related to your problem
<cronos>	dani2981: wait, so you attempt to read up to 4gb into memory?
<cronos>	doesn't sound safe
<cronos>	stream your stuff and use io.limitreader
<cronos>	or better io.copyn
<feliwir>	what exactly does this mean:
<feliwir>	e:\development\godev>go get github.com/go-gl/glfw/v3.1/glfw
<feliwir>	# github.com/go-gl/glfw/v3.1/glfw
<feliwir>	cc1.exe: sorry, unimplemented: 64-bit mode not compiled in
<cronos>	i like how it apologizes to you
<dani2981>	cronos: you are right. 4 bytes is too much. but no the files are  200k or 300k max. pictures send from a android application. no need to 4 bytes to encode the size.
<feliwir>	yeah, but it doesn't say anything after in
<sauerbraten>	i tried using pprof (following that blog article on benchmarking), but "top" in pprof only gives me this: http://pastie.org/10161726
<sauerbraten>	what's wrong there?
<bnagy>	sauerbraten: osx?
<cronos>	dani2981: there's still no point in loading all 300kb of image into memory
<sauerbraten>	bnagy: nope, ubuntu 14.04.2
<sauerbraten>	go1.4.1
<bnagy>	ok i guess i need to click the link then :(
<bnagy>	wait, can't, pastie
<bnagy>	sorry
<cronos>	can't?
<sauerbraten>	wot
<bnagy>	rigid ethical strictures
<sauerbraten>	bnagy: http://pastebin.com/8kwahrwe
<feliwir>	anything about my issue?
<igors>	hello. is there any command line tool to, given an interface, show me which types implement this interface in a given package?
<bnagy>	feliwir: something is 32 bit when it should be 64
<cronos>	igors: https://github.com/dominikh/implements
<bnagy>	sauerbraten: isn't it top n ?
<bnagy>	haven't used it for a while...
<igors>	cronos: perfect, thanks :)
<feliwir>	bnagy: but what exactly? my os is 64bit and the go installation aswell
<sauerbraten>	bnagy: top10 gives the same
<bnagy>	huh.
<cronos>	your c compiler probably
<dani2981>	cronos : i undestand this. i will change to it read not all in the memory on the next version. but my issue is on read the first 4 bytes.
<feliwir>	i just compiled the go msi thing... i didn't mess with any c compilers
<cronos>	dani2981: as i said, most likely your client closes the connection
<bnagy>	feliwir: are you using all the things glfw says you need to use?
<feliwir>	https://github.com/go-gl/glfw
<bnagy>	go 1.4 or a specific mingw?
<feliwir>	it only says i should use go get
<feliwir>	i use go 1.4
<dani2981>	cronos: this is the code i use to send the file. it is java, it is without the error handling. https://gist.github.com/anonymous/6ea66caac79d61332590
<feliwir>	go version go1.4.2 windows/amd64
<dani2981>	cronos : in fact i close the connection just after i send my file. should i expect a server answer before close it ?
<bnagy>	feliwir: and you have mingw etc?
<cronos>	dani2981: i don't know, depends on what your protocol is
<feliwir>	bnagy: i have a mingw installation, but i don't see how it is related to go^^
<cronos>	i was under the impression that your server reads multiple files on that connection
<bnagy>	feliwir: isn't this a binding lib?
<cronos>	dani2981: you should at least log when your client disconnects so you can match one of those eofs on server with client disconnect
<feliwir>	bnagy: it's a c binding yea, but the repository says i don't have to compile the binding myself
<dani2981>	cronos: no just one file per connection.
<feliwir>	quote: installation is easy, just go get github.com/go-gl/glfw/v3.1/glfw and be done (glfw sources are included so you don't have to build glfw on your own)!
<bnagy>	how is it going to build gl source without a c compiler?
<bnagy>	confused
<dani2981>	cronos: there are no standart protocol involved. in fact i am defining the protocol.
<cespare>	feliwir: you need a 64-bit compiler
<cronos>	well then you have to define whether your server sends the response or no ;)
<cespare>	c compiler
<cespare>	feliwir: those glfw sources are c code that is failing to compile because you do not have the appropriate compiler
<feliwir>	cespare, can i use the 64-bit msvc compiler somehow?
<cespare>	feliwir: i'm about 75% sure the answer is no, but i really don't know much about windows
<dani2981>	cronos: the client disconnects just after it send all the file. on line 10 of the gist file. https://gist.github.com/anonymous/6ea66caac79d61332590 this is a problem ?
<cespare>	feliwir: (pretty sure you want mingw)
<cronos>	nope, looks reasonable, as long as that socket implementation is reasonable and blocks write until all packets were acked
<bnagy>	dani2981: also slightly ot but check eg netstrings
<bnagy>	if you want a very light wire encoding with more than zero checking opportunities
<feliwir>	cespare: i have mingw32. i don't see any official mingw64 or sth like that
<secrettriangle>	hey, so i'm trying to check if &s != nil, but it's returning true even when it's not
<cronos>	dani2981: i don't remember enough java to help you on the client side. i could at most look at your server code and try to catch any issues
<cronos>	secrettriangle: what's s?
<cespare>	feliwir: ah. well, that's where the "sorry" error is coming from, probably :)
<cronos>	secrettriangle: a string?
<cespare>	feliwir: some googling does seem to indicate that there is a 64 bit mingw
<feliwir>	yeah i am installing something promising
<feliwir>	http://sourceforge.net/projects/mingw-w64/
<bnagy>	dani2981: and not to teach you to suck eggs but this sounds like around the point where a packet sniffer comes in handy
<gerep>	hi all, i'm reading this post about errors http://blog.golang.org/error-handling-and-go and i came to this line: "the fmt package formats an error value by calling its error() string method. " my doubt is, how does println knows the variable is an error instance?
<bnagy>	30 seconds with wireshark can save an hour :p
<cespare>	feliwir: did you try the official installation instructions?
<cespare>	feliwir: http://www.mingw.org/wiki/getting_started
<cronos>	gerep: type assertion
<secrettriangle>	cronos: a struct
<feliwir>	cespare: are you sure i need mingw? couldn't i just get gcc.exe
<cronos>	secrettriangle: well, if s is struct{something} it can't be nil
<gerep>	cronos: ok, thanks ;)
<cronos>	secrettriangle: it is a struct somewhere in memory even though the fields may not be set
<cespare>	feliwir: no, i'm not sure of anything to do with windows
<cronos>	so &s will always return non-nil
<dani2981>	bnagy: what i am doing is something like netstring, but in a binary way.
<bnagy>	dani2981: yeah except without anything that lets you check errors
<cronos>	dani2981: bnagy's suggestion is most promising, wireshark it
<dani2981>	cronos: i want to forget java too and only work on go. but on the android side it is not possible.
<bnagy>	it is! :d
<cronos>	well, that's not exactly true
<cronos>	you can run go code on android
<bnagy>	well you still do need to mess with java
<bnagy>	but you can write large chunks of your stuff in go
<feliwir>	got it :d
<bnagy>	and the new android stuff lets you provide java devs with a jni onto go stuff
<bnagy>	which is pretty slick
<cespare>	feliwir: cool :)
<dani2981>	bnagy: can try to sniff the packets but it looks so simple to need all this.
<bnagy>	ime inter-language client server is never simple :`(
<feliwir>	thanks guys
<bnagy>	feliwir: gluck
<secrettriangle>	cronos: so how should i check if it's 'nil'?
<bnagy>	secrettriangle: structs can never be nil, pointers can, although they can also be typed nil
<bnagy>	secrettriangle: start with fmt.printf("%#v\n", thing) and see what's actually happening
<secrettriangle>	i see it being printed out with empty values, yes
<cronos>	sacktown: you can't, you can at most compare it to an empty struct
<secrettriangle>	but what i don't understand is how to check if the value is 'empty'
<cronos>	if s == stypep{} {blabla}
<cronos>	compare it to an empty value
<bnagy>	secrettriangle: if you did exactly what i typed you'd see the type and everything
<tv`>	secrettriangle, cronos: usually at that point you want a pointer
<cronos>	yeah
<feliwir>	is anyone here using notepad++ for go?
<bnagy>	xd
<dani2981>	bnagy and cronos: looks like the problem is the connection close on the client side. i just made a tests where i add a sleep of 2 seconds before the connection close and no more errors.
<cespare>	feliwir: i used to use notepad++ for all my code. that was ~10 years ago though
<cronos>	dani2981: perhaps there is some "flush" method or something on that socket
<feliwir>	cespare: so what texteditor are people using for go? i'd  like syntax hightlighting :d
<cronos>	vim!
<feliwir>	i looked at this: http://www.vim.org/ looks a bit oldschool though :d
<cespare>	feliwir: i use vim. maybe check out sublime text + gosublime?
<fozz_>	i use sublime and gosublime +1
<bnagy>	st is a great option if you don't want to spend 20 years learning vim
<fozz_>	vim has some great plugins alo
<cronos>	yeah, if you're not willing to spend weeks learning how to use your editor, try sublime
<fozz_>	*also
<cronos>	that visual studio code looks promising too actually
<cronos>	but way too immature atm
<bnagy>	dani2981: that sounds like a weird client tcp stack, but yay!
<dani2981>	bnagy and cronos: so i think the real solution is to get a ack on the protocol. after the server read all data it send one ok or error byte. the client must read this byte before close the connection.
<bnagy>	dani2981: sleep is going to be fragile though
<bnagy>	yep, you're on it. cool :)
<deniska>	i learned basic vim to be already more productive than in your average single mode editor in like a week =)
<cronos>	sounds like a good approach dani2981
<dani2981>	bnagy : yep, sleep is fragile. just post about a ack message.
<deniska>	the hardest part was actually learning to launch vim instead of gedit =)
<deniska>	i even considered making an alias
<feliwir>	gosublime only adds a commandline to sublime? :d
<bnagy>	*shrug* i don't know what an "average single mode editor" is
<dani2981>	cronos : in fact i want the server send back a sha1 hash of the file to be sure it arrived correctly.
<deniska>	bnagy: pretty much every editor. except for emacs and vim =)
<bnagy>	but i used vim pretty much daily for 20 years and 2 months with st i'm more productive
<mischief>	:|
<bnagy>	so i am asserting personal incredulity
<cronos>	dani2981: that's fine too, although tcp should handle that for you
<bnagy>	it takes two weeks just to set up a new vimrc :)
<deniska>	well, to each its own. but if you use vim, learn more keys than hjkl :p
<bnagy>	anyway i still love vim and there are lots of times when you're on tty
<deniska>	and writing vimrc is a gradual process =)
<bnagy>	yes
<bnagy>	which is why your one week claim is bullshit
<tjscanlon>	hi everyone, reading through go style guidelines: should struct members be in pascal case? (e.g. variablename instead of variablename)
<tjscanlon>	i couldn't find it anywhere in the guidelines but i saw it was pascal case in the few open source projects i looked at.
<cronos>	pascal case? heh, never heard that one
<cronos>	tjscanlon: no, it all depends on whether you want them exported or no
<tjscanlon>	ahhh.  so a variable will be "private" if it begins with a lower case and public if it begins with a capital?
<tjscanlon>	i saw that's the case for structs.
<cronos>	yep
<tv`>	tjscanlon: http://tour.golang.org/
<cronos>	that's the case for all top-level identifiers
<tv`>	well, tour doesn't explicitly say it's true for struct fields
<tv`>	but go tends to follow very few rules, uniformly
<dani2981>	bnagy and cronos: just implemented the ack on client and server. it is working fine now. thanks for the help.
<bnagy>	dani2981: your protocol still scares me ;)
<bnagy>	btw did you switch to copyn or limitreader at the server?
<dani2981>	bnagy : why ? i think keep it simple is the best. and in fact as i say i will make some improvements on it. but what is your idea ? use something like protobuf ?
<bnagy>	noooo protobuf way too heavy
<feliwir>	hm, when i execute build in sublime text it wants to do this command: go run go install github.com/feliwir/gogame
<feliwir>	is this even a valid command?
<bnagy>	i just get nervous when i have no way to validate the size, but i guess there's nothing _wrong_ with your 4 byte size
<bnagy>	doing limits at the server is more of an issue
<bnagy>	because despite the size a malicious client can just keep pumping data at you if you use readfull
<dani2981>	bnagy : i understands you concerns. but i can close the connection if i see a too big size without problems, right ? and as i say before to read the full content i will not read the full content on memory with readfull.
<cronos>	"seeing too big size" is exactly what io.copyn will help you with
<lopson>	hi everyone! does anyone in here have any sort of experience with gccgo and using it to get a c program to use go functions? i've read the setup page, put i can't get it to work as intended.
<sciffer>	hi, if i issue os.exit(1) form a function that runs asynchronously - will it close the whole application or just the function itself?
<sciffer>	i'm asking since the function run's in it's own 'thread', anyone knows the answer?
<hyphenated>	sciffer: it'll exit everything immediately
<cronos>	sciffer: os.exit terminates the process
<tv`>	sciffer: documenation. http://golang.org/pkg/os/#exit
<tv`>	"immediately" is a strong word
<tv`>	and "program", too
<sciffer>	is it o.k. to do that from such a function instead of using channel to notify the parent that an error occurred and it should close
<sciffer>	the documentation is not very clear as to whether it can be done from such function (it's just says that deferred functions will not run, the async function has it's own deferred functions that will surely not execute).
<hyphenated>	sciffer: it's a bit rude and brutal, compared to erroring out, logging something meaningful and then exiting
<vzp>	any ideas why i would get a "fatal error: bad map state" panic when accessing a mutex guarded map?
<belak>	are there any good packages for converting between two units of measurement?
<saidinwot>	vzp: sample code?
<tv`>	belak: https://github.com/dustin/go-humanize
<tv`>	vzp: sounds like you didn't guard it with a mutex
<robot-beethoven>	what's a good way to revese a (non-sorted) []float32?
<duey>	reverse?
<duey>	do you mean sort in descending order?
<duey>	or loop over the array in reverse order?
<cespare>	robot-beethoven: for i := 0; i < len(f)/2; i++ { f[i], f[len(f)-i-1] = f[len(f)-i-1], f[i] }     ?
<cespare>	may be buggy
<cespare>	and would be nicer without len(f) etc
<robot-beethoven>	lets's say `len(myslice) == 3`.  i'd like the index formerly known as 0 to now be 2, and so on...
<tv`>	https://github.com/golang/go/wiki/slicetricks
<duey>	ah
<vzp>	tv`: i did and it is clear from the stack trace, called function calls lock and defer unlock in first 2 lines
<robot-beethoven>	tv`: did you just add that "reverse" section to the wiki?
<robot-beethoven>	or did i just not scroll down enough when i checked it a minute ago
<tv`>	vzp: you claim to have clearly aimed the shotgun at the target, but that does not rule out that you put your foot in between the muzzle and the target
<cespare>	vzp: really would need to see code to give much helpful advice.
<vzp>	cespare, tv` : i know, trying to simplify code so i can share it
<mohae>	robot-beethoven: it's been there
<mwhudson>	iant: i guess i missed the chance to rewrite ld to use debug/elf for all the types and constants before the freeze
<iant>	mwhudson: yes, i think so
<mwhudson>	ah well
<iant>	there is still time to finish up all the -buildmode=shared work, of course
<iant>	is the support in yet for verifying that the hash code of the shared library matches at link time and runtime?
<mwhudson>	no
<mwhudson>	that's today's job
<iant>	awesome
<mwhudson>	be warned i've been saying this for a few days :)
<mwhudson>	but i think i should actually get to it today
<iant>	ok....
<mwhudson>	(just testing my latest version of that pcrel change before letting the trybots at it)
<bnagy>	spng: convention is to use pointers when you need nil to have a usefully different meaning to zero-value member
<spng>	bnagy: ok. well i guess that’s my problem in a nutshell
<bnagy>	but i thought that was what omitempty was for
<spng>	bnagy: no, omitempty fails when i need to set a string to “”
<bnagy>	well that's a value
<spng>	but it works if i want to set a *string to “”
<mohae>	a string's zero value is ""...
<spng>	omitempty will omit a string with value of “”
<mohae>	because it
<spng>	so when i want to say change a title:”foo” to title:“” it wont work
<bnagy>	on a *string?
<mohae>	because that's empty
<mohae>	*string would be nil
<spng>	mohae: yeah, that’s why i’m considering changing title string to title *string so i can leverage omitempty
<mohae>	spng: doesn't sound like you want to omit empty in that situation
<spng>	mohae: when i’m persisting the data to mongo, i’m only sending in the delta, so i would need to omitempty
<quiznilo>	rest makes no sense
<spng>	quiznilo: haha. is that directed at me?
<quiznilo>	it possibly doesn't make sense to me because it piggy-backs on already existing http verbs i've used to deal web pages
<mwhudson>	iant: i don't know, maybe it's the fault of my change or something odd about my syste,
<mwhudson>	m
<quiznilo>	no
<cespare>	mwhudson: a bug was filed a bit earlier
<bnagy>	spng: http://play.golang.org/p/3lwychesrx this is how i thought it worked
<quiznilo>	spng: i've been reading some article about rest and go for awhile now... they seem to assume you know all about rest already
<bnagy>	why is that not what you want?
<mwhudson>	cespare: i see the golang-dev thread, is there a bug too?
<mwhudson>	oh yes
<mwhudson>	yay for processing mail at a million miles per hour
<spng>	bnagy: minor change to the omitempty: http://play.golang.org/p/pdvjygsxcm
<bnagy>	uh.. if you like
<spng>	quiznilo: i feel ya. i have perosnally found that rest is very idealisitic.
<tv`>	quiznilo: it's ok, most people who write rest services don't now rest
<spng>	bnagy: the difference is in the output. your version was not implementing omitempty
<quiznilo>	lol
<bnagy>	spng: ah :)
<mwhudson>	iant: do you have an opinion about https://go-review.googlesource.com/#/c/8685/ ?
<mohae>	spng: from the behavior you describe you want from a string element, there's no need for it.
<mwhudson>	iant: it's sort of an unsupported use case
<bnagy>	derp
<tucnak>	why is it called #go-nuts?
<tucnak>	i mean, why nuts?
<iant>	mwhudson: i hadn't looked at it for some reason
<iant>	i guess i missed it
<quiznilo>	'nuts' as in synonymous with 'fanatics'
<quiznilo>	'enthusiasts'
<iant>	oh, i didn't really look at it because the comment says it doesn't really work
<quiznilo>	also, it's a double-entendre
<tucnak>	quiznilo: alright, that makes sense
<mwhudson>	iant: it's been sitting in my repo for ages but i haven't really thought about it for a while
<quiznilo>	as in... go crazy
<mwhudson>	iant: i should either push or abandon it, can't make up my mind :)
<quiznilo>	as in, don't take the channel to seriously, people here aren't too stuffy like some other language-based channels, i won't mention
<quiznilo>	java
<quiznilo>	actually, i don't know anything about the java channel... i've had some really bad experiences in the javascript channel though
<tucnak>	quiznilo: >after mentioning that i was thinking of using redis (being used in conjunction with twemproxy, smitty, and redis sentinel) as read-only storage for the endpoint data, #go-nuts user kaos` on freenode suggested that i eat "mashed glass".
<quiznilo>	well yeah, you'll find strong opinions here... that's for sure
<tucnak>	hehe
<quiznilo>	i'm sorry he was rude to you
<tucnak>	not to me in fact
<tucnak>	that's a quote
<iant>	mwhudson: in so far as i understand cl 8685, it doesn't seem like something we want to encourage
<iant>	at least not yet
<tucnak>	just was damn so fun, i was laughing out loud for some time
<quiznilo>	ya hehe
<mwhudson>	iant: fair enough
<mwhudson>	iant: finally for now, i still don't understand quite what you mean at https://go-review.googlesource.com/#/c/8773/17/src/cmd/6l/asm.go@141
<iant>	mwhudson: i don't really understand what i wrote either
<mwhudson>	iant: that makes me feel better :)
<iant>	mwhudson: but what i'm hoping is that we can avoid generating the call
<iant>	mwhudson: instead, just generate a variable
<iant>	a struct that holds the local hash value and a pointer to the symbol from the shared library that holds the shared library value
<mwhudson>	iant: that would be nice
<iant>	maybe i wrote "slice" where i meant "struct"
<mwhudson>	iant: well we have the moduledata already
<iant>	good, let's use that
<mwhudson>	iant: so we could put the hash in the module data, and have a reloc point another field to the global variable (defined by the object linking to the shared library)
<iant>	right
<mwhudson>	so then addmoduledata can just compare them
<iant>	yes
<iant>	sgtm
<mwhudson>	ok good, i think that can work
<iant>	biab
<mwhudson>	of course addmoduledata is currently written in assembly following the platform abi but well we can work with that
<iant>	don't harsh my mellow
<mwhudson>	:)
<eparis>	so i'm in a place where if i get an error back from a function it means that the code is wrong. ex my code requires a comma seperated list but someone using my code passed in a dash seperated list. i'd probably use an assert() in c, to make it blindingly clear it wasn't the user's fault and be able to get a clean backtrace/coredump.  in golang, best i can do is just propogate up an error, huh?
<eparis>	this is not something the user of the code has any control over.
<quiznilo>	wait
<quiznilo>	if the user passed in data in the wrong format, that's the user's fault, no?
<hfaafb>	even if the user passed it in correctly, its still the users fault
<quiznilo>	lol
<eparis>	quiznilo: i'm writing a library, it the programmer who uses it passes in an invalid default value, it a programming problem, i'd typically handle that different in c, that if the user passed in a different value
<quiznilo>	i can't answer his question because i don't know anything about c or assert(), so i'll shut up
<eparis>	quiznilo: basically assert() just exits immediately and dumps core
<quiznilo>	like panic()
<quiznilo>	no?
<mohae>	error would be much friendlier in that situation
<mohae>	and if the dev uses your library wrong, it's on the dev
<eparis>	mohae: totally on the dev, agreed
<quiznilo>	you can creat some custom error, and detect it and print out hints and crap
<quiznilo>	i dunno
<mohae>	just return an appropriate error
<mohae>	better than panicing
<mohae>	yo, i thought errors were too messy so i decided to give you this stack trace instead and abend
<eparis>	but programmers (who screwed it up) can use stack traces.
<quiznilo>	i'm just saying, his description of assert() sounds to me like panic()
<eparis>	quiznilo: i think it is.  now i have to decide if i want to use it
<eparis>	(although panic() is way more powerful)
<mohae>	quiznilo: it is, i'm just saying it's silly to panic in this situation
<mohae>	it's an error, treat it as such
<quiznilo>	or an error message "err: data is in invalid format"
<quiznilo>	can get it as fancy as you want
<st33med>	what situation?
<mohae>	when you forget your towel st33med
<st33med>	fuck.
<st33med>	well don't panic
<mohae>	don't panic!
<mohae>	heh
<darius93>	whats the best way to do something similar to enum in go?
<st33med>	enum?
<mohae>	iota
<st33med>	enum t { i := iota, j, k...
<st33med>	iirc
<st33med>	oh wait
<st33med>	const ( i = iota; j; k; ...
<st33med>	http://stackoverflow.com/questions/14426366/what-is-an-idiomatic-way-of-representing-enums-in-golang
<r00trunner>	what should i prefer? http://ix.io/iiv
<darius93>	thanks
<quiznilo>	either is idiomatic
<darius93>	r00trunner, i always do option 2. i find it cleaner to look at
<darius93>	but both work just the same
<r00trunner>	darius93: yes, that's what i thought, too
<r00trunner>	darius93: yeah, i know both work. just wanted to here some opinions
<mohae>	https://godoc.org/golang.org/x/tools/cmd/stringer
<quiznilo>	hate consts
<quiznilo>	magic crap
<quiznilo>	i've never seen a const that didn't belong in some conf file instead
<tv`>	wat
<tv`>	this just in: max value an int can store should be configurable
<mohae>	quiznilo: so these should be in conf files? http://golang.org/src/text/template/parse/node.go
<quiznilo>	lol!
<quiznilo>	your choice, if you like brittle apps
<thun_>	i have main.go with this code... https://play.golang.org/p/p1cisk9dph
<mohae>	might want to send a note to the go team to warn them
<quiznilo>	the largest int is driven by inviolate mathematical properties
<thun_>	here is the hello.go https://play.golang.org/p/_e8cejzvb4
<quiznilo>	it's hardly magic
<thun_>	when i run i get ./main.go:6: undefined: hello
<mohae>	quiznilo: you still haven't addressed why const usage in stdlib should be in conf files instead
<andreas_kushner>	joushou: yesterday you mentioned that go excels at the type of thing i was using apache for. i meant to ask if you agreed with the opinion in this blog post http://www.mikeperham.com/2015/01/05/cgi-rubys-bare-metal/ which basically  recommended using apache and cgi to create a more stable ecommerce setup?
<mohae>	thun_: because you don't have a hello() function
<tv`>	quiznilo: sounds like not configurable, then...
<thun_>	mohae: it is in another file called hello.py
<mohae>	thun_: oh, we're in #python?
<thun_>	doh
<quiznilo>	i'm sorry, i don't know bitwise ops, but will the solution to '1<<63-1' ever change?
<thun_>	mohae: https://play.golang.org/p/iyegzewhbb
<thun_>	two simple files in one dir, i type go run main.go
<wrecker>	guys, i need 1-2 gophers for a decent sized project.  msg me if you're interested..
<mohae>	thun_: just how do you expect go to use the python file?
<tv`>	quiznilo: 1. who said 63  2. why should i repeat that
<thun_>	it is not .py
<tv`>	quiznilo: 3. how is my poor reader supposed to intuit the meaning
<thun_>	it is .go -- just been coding in python all day
<mohae>	thun_: oh
<mohae>	thun_: go run only runs the file specified
<mohae>	or fiiles
<quiznilo>	i'm saying... good point tv`
<quiznilo>	but this isn't quite what i was talking about
<tv`>	quiznilo: yes, you were spouting your mouth off ;)
<thun_>	it does not auto include all files with same package name?
<quiznilo>	meh
<tv`>	feel free to make a valid point...
<tv`>	thun_: use go build
<mohae>	thun_: you specified the file, why would it use files other than what you tell it to?
<mohae>	and what tv` said
<thun_>	mohae: are you saying go i have to manually include all files of the same package?
<tv`>	thun_: no. use go build.
<quiznilo>	you do if you use 'go run'
<bnagy>	thun_: you should try go build
<tv`>	thun_: oh and whatever shitty blog told you to use go run, ship the author a box of poo
<mohae>	thun_: if you want to use go run yes, because it's not designed to do what you are doing
<bnagy>	don't know if anyone has mentioned yet
<mohae>	i hear there's a site for that!
<tv`>	mohae: i recommend organic, locally sourced poo for all your shipping needs
<thun_>	 go build main.go -- ./main.go:6: undefined: hello
<quiznilo>	s/hello()/main()
<tv`>	thun_: http://golang.org/doc/code.html
<quiznilo>	all go apps need a 'main()'
<tv`>	quiznilo: so not his problem
<mohae>	tv`: i knew my dog would be useful for something
<quiznilo>	it is for the go playground link he posted
<mohae>	which isn't really the problem he's having
<bnagy>	thun_: just go build
<bnagy>	then enter, i guess
<quiznilo>	[enter]
<thun_>	bnagy: ty
<andreas_kushner>	ok, person i was speaking to yesterday doesn't appear to be here (or declined to answer :), anyone else agree or disagree with opinion  in this blog post http://www.mikeperham.com/2015/01/05/cgi-rubys-bare-metal/ which basically  recommended using apache and cgi to create a more stable ecommerce setup?
<tv`>	andreas_kushner: my response is "lol cgi"
<cespare>	andreas_kushner: wrong channel?
<tv`>	also, this person thinks cgi has something to do with bare metal, what a rockstar ruby ninja
<andreas_kushner>	ok, thank you. the person who wrote that blog post is an experienced backend dev (and also creator of a golang based monitoring system inspeqtor)...
<tv`>	andreas_kushner: no, he's not
<tv`>	or he fails to communicate it pretty spectacularly
<bnagy>	. o o ( popcorn.gif )
<quiznilo>	:allears:
<andreas_kushner>	cespare: well, i was on here yesterday asking about implementing the idea in go using its cgi library, and joushou made a remark that i didn't really need to use apache because go excels at this type of work, so i wanted to show him the blog post
<cespare>	andreas_kushner: that post is about ruby
<bnagy>	bear metalllll \m/
<andreas_kushner>	cespare: so although the blog post is about ruby/apache, the context is go apache -- although you may still think it's wrong channel
<cespare>	andreas_kushner: it may make sense in ruby land (but i doubt it); it definitely doesn't make sense here
<cespare>	don't use cgi
<bnagy>	i've used nginx and fastcgi before
<bnagy>	it's fine. you'd only do it if you had some weird requirement not to serve from go, though, imho
<bnagy>	like maybe they had an existing big nginx thing and wanted to add a route to a dedicated go thing
<freman>	http://play.golang.org/p/zysa4askqp <- why is size3 not calling bytesize.unmarshalxml?
<tv`>	bnagy: even then, proxy
<bnagy>	or that, proxy is kind slow and irritating, no?
<tv`>	bnagy: i challenge you to make a thing slower than cgi
<bnagy>	fcgi
<tv`>	*f*
<cespare>	tv`: ruby
<tv`>	cespare: wrong axis
<bnagy>	fcgi is not cgi
<tv`>	and it's also *f*aster
<bnagy>	yeah, that's what i said i did :)
<bnagy>	i don't know about speed vs proxy tbh
<tv`>	oh, i did misread that one
<bnagy>	but i would be surprised if proxy was much faster
<tv`>	must be the ptsd kicking in
<bnagy>	and it's irritating to set up, fcgi was line one line in the conf and restart
<tv`>	bnagy: proxy can be faster by just being more modern and well-specced code; the fcgi protocol is funky. but i did totally read that as "cgi".
<bnagy>	but i only did it that was because customer insisted on nginx owning the external port
<andreas_kushner_>	tv` tv` leaving aside the "bare metal" issue, he makes a point that with his setup he's only got one piece of tech running24/7 (apache) which he says results in increased stability - you don't agree with that?
<tv`>	bnagy: well, actually, i didn't read the line from you about fastcgi, without it my comments make sense ;)
<bnagy>	well he has two, surely
<bnagy>	because he's got his rubby at the other end of the cgi
<quiznilo>	it's an extra layer that is unnecessary
<cespare>	andreas_kushner_: ruby apps are famous for having memory leaks an other issues
<tv`>	andreas_kushner_: my web server process is simpler than apache and has significantly fewer moving components than apache+cgi+ruby+whatever
<bnagy>	imvho i am not an apache fan, i like nginx
<cespare>	andreas_kushner_: restarting them regularly is very typical
<cespare>	andreas_kushner_: again, this stuff probably makes way more sense in ruby-land
<bnagy>	native ruby webserver is not going to be an option
<bnagy>	native go webserver very much is
<cespare>	bnagy: sure it is, guts are just written in c
<cespare>	bnagy: even in ruby, it's typical to use reverse proxy to unicorn or whatever
<bnagy>	i don't know which comment you're arguing with
<bnagy>	you think a native ruby webserver is an option?
<cespare>	bnagy: ruby code basically always means c code too
<cespare>	bnagy: so no, "native ruby" isn't, but it's not really a thing at all
<bnagy>	i just thought that article was about avoiding rack and rails / sinatra / whatever
<tv`>	how still utterly irrelevant to go
<bnagy>	why does ruby code always mean c code?
<cespare>	bnagy: oh, maybe.
<tv`>	wow millc.org has "choose {}"
<bnagy>	i think you're thinking i don't know ruby, and you're mistaken, sry :/
<tv`>	funky abuse of c ;)
<cespare>	bnagy: i'm assuming mri. if you're in jruby, then you're using a whole different set of libs
<qwebirc330862>	tv` can you share your simple server process
<tv`>	qwebirc330862: most of it is known as net/http
<qwebirc330862>	i lost connection
<bnagy>	anyway, we've been rightly pinged for being wayyyy ot
<freman>	strange... when i make a similar structure using type addr net.ip it works... but not bytesize
<qwebirc330862>	tv` "most"
<qwebirc330862>	tv` you don't use nginx or anything?
<qwebirc330862>	is there a way to view logs if i lose connection?
<radar>	qwebirc330862: http://botbot.me/5/log
<quiznilo>	you can log anything you want
<quiznilo>	heh... bots everywhere
<quiznilo>	oh!  irc logs... duh
<andreas_kushner>	so using net/http without anything like nginx would be perfectly fine in your opinion?
<veegee>	andreas_kushner, please dont
<veegee>	you should always use nginx
<andreas_kushner>	veegee: don't what?
<veegee>	don't stick a go app fully exposed without nginx
<veegee>	unless you have a very good specific reason for it
<cespare>	veegee: disagree
<smw_>	andreas_kushner, i always stick my app behind something. sometimes a elb, sometimes nginx, etc
<tv`>	veegee: http://www.quickmeme.com/img/8f/8fc1ca3c719455b43670ca7dd37387a25605baf19b094da17b305685cd0f02ca.jpg
<veegee>	im sure there are many that disagree, but there are many more that agree with me
<smw_>	andreas_kushner, at least if it is serving random people on the internet. if it is serving myself or a small subset of people, i do
<veegee>	then there are just a small fraction which post links to pointless memes
<tv`>	veegee: nicely articulated with great justifications
<veegee>	tv`, sometimes just showing up is enough
<veegee>	don't have enough time for a long explanation, but im hoping that andreas_kushner will be aware of the disagreement and do further research of his own
<tv`>	anyway, given the choice, with no other requirements, run less software
<teepark>	i'm running a rest server that has a slow startup process (open a big leveldb) and i want it to serve up 503s until its finished. is this a reasonable approach? http://play.golang.org/p/9g6ijgplgz
<teepark>	i'm a little worried about line 12
<andreas_kushner_>	vegee: yes, of course, i was already aware of the basic options, just wanted to know what people in here thought
<teepark>	there's only one writer, but it's potentially being read by other goroutines
<tv`>	teepark: that looks racy
<veegee>	andreas_kushner_, there are many reasons to run nginx, such as easier ssl setup, load balancing, easy reload of config, can help protect against ddos, it fully buffers requests
<veegee>	list goes on and on
<tv`>	teepark: atomic.value maybe
<andreas_kushner_>	veegee thank you
<tv`>	hooray a proxy has a feature that only makes sense for a proxy
<veegee>	it is indeed for that pu rpose
<daved>	skelterjohn: have a moment?
<amandac>	skelterjohn: lol oops. does that mean you can reproduce it on the actual mac?
<therainingmonkey>	hi all; what's the best way to handle errors from a deferred function?
<tv`>	therainingmonkey: you can change named return values inside a defer
<tv`>	though it's often nicer to just not defer that part
<tv`>	therainingmonkey: here's an example that uses defer to clean up on errors but still explicitly calls the functions, for simpler control flow: https://github.com/jbenet/go-datastore/blob/master/flatfs/flatfs.go#l104-l132
<therainingmonkey>	thanks!
<tv`>	(often it's ok to just call close twice)
<jud>	is there a favorable way emerging for go dependency management?
<jud>	gpm or godep for example
<lungaro>	i still use git submodules and subtree
<tv`>	i construct a collection of git repos at desirable states, just like i did in c & python
<zhaoyeming>	a non-pointed receiver will get copied to the func upon calling?
<tv`>	zhaoyeming: all arguments are always copied, even if pointers; it's just that it's the *pointer* being copied
<cespare>	zhaoyeming: (and also methods aren't special; r.f() is the same as f(r) pretty much)
<zhaoyeming>	so if i want to change something in a slice, i have to store pointers in the slice?
<zhaoyeming>	i mean, not changing the slice itself
<tv`>	zhaoyeming: slices are effectively http://golang.org/pkg/reflect/#sliceheader and thus include a pointer to the actual data, already
<hyphenated>	zhaoyeming: no, but you need to ensure you're not operating on a copy
<zhaoyeming>	hyphenated: right. i suspect i'm operating on a copy after reading tv`
<hyphenated>	http://play.golang.org/p/v3zgejwtff
<hyphenated>	http://play.golang.org/p/wlynqrw8xh added detail
<zhaoyeming>	oh yes, you demonstrated my mistake, hyphenated
<hyphenated>	also if it were defined as value receiver, func (t t) increment(), then it would also be operating on copies
<zhaoyeming>	that one i already know. the range one is what i missed
<djx>	http://play.golang.org/p/jr8bz7s9c3 is it possible to have one single func to sort both foob and fooc based on "pos" (int's on struct a)
<skelterjohn>	amandac: haven't tried yet
<skelterjohn>	i will in a little bit
<amandac>	fair enough, heh
<hyphenated>	djx: no. you'll need separate len/less/swap []b and []c to use sort.sort
<djx>	hyphenated: yeah, that's what i thought, thanks mate ;-)
<zhaoyeming>	hyphenated: in last example, i changed slice to a map and i got a "cannot cal pointer method on x[i]". http://play.golang.org/p/zujjpmiy39
<hyphenated>	zhaoyeming: map elements aren't "addressable"
<hyphenated>	when you call a method on an object a and the method has a pointer receiver, it automagically does (&a).method() if it can
<hyphenated>	similarly if you have a pointer to an object, and the method has a value receiver, it does (*a).method() automagically
<hyphenated>	but since you can't do &x[i] on a map element, you get that compiler error
<hyphenated>	you _can_ do &x[i] on slice elements
<zhaoyeming>	ok i get it. so in the 'map' case, i should store pointers to the object?
<zhaoyeming>	in order to make changes it?
<ahmetalpbalkan>	hi guys, i'm trying to establish a pipe between an incoming net.conn and a net.conn i obtain from net.dial, what do i exactly use?
<hyphenated>	zhaoyeming: http://play.golang.org/p/hlvvt5roag
<tv`>	ahmetalpbalkan: that's not what pipe means, and you want io.copy
<hyphenated>	zhaoyeming: i should probably say this: you probably _should_ be using pointers for both cases if you're calling methods to modify them. i was mainly explaining that you don't _have to_, which is what you originally asked
<ahmetalpbalkan>	tv`: yeah i was trying io.copy but it blocked
<ahmetalpbalkan>	net.conn is duplex so how exactly it is supposed to work in this case?
<tv`>	ahmetalpbalkan: sounds like you want two io.copys, then
<ahmetalpbalkan>	in two gorouties tv` ?
<ahmetalpbalkan>	goroutines*
<zhaoyeming>	hyphenated: that's clear. thanks.
<skelterjohn>	amandac: 'wgo init' has a stack trace oops :s
<skelterjohn>	oh nevermind i just forgot to recompile
<skelterjohn>	hadn't opened this machine in a long time
<therainingmonkey>	any clues why net.dial() would give "no such host" with a valid host?
<skelterjohn>	amandac: fortunately/unfortunately, -e doesn't seem to be needed
<skelterjohn>	therainingmonkey: my first guess is that it's not actually a valid host
<skelterjohn>	amandac: also cloning the docker repo appears to take a while...
<andlabs>	therainingmonkey: what host
<therainingmonkey>	my program successfully resolves it once (with a hardcoded url), but fails the second time (getting the url from input)
<therainingmonkey>	it'll fail on any host the second time
<skelterjohn>	therainingmonkey: show code?
<wessie>	wild guess: newlines
<skelterjohn>	therainingmonkey: i feel there's likely an issue with input processing
<skelterjohn>	wessie has the most likely culprit
<therainingmonkey>	skelterjohn: i thought that, but i _thought_ i'd verified that the function was getting the address it should
<skelterjohn>	show code!
<quiznilo>	eep
<skelterjohn>	all we can do is guess, and you only get one guess ;)
<therainingmonkey>	it isn't on the internet yet, gimme a sec
<skelterjohn>	therainingmonkey: one good way to be really sure you've got a string right is to use fmt.printf("%q", s)
<skelterjohn>	because then it prints an escaped quoted string
<skelterjohn>	and you can spot obnoxious things like newlines really easily
<quiznilo>	excellent tip
<skelterjohn>	therainingmonkey: i guess you found the issue? :)
<therainingmonkey>	no, i just finished with github https://github.com/therainingmonkey/gopher
<mohae>	>.>
<mohae>	dat name
<quiznilo>	how dare you?
<skelterjohn>	therainingmonkey: well, just needed a pastebin of the stuff that parses the url from input
<therainingmonkey>	well that's kinda spread about, including through a library i can't claim to 100% understand
<mohae>	therainingmonkey: so, you want us to figure out what file we should be looking at and where?
<skelterjohn>	ok, well, you need to work on isolating the problem :)
<mohae>	and understanding
<therainingmonkey>	i was thinking about a complete rewrite, but i thought i'd ask whether there was any known issues with net.dial first
<mohae>	therainingmonkey: look at your arg parsing
<mohae>	therainingmonkey: if it's worked with a hardcoded but not your arg, it wasn't net.dial that changed
<skelterjohn>	therainingmonkey: not appropriate to ask that question before you're even sure what you're passing it as parameters
<therainingmonkey>	i thought maybe it might have something to do with conn.close(), and i _thought_ i'd checked the parameters
<skelterjohn>	if you had checked the parameters, you'd be able to point me to where in your code those parameters are used
<therainingmonkey>	double checking with skelterjohn's hint now
<quiznilo>	skelterjohn: in wgo, have you replaced '--set-primary' with '--go-get'?
<skelterjohn>	quiznilo: i have
<skelterjohn>	quiznilo: i felt that 'primary' would make people think that's where your project source should go
<skelterjohn>	where in fact it's just so that 'go get' puts things there
<tjscanlon>	is there a way to break long function calls into multiple lines
<skelterjohn>	tjscanlon: the return key? :)
<quiznilo>	if i have time, and i dare to, i may to a pull request... fix readme.md and make a --help
<skelterjohn>	:o i didn't fix the readme when i did that, whoops
<tjscanlon>	i could have sworn i got an error earlier when i did that >_>
<skelterjohn>	i'll probably take care of it now
<tjscanlon>	thanks for the help
<skelterjohn>	tjscanlon: you might not have had a comma at the end of the line
<skelterjohn>	quiznilo: what would you want --help to do?
<quiznilo>	show that usage
<quiznilo>	usage: wgo init [--go-get=blah blah]
<skelterjohn>	just 'wgo' by itself does that
<skelterjohn>	oh unless you're not in a workspace
<skelterjohn>	hmm.
<quiznilo>	not if you havn't ran 'wgo init'
<quiznilo>	yes, that
<skelterjohn>	yeah that seems slightly obtuse
<quiznilo>	heh
<quiznilo>	thanks for the excellent program, i was playing with it some today
<skelterjohn>	quiznilo: glad you like it :)
<darius93>	what would be a good way to nil out a pointer so its reference is removed completely when its destroyed by a function? eg thisfunc.destroy() makes it so any data in "thisfunc" is not available in memory
<therainingmonkey>	it is newlines, thaks skelterjohn!
<skelterjohn>	therainingmonkey: sure thing :)
<st33med>	skelterjohn, may i bring my bot in here just to test it? it only logs and has two commands (one alarm and another response to hello)
<bnagy>	darius93: i don't know, but i'd like to :)
<quiznilo>	oh wait, what was that bot chan for testing?  #botters or something
<st33med>	just seeing if it works well in a large channel
<st33med>	oh?
<bnagy>	i was wondering about putting stuff like keys in a global var, setting it up with sync.once and then zeroing that var later
<mohae>	well, niling a pointer doesn't mean the data isn't in your memory
<st33med>	that works quiznilo thanks
<quiznilo>	yes, freenode has a chan specifically for showing off bots and l33t skillz and epeen
<bnagy>	but you can't really guarantee it hasn't been copied in memory
<quiznilo>	check that, i'm not sure
<quiznilo>	heh
<st33med>	there's my epeen
<st33med>	:|
<st33med>	it's more to test :p
<quiznilo>	yeah, and for testing too
<mohae>	.markov
<glenda>	when you overwrite it the tlb gets an entry
<quiznilo>	st33med: http://ircindexer.net/network/freenode/channel/botters
<st33med>	oh
<st33med>	quiznilo, botters-test to actually test it
<st33med>	surprisingly not much activity
<st33med>	i remember back in my teens how creating your own bot was a big thing
<quiznilo>	it still is
<st33med>	also how i asserted that python was better than everything at everything >.>
<quiznilo>	it used to be
<mohae>	let old man st33med reminisce!
<quiznilo>	lol
<mohae>	that was like a whole year ago
<st33med>	it was like it was yesterday
<quiznilo>	i remember on dalnet, finally getting my bot on between all the netsplits...
<st33med>	ooohhh my god, netsplits were funny
<quiznilo>	had to walk up hill, through the snow...
<st33med>	freenode had a bunch
<therainingmonkey>	rizon still netsplits
<skelterjohn>	in my teens .... python technically existed but no one cared about it
<st33med>	it was when 2.5 and 2.6 were new
<quiznilo>	through about 2 years in '96, '97, dalnet was essentially unusable
<quiznilo>	no lie
<skelterjohn>	oh, python existed before i was in my teens
<quiznilo>	i remember being all excited when ms announced c#
<st33med>	i had made a bot with 'plugins' and used multiprocessing because i hated the global interpreter lock
<quiznilo>	heh
<st33med>	and thought multiprocess would be faster that way :|
<st33med>	it basically just spawned a process for every message :||||||||||||||||
<skelterjohn>	when i first ran into the gil...
<quiznilo>	i'm still wondering about 'plugins' in go...
<skelterjohn>	i was so mad
<quiznilo>	ouch
<quiznilo>	but for a bot, i think scripting plugins is the way to go... kinda moots the entire process issue
<st33med>	though i did make sure chunks had locks around it
<st33med>	yeah. i think i would try to make go just execute scripts for plugins.
<quiznilo>	skelterjohn: would it be more consistent and idiomatic to default third party packages to pkg/?
<skelterjohn>	i wonder if something like tv`'s becky can be done, but for making plugins
<skelterjohn>	quiznilo: no?
<skelterjohn>	quiznilo: pkg is where compiled artifacts go
<skelterjohn>	for your root gopath
<quiznilo>	oh right, of course
<quiznilo>	hmm
<skelterjohn>	wgo uses third_party as the default place for ... third party right now
<quiznilo>	excellent
<st33med>	the fact that i spawned a python process for each one makes it worse
<skelterjohn>	so if you do 'wgo init', .gocfg/gopaths is "third_party\n."
<skelterjohn>	since that seems like the most sensible default to me
<quiznilo>	st33med: do you know a lot about go yet?
<skelterjohn>	st33med: python is bad at concurrency, it's true
<st33med>	i've learned a lot.
<quiznilo>	it's insanely good with process management with the mutexs and channels and goroutines
<st33med>	locking was so dead simple with multiprocess
<quiznilo>	skelterjohn: it's the most sensible to me also
<skelterjohn>	one thing that's really nice about go is i never feel like there is an "incantation" to do concurrency stuff
<st33med>	skelterjohn, agreed
<skelterjohn>	for instance, with c to spawn a new thread it was sort of this weird thing i had to copy/paste
<quiznilo>	hah
<st33med>	java says it's specialized around threading, but you have to have a run method in a runnable type
<skelterjohn>	for java, i have to write out some nonsense with a thread class and a run() method
<st33med>	yes
<st33med>	and let's not get started with msdn c++. i have not messed with it but...
<skelterjohn>	for python, this weird function whose second parameter are the args to my function
<skelterjohn>	though that is less offensive than c or java
<st33med>	from what i saw, i don't want to touch c++
<quiznilo>	there have been cases of go beginners who have to be told to back-off using goroutines, and not to use them everywhere
<st33med>	use go to add two numbers :d
<quiznilo>	ya
<st33med>	in a for loop :dddddddddddd
<quiznilo>	with tail recursion!
<quiznilo>	and channels!
<st33med>	for all the variables
<skelterjohn>	go does not optimize tail recursion :s
<skelterjohn>	rsc likes his stack traces
<st33med>	i have heard of tail recursion, don't know exactly how it works :\
<quiznilo>	this is sad... bye bye go, i'm moving on to haskell
<skelterjohn>	st33med: it's when you have a recursive function whose recursive call is the last instruction
<quiznilo>	recursion is glorious
<skelterjohn>	st33med: so you can take the previous function's frame off the stack
<mohae>	until you run out of stack
<st33med>	ah
<skelterjohn>	and have only time be the limit of how many recursive calls you can make
<quiznilo>	http://play.golang.org/p/q149f3a7m4 i wrote this awhile back
<st33med>	tail recursion sounds like a pain
<skelterjohn>	it's also more efficient to not allocate all that memory
<quiznilo>	i don't care... smash that stack
<skelterjohn>	st33med: nah it's super useful
<quiznilo>	an excellent use case of tail recursion
<st33med>	i also feel like c is such a pain to debug
<st33med>	especially with managing your own memory
<skelterjohn>	it's not that you ahve to manage memory, it's that you can treat anything as anything
<skelterjohn>	and doing so is par for the course - starting right from when you call malloc()
<st33med>	and getting fields from pointers to structs
<gbiv>	st33med: it's a bit off topic, but fwiw, gcc+clang have *tons* of sanitizers you can compile into your code in order to catch all sorts of bugs
<gbiv>	it's not perfect, but it's nice imo
<quiznilo>	gbiv: yeah, but, the fact that they're necessary...
<st33med>	ptrint = *(randomstruct->arr[50])
<skelterjohn>	in theory, go could have manual memory management, too... (though this would make understanding safe use of closures very tricky), and be easier to debug than c because you at least know that a foo is a foo
<st33med>	yep.
<gbiv>	quiznilo: they're as necessary as go's -race flag is. you can definitely make working code without them, but running with them gives you some piece of mind
<st33med>	i'd prefer a garbage collector running in the background rather than having to manage all the things
<quiznilo>	the 'copy-by-val everywhere' everywhere is very useful
<mohae>	st33med: ypi
<skelterjohn>	st33med: there are times when gc is good (most of the time, imo) and times when direct management is good
<st33med>	embedded processors for example
<quiznilo>	or real-time apps
<quiznilo>	like my music work
<mohae>	st33med: you've gotten to know go pretty well
<st33med>	yep
<st33med>	:)
<mohae>	good job
<st33med>	thanks
<skelterjohn>	difficult for a go garbage collector to collect as well as code that does it explicitly (and correctly)
<quiznilo>	i've been thinking of making a sequencer and a sampler in go, but that gc is scary
<mohae>	why?
<mohae>	as in why is it scary?
<quiznilo>	they're real-time apps... they have to be instant
<quiznilo>	always
<skelterjohn>	mohae: pauses here and there to mess up your audio acquisition
<gbiv>	quiznilo: instant within an epsilon.
<borneo>	1168 nicks means 1168 people in this room at once?
<mohae>	ah
<st33med>	gc takes less than a few milliseconds from what i read.
<quiznilo>	of course
<skelterjohn>	borneo: yes
<borneo>	:)
<skelterjohn>	borneo: most of them sit in rapt attention to my nightly lectures
<borneo>	may i take a seat?
<st33med>	quiznilo, eventually they will go on to a separate thread for gc
<skelterjohn>	borneo: no, it's your turn to stand and present.
<gbiv>	go 1.5's gc shows lots of progress wrt latency guarantees
<quiznilo>	lol!
<mohae>	st33med: with 1.5 there will be some guarantees. also, there are ways to minimize pressure
<st33med>	mhm
<quiznilo>	when i get around to that project, at first, i'll try gc, but seriously, more than a few milliseconds and you'll hear the lag
<st33med>	i liked c for being low level, but damn... it's so tough to manage so many pointers with all that syntax
<st33med>	yep
<quiznilo>	i had a tuned real-time kernel when i was doing this before and had jack sampling down to 16ms buffer
<st33med>	quiznilo, that's understandable though
<skelterjohn>	st33med: i don't know how we can have gc completely on a separate thread
<gbiv>	quiznilo: http://llvm.cc/t/go-1-4-garbage-collection-plan-and-roadmap-golang-org/33 -- "the stw piece will limit the amount of time goroutines are stopped to less than 10 milliseconds out of every 50 milliseconds"
<gbiv>	and that's worst case afaict
<st33med>	skelterjohn, java gc works that way
<quiznilo>	which is better responsiveness than most production equipment... cept the solid-state stuff
<skelterjohn>	imagine one goroutine doing for { x = y; y = nil; y = x; x = nil }
<gbiv>	so if you don't mind optimizing a bit here and there, you'll probably be fine
<quiznilo>	thanks for looking that up
<skelterjohn>	the gc might look at x, see it nil, look at y, see it nil, and delete the memory
<flaggy>	with a garbage collected language it's hard to know when the application will stop for collection. that might indeed be a show stopper for some kinds of application
<st33med>	i suppose later on there could be options to turn off the gc in the runtime and manage memory manually.
<skelterjohn>	st33med: you can turn it off now.
<st33med>	oh!
<quiznilo>	at that point, would it be better to go with c/c++?
<skelterjohn>	can't really free things though
<st33med>	:\
<st33med>	so it just sits there taking up space
<flaggy>	even a preemptive kernel is unacceptable in some scenarios
<skelterjohn>	but you can prevent the gc from going. and for an audio-style app that might be ok
<quiznilo>	no, i used the real time kernel patch
<gbiv>	yeah, c++ may be your best bet at that point (or rust, or nim, or whatever you fancy for manual memory management)
<skelterjohn>	on hn the other day i saw a post about go-style concurrency with c
<skelterjohn>	looked pretty neat
<quiznilo>	ooo rust
<mohae>	andrew gerrand has this that he is working on https://github.com/nf/sigourney
<gbiv>	you could try cgo
<skelterjohn>	rust has some neat ideas about syntactically enforced memory safety
<skelterjohn>	that seem neat
<quiznilo>	hmm... adg does audio work
<st33med>	skelterjohn, dawwww dat bunnyyyyy
<st33med>	ʕ◔ϖ◔ʔ
<skelterjohn>	quiznilo: probably just wants people to stop saying audio sequencing can't be done with go
<skelterjohn>	st33med: wtf?
<flaggy>	http://stackoverflow.com/questions/19848413/can-you-deallocate-memory-with-go-garbage-collection-disabled
<st33med>	the bunny pic on the github link
<st33med>	scroll down
<flaggy>	maybe using that and disabling gc may be a way to go
<quiznilo>	well hell, if they have already started work on a synth
<mohae>	he talked about it on a podcast about go, but i forgot what he said
<quiznilo>	mohae: thanks for the heads-up
<mohae>	np
<mohae>	i think he mentioned he'd like to be able to spend more time on it
<skelterjohn>	flaggy: very interesting
<mohae>	but don't trust my memory
<st33med>	mohae, run memcheck86+ on it
<st33med>	ʕ◔ϖ◔ʔ
<mohae>	lol
<mohae>	it would show fragmented with a bunch of bad sectors
<st33med>	gotta replace one of the sides then
<tv`>	mmap some []byte and you can do unsafe memory management just like in c, with your own malloc
<st33med>	that's true
<quiznilo>	at that point... use c
<st33med>	it's difficult because you'd have pointers to everywhere in the array
<st33med>	yeah c
<quiznilo>	or rust
<st33med>	go ain't for everything as sad as that is to say t.t
<tv`>	still have goroutines and what not
<skelterjohn>	just remember that if you ever use a closure and disable the gc, you will have a memory leak
<st33med>	i love the syntax
<skelterjohn>	there are lots of implicit heap allocations in go
<quiznilo>	go just isn't the same without gc
<tv`>	skelterjohn: sure but the point is decreasing garbage until that stops mattering
<st33med>	clojures are basically anonymous functions?
<st33med>	*cosures
<skelterjohn>	sure
<st33med>	bah
<skelterjohn>	that's fair
<st33med>	closures
<mohae>	there's https://blog.cloudflare.com/recycling-memory-buffers-in-go/
<skelterjohn>	st33med: ones you define inline with other code, that can (potentially) use things that are in the surrounding code's scope
<st33med>	ok yeah
<st33med>	then i used closures in my project :d
<gbiv>	fwiw, escape analysis *may* be able to stack-alloc the closures, but don't count on it. (i know it does this with primitives, not sure if closures are special)
<bnagy>	imho that's the most important thing about closures
<bnagy>	(close over local binding) and also how they got the name :)
<skelterjohn>	st33med: i don't think you can really call it a closure unless you pass it to something else that calls it
<st33med>	callback function
<bnagy>	no
<skelterjohn>	i think i'm with bnagy
<skelterjohn>	i don't think you can call it a closure unless it pulls something in from the surrounding scope
<bnagy>	functions are first class, so you can have functions that are 'traditional' callbacks
<st33med>	skelterjohn, it does
<st33med>	one sec
<skelterjohn>	err, i believe you
<skelterjohn>	no need to prove it
<skelterjohn>	i also most likely won't click any link you paste :)
<quiznilo>	no
<st33med>	http://pastebin.com/uypsbubz
<st33med>	t.t
<st33med>	but but my epeen
<st33med>	nah it's fine :p
<quiznilo>	is 'callback' a go term?
<bnagy>	no
<st33med>	nope
<quiznilo>	i see it in some go blog posts
<quiznilo>	and i think... "i remember callbacks!"
<bnagy>	it's used in go, but it's just a programming term
<skelterjohn>	is the question of whether or not it was coined with go? certainly not
<quiznilo>	oh i know that
<quiznilo>	i used them years ago
<quiznilo>	i still use them in client-side javascript
<st33med>	i would think it's common considering how easy it is to make and pass functions in go
<quiznilo>	i've never seen the word in any of the official go documentation
<skelterjohn>	why would there need to be?
<skelterjohn>	it's just a thing :)
<st33med>	it's not something pertaining to the language
<skelterjohn>	however, callbacks are very often used in concurrency settings when better concurrency primitives are not available
<skelterjohn>	the most common use of them is for something like, from one thread, tell the ui thread to invoke some callback (in the ui thread) when an event occurs
<skelterjohn>	so the callbacks represent concurrent execution
<skelterjohn>	with go, we tend to not use that pattern
<skelterjohn>	but instead rely on channels
<skelterjohn>	so, callbacks are much less common
<skelterjohn>	i guess you could think of http handlers as callbacks
<quiznilo>	yes, i do actually, however, i don't use that word to talk about them
<st33med>	the library i used had callbacks for certain codes sent by irc. that's fine, but i would have liked it to give me some way to just send me messages through chans
<skelterjohn>	i wonder if i could make a version of net/http that assigned a chan to a route
<skelterjohn>	i guess the only thing that would give me is a nice way to ensure no more than n requests are concurrently served
<st33med>	also, i've been told that functional languages are the best for concurrent programs, but i have an extremely hard time reading them.
<st33med>	much less creating in one.
<skelterjohn>	anyway, night time for me
<quiznilo>	see ya
<st33med>	night skelterjohn
<quiznilo>	has anyone messed around with https://github.com/smartystreets/goconvey?
<mohae>	i used it and grew to regret it
<quiznilo>	lol
<st33med>	that seems like too many bells and whistles for mere testing
<mohae>	indeed
<st33med>	desktop notifications?
<st33med>	srs?
<mohae>	and it makes your tests way too verbose
<mohae>	and it's slow, it has a problem with loops where it re-executes tests, iirc
<mohae>	anyways i groan whenever i come across code i have that used it for testing, for smaller stuff i haven't bothered taking the time to rip it out.
<mohae>	but, for the most part, i've been replacing it with the standard testing
<mohae>	hmm, they removed the issues (or moved it), so i can't point you to the re-run tests issue
<mohae>	if you don't mind a testing package getting in your way and really slowing down your dev, it might be for you
<quiznilo>	lol
<quiznilo>	no
<st33med>	still, i wouldn't use that sort of testing suite because it looks way too heavy for such a thing
<st33med>	yep
<mohae>	st33med: you are smarter than i
<mohae>	they probably added functionality since i used it
<st33med>	heh. i haven't done much in the way of writing test suites besides the painful ones we wrote for small ass programs.
<mohae>	well the testing package is fine for most situations
<st33med>	oh and we didn't use any junit testing or shit. it was methods to run from a separate main method.
<mohae>	at one point, with goconvey, it felt like i was writing more testing code than actual code
<st33med>	-_-
<mohae>	and i was
<quiznilo>	hmm... no go love at gsoc '15
<st33med>	i have a bad taste in my mouth from writing testing code without any coverage check.
<st33med>	wait that's a ie
<st33med>	lie
<st33med>	there was coverage check iirc
<st33med>	it's been awhile
<zhaoyeming>	just curious, can i know the current size of a buffered channel?
<st33med>	zhaoyeming, cap for the buffer capacity, len for how many in the channel
<zhaoyeming>	cool. thanks, st33med
<st33med>	how many messages that is
<_1_rocco>	hii
<_1_rocco>	hiii
<jud>	quiznilo, how do you mean?
<quiznilo>	regarding gsoc?
<quiznilo>	i can't find any here http://www.google-melange.com/gsoc/projects/list/google/gsoc2015?pagespeed=noscript
<kevinburke>	any reason why go doesn't warn about unreachable code?
<kevinburke>	eg return "foo"; fmt.println("can't get here...");
<quiznilo>	go doesn't have any warnings at all
<quiznilo>	design decision
<quiznilo>	should it error out with unreachable code?
<kevinburke>	that's what i was thinking, the same way it does if you try to use an unreferenced var
<quiznilo>	i suppose if unreachable code qualifies as an 'error'
<quiznilo>	it's debatable, that is
<quiznilo>	i'm not qualified to speak on the design decisions though
<quiznilo>	go vet -unreachable
<freman>	halp
<freman>	sort, i want to do a sort servers bydistance but need the less function to have access to client.geopoint
<freman>	can o kist dp
<freman>	bleh
<quiznilo>	so... sort interface
<quiznilo>	func (t *thing) less(a, b things) {
<quiznilo>	you know...
<quiznilo>	https://golang.org/pkg/sort/#interface
<quiznilo>	just implement len() int, less(i, j int) bool and swap(i, j int)
<freman>	http://play.golang.org/p/dpyn_owcwo
<freman>	:d
<st33med>	freman, why so much struct?
<freman>	server and client are representitive of the actual structs already in my project... bydistance implements the sort
<st33med>	k
<freman>	(the real structs are 10+ elements/piece and actually have varying info in them)
<quiznilo>	http://play.golang.org/p/huql2bkb0i
<quiznilo>	wow, that's ugly
<quiznilo>	oh.. they aren't ints
<quiznilo>	http://play.golang.org/p/nkz4foo5e_
<quiznilo>	better
<freman>	yeh, but they're not going to be ints irl either, distance is actually calculated from lat/lon
<quiznilo>	sure
<|craig|>	freman: if there is a heap or priority queue, you can use one of size 5 to effiently collect the top 5. you could also use the expected linear time quick select algorithm for anything that you can comparison sort (could use the same interfaces)
<quiznilo>	something about you can't be sure of the order when you initialize maps
<quiznilo>	ya that works
<freman>	i must be getting tired because that made no sense
<|craig|>	http://en.wikipedia.org/wiki/quickselect
<quiznilo>	http://play.golang.org/p/atr0_3kffe <- that's what you want, right?
<quiznilo>	and just put your call to client.blah in the less() function
<freman>	yeh the production code "	return d.servers.geopoint.distancefrom(d.client.geopoint) "
<freman>	err, only copied half of that :(
<quiznilo>	and depending on how big your dataset is... and how often sort() will make those calls...
<quiznilo>	you could be there for hours
<freman>	(in fact wasn't even right function)
<freman>		return d.servers[i].geopoint.distancefrom(d.client.geopoint) < d.servers[j].geopoint.distancefrom(d.client.geopoint)
<freman>	there's 9000 odd records and it's only called once
<quiznilo>	9,000?  over 9,000?
<jud>	*crickets*
<quiznilo>	sorry
<quiznilo>	ya, you make 1 call to sort()
<quiznilo>	sort will make quite a few calls to less()
<quiznilo>	at least 9000
<freman>	actually not even that far - only 3600 (don't trust id, evidently the data set deletes old)
<quiznilo>	http://play.golang.org/p/e03tsnzyas <- 6 values, 9 calls to less()
<mohae>	nlogn
<quiznilo>	8 values is 20 calls to less()
<quiznilo>	ya
<quiznilo>	k, it's a log
<quiznilo>	or something
<quiznilo>	i suck at math
<mohae>	it's nlogn
<mohae>	worst case
<quiznilo>	i'd consider downloading the entire dataset first, and using local data in less() personally
<quiznilo>	or cache it
<mohae>	it seems a different approach might be useful, e.g. i'm willing to be all these servers aren't in different data centers
<quiznilo>	servergroup
<doomrobo>	suppose i have a uint32 f = <abcd> where a,b,c,d are bytes in order of significance. how would i make a unit16 g = <bc> where b and c are the bytes from f?
<mohae>	a graph approach might help too, but it's late so i'm not going to really think
<bnagy>	doomrobo: mask then shift i guess
<bnagy>	foo & 0x00ffffff; uint16(foo >> 8) or whatever
<freman>	real	0m0.120s not so bad... for loading 2 xml files, sorting, slicing
<doomrobo>	bnagy, how does that reduce the size of the int32? doesn't a right shift just fill in the left with 0s?
<freman>	and all these servers are all over :d
<freman>	http://www.speedtest.net/speedtest-servers.php
<mohae>	freman: so you have 3600 servers in 3600 different data centers?
<freman>	not me, ookla
<st33med>	is there something in golang to allow the use of sse or avx vector instructions?
<freman>	realistically for 99% of cases, filtering by country first then sorting the result will work :d
<bnagy>	(0xaabbccdd & 0x00ffffff) >> 8 == 0xbbcc
<bnagy>	=> true
<bnagy>	doomrobo: sorry for ruby output, it's just handy :p
<bnagy>	for go you have to convert that afterwards because it will be a uint32 still
<doomrobo>	bnagy, but how does go cast it? does it lop off the most or least significant bits?
<doomrobo>	because (0xaabbccdd & 0x00ffffff) >> 8 == 0x0000bbcc
<bnagy>	no casts, anyway i have to go. pretty sure that's your solution
<doomrobo>	alright, thanks
<doomrobo>	indeed it does cut off the leading digits when casting: https://play.golang.org/p/sqgpwd30v4
<mohae>	use encoding/binary
<doomrobo>	mohae, i lied for simplicity of the testcase. it's actually int32 to int16. i just wanted <abcd> to become <cd> so i did int16(num & 0x0000ffff) and it appears to work fine
<mohae>	doomrobo: ya, i wasn't paying attention, but bnagy's suggestion is better, as usua
<mohae>	s/usua/usual
<badbugz>	bnagy: write a go repl already
<freman>	hmmm if i could get client into server's unmarshalxml func...
<freman>	meh
<tjscanlon>	is it possible to have a default case for a switch statement?
<doomrobo>	tjscanlon, yeah, the default: tag should do it
<doomrobo>	tjscanlon, https://play.golang.org/p/of0in1xflo
<freman>	runtime: goroutine stack exceeds 1000000000-byte limit
<freman>	fatal error: stack overflow
<freman>	oops....
<freman>	guess i don't want to recursivly call unmarshaalxml :d
<tjscanlon>	doomrobo: thank you!
<doomrobo>	:)
<foofoobar>	what is a good strategy to save credentials in and use them in go ? environment, configuration files, .. ?
<dmac>	foofoobar: config file is good
<dmac>	foofoobar: it's better than env vars or cli flags for secrets
<foofoobar>	why better than env?
<sztanpet>	because you can control access to them?
<dmac>	e.g., child processes can see their parent's env vars
<dmac>	so you can leak information if you call out to a subprocess outside your app
<sztanpet>	also, the environment is visible in /proc/{pid}/environ
<markusl>	hi
<markusl>	i have a problem understanding this:
<markusl>	type foo map[string][]string
<markusl>	apparently it's enough to foo := make(foo)
<markusl>	i wonder why i don't have to make() the slices in the map?
<sztanpet>	what makes you think you dont have to?
<bnagy>	hasn't tried to append to one yet? :p
<markusl>	nevermind, found it: https://blog.golang.org/go-maps-in-action
<markusl>	"appending to a nil slice just allocates a new slice, ..."
<the_last>	hey guys, what am i doing wrong here? http://play.golang.org/p/r1orcshj8z
<dmac>	the_last: strconv.atoi() returns two values, you need to handle the second (the error). https://play.golang.org/p/fxnnfhbdjr
<the_last>	ah, thanks dmac, now i understand the error haha
<joncalhoun>	is there a good way to define methods on non-local types? i realize you can't, but i mean, are there any patterns that tend to solve this issue in another way?
<hyphenated>	joncalhoun: embedding..?
<joncalhoun>	my concern with that is the non-local type already having embedded types.
<hyphenated>	can you be at all more specific?
<joncalhoun>	what i am trying to do is have one set of structs for parsing the json, then (in an ideal world) i would have 2 packages that each implement their own methods on the structs to do some work.
<joncalhoun>	the work being completely independent, but uses the same parsed json.
<hyphenated>	you should just convert the data to the apprpriate type
<hyphenated>	trying to avoid that now means you'll continue trying to avoid it later when you really shouldn't
<joncalhoun>	what i figured, but wanted to ask before writing the code since it will likely lead to a lot of duplication.
<hyphenated>	don't be afraid of writing code
<tomaz_b>	hi guys ... i have my gopath one for all projects... but now i would like to start using godep... somehow i can't figure it out... from where do i run it... do i run it from gopath... like "godep save src/pathtomyproject" since running it from package folder.. doesn't work. i am affraid that i will "save" more than i want... sorry for this newbie question, but can't find an answer on google
<joncalhoun>	hyphenated: haha i'm not afraid of writing code, i just don' tlike writing the same code more than once if it makes sense. seems like it doesn't make sense in this case, and trying to do it another way will be way too confusing
<tomaz_b>	godep: directory "<path to gopath>/src" is not using a known version control system
<tomaz_b>	is the error from running it from package folder
<joncalhoun>	hyphenated: thanks tho :d
<hyphenated>	you could attempt to generate the code, but that's rarely worth the effort
<tomaz_b>	anybody?
<poga>	tomaz_b: some of your dependencies doesn't have a .git directory in its path
<tomaz_b>	poga: ok?... but does this means... that my initial try running godep save inside project folder was correct one? my gopath is way down in folder structure... i have one gopath for all projects
<tomaz_b>	poga: but does that mean, that i should have my src folder under git revision? my project is in $gopath/src/github.com/myname/myproject/<my file>
<tomaz_b>	poga: i run godeb save inside myproject folder
<tomaz_b>	poga: error was explicit for src folder
<poga>	tomaz_b: maybe this is related? https://github.com/tools/godep/issues/63
<tomaz_b>	poga: ok, thanks... i added just "git init" in $gopath/src ... and the command did finished without error... but inside godep folder which was created... godeps.json have "desp" key empty??
<tomaz_b>	poga: this is probably not the right behavior, right?
<_1_moh-seid>	:(gdg
<dmitris>	hi!  if you have a binary compiled with go, can you find out from the executable itself what was the go compiler version it was compiled with?
<digitalyatri>	what's the correct way of using "gofmt -w", its not re-writing the changes to source, just displays it on screen
<vaskrate>	hi, can i access to function in main package from another package?
<dmac>	dmitris: you can have the go linker set compile-time strings in your binary
<dmac>	https://stackoverflow.com/questions/11354518/golang-application-auto-build-versioning
<hyphenated>	digitalyatri: -d, isn't it?
<hyphenated>	dmitris: it's in there somewhere, but not really easy to get at
<digitalyatri>	hyphenated, -d does this right display diffs instead of rewriting files ??
<hyphenated>	dmitris: what are you hoping to achieve?
<digitalyatri>	i want gofmt to change the source files and not display the results on screen only
<dmitris>	hyphenated: for example, to scan a large number of hosts and find go binaries compiled with go version less than 1.x
<dmac>	digitalyatri: -w, it's in the docs: https://golang.org/cmd/gofmt/
<hyphenated>	digitalyatri: i just use 'go fmt'
<digitalyatri>	hyphenated, that internally executes gofmt, so its the same thing
<digitalyatri>	does it change the source for you, i mean using go fmt ?
<hyphenated>	if it had something to change, it 1) changes it and 2) tells you the file it changed
<dmac>	dmitris: are you compiling the binaries? or are they not yours?
<dmitris>	digitalyatri: gofmt -w does
<digitalyatri>	hyphenated, dmitris nope it does not in my case, it simply prints to stdout, the file is as before, no changes
<dmitris>	digitalyari: gofmt -help : -w=false: write result to (source) file instead of stdout
<dmitris>	digitalyari: strange… are you sure?  is it go 1.4.2 ?
<dmitris>	digitalyari: does “gofmt -l <filename.go>” shows the name of the file?
<dmitris>	dmac: “mine” or “ours” in a wide sense - some compiled by me - but possibly long time ago (looking at my $gopath/bin, for example), some by my colleagues / teammates, some by the cd pipeline…
<digitalyatri>	dmitris, hyphenated check this out https://play.golang.org/p/j-in6ixfcw
<hyphenated>	digitalyatri: it can't format a file that has syntax errors..
<digitalyatri>	can u give me a simple example of what it would change hyphenated  ?
<dmitris>	would be nice if it were possible to interrogate any go binary about its origins (such as the compiler version) - also as contingency procedure for a very unlikely case that go runtime has a security issue and all the binaries need to be updated
<digitalyatri>	i thought "{" does fall within the formatting category
<dmitris>	here’s the formatted version: https://play.golang.org/p/t7vtid_1it
<digitalyatri>	dmitris, ah ok, i had wrong assumptions about how it should work :) thanks for your help
<digitalyatri>	dmitris, i've heard that using "named" return values is always good practice, but i see a few popular projects not following this, why is that so ?
<dmitris>	digitalyatri: interestingly, in http://play.golang.org/p/f9xcum7zrs - if you put the curly bracket after “type foo struct” on the next line, gofmt does put it back - but not after functions, either “main()” or “mee()”…
<digitalyatri>	dmitris, aha i see
<dmac>	dmitris: that's because func main() is a valid line of go; type foo struct is not
<dmac>	digitalyatri: always using named return values is not good practice
<dmac>	digitalyatri: https://github.com/golang/go/wiki/codereviewcomments#naked-returns
<digitalyatri>	dmac, why is that ?
<dmitris>	digitalyatri: i don’t think “named” return values is a universal suggestion - whatever makes it more readable.  if for example a function is simple and it’s clear what is being returned without the names, i would not give the name
<dmac>	digitalyatri: meant to link https://github.com/golang/go/wiki/codereviewcomments#named-result-parameters
<dmitris>	digitalyatri: i don’t see anything wrong with the unnamed return parameter in http://play.golang.org/p/p-knncpude
<digitalyatri>	dmac, hmmm makes sesnse
<digitalyatri>	sense*
<hyphenated>	dmitris: for your original question.. i'm in two minds about whether it'd be "nice" and "useful" in its own right, even though it'd be useful for your scenario
<hyphenated>	dmitris: there's other ways to solve it rather than baking one specific way into every binary that's built
<dmac>	dmitris: if you'd like this going forward you could try my suggestion... doesn't help for any binaries compiled in the past though
<dmitris>	hyphenated: ok - i guess need to push for a company-wide convention / policy of adding certain ldflags on every compilation, in particular done by the cd pipeline
<hyphenated>	you'd also have to push a policy of "don't install stuff from your laptop / local build environment"
<hyphenated>	or write a package that emits version info, and make sure every binary uses that package and supports the option to spit out the info..
<hyphenated>	or keep a copy or hash of every build the cd server creates, along with compiler details and a tool to find the info based on hash
<hyphenated>	but still.. it requires that policy in place, and a lart to ensure it's followed
<vaskrate>	how can i share struct instance to other packages? (e.g db instance?)
<tomnomnom>	vaskrate: pass a pointer to it as an argument?
<vaskrate>	i have a package which has packages (controllers,models) and in main package i  init database(gorm) and i want to access to instance. i'm tried to get instance from other package and i got goroutine error and i tried add setdb function in models package and again i got goroutine error
<tomnomnom>	vaskrate: could you provide sample code?
<vaskrate>	tomnomnom: http://pastebin.com/ejx4txnp
<ebonics>	vaskrate, what error is it
<vaskrate>	panic: runtime error: invalid memory address or nil pointer dereference
<vaskrate>	[signal 0xb code=0x1 addr=0x78 pc=0x59f47c]
<ebonics>	vaskrate, are you sure thats the actual error. anyway my guess would be its because your orm doesn't handle the synchronization for you
<ebonics>	i dont think sqlite is threadsafe by itself
<vaskrate>	can i share pointer to package?
<ebonics>	oh no
<vaskrate>	i think that db var is empty ;p
<ebonics>	vaskrate, where do you call the testdb ;o
<vaskrate>	in other function in package ;p
<vaskrate>	okay, i do log.fatalln(db) and i got {<nil> <nil> 0 <nil> <nil> <nil> <nil> 0 <nil> <nil> false  map[] map[]}
<ebonics>	i know its in another function but i dont see where it would be called from since your main func doesnt call anything else :d
<vaskrate>	in my main function i have router from gorilla
<vaskrate>	and in package with setdb i have controllers which uses db
<vaskrate>	i think that i solved my problem xd
<vaskrate>	i have exec db in init() and it crashed app ;d
<tomnomnom>	vaskrate: glad you got it sorted :)
<skripted>	wtf how to i convert string to uint ..
<skripted>	strconv has no atoui
<hyphenated>	skripted: it has parseuint
<hyphenated>	atoi is just a wrapper for parseint anyway
<vaskrate>	is there any way to use subpackage like this package.subpackage.function?
<sztanpet>	no
<tanj>	hi, i am trying to understand the use of append builtin()
<tanj>	the docs says the function is variadic, but i get the following error when appending 2 byte slices:
<tanj>	cannot use buf[0:res] (type []byte) as type byte in append
<hyphenated>	tanj: buf[0:res]... (put the three dots there)
<tanj>	hyphenated: ahh
<tanj>	the dots were in the docs, but they didn't actually make sense to me
<bijan_>	anyone worked with paypal?
<go-nuts368>	hello gophers. question: i am creating a generic query function to a database, in order to do so i have two implementation options, one using reflection and another one using an interface. the problem is, using reflection i get faster response time (2x) than using the interface method. although less idiomatic. my gut instinct tells me that interface pointers should be faster, so i am conflicted, any suggestions?
<hyphenated>	tanj: most people think they have a loose rather than literal meaning
<tanj>	hyphenated: in my mind, ... means 1 or more parameters
<hyphenated>	tanj: it means precisely that.
<hyphenated>	tanj: but to turn a slice into a list of parameters, you use the ...
<tanj>	hyphenated: what's the explanation of this
<tanj>	hyphenated: hmmm
<go-nuts368>	example: https://gist.github.com/anonymous/05e602f628408dd7f403
<tanj>	i think i get it. the ... explodes the slice into arguments
<hyphenated>	kind of, yeah. the mechanics are actually the opposite
<tanj>	hyphenated: by any chance, are you familiar with type assertions?
<hyphenated>	i am.
<hyphenated>	there's also 1100 other people who might be too.
<tanj>	:)
<tanj>	ok. i am trying the following to assert that the response type is a byte slice:
<tanj>	if t, ok := response.([]byte); ok
<tanj>	but i always get this error: invalid type assertion: response.([]byte) (non-interface type []byte on left)
<hyphenated>	well, you type-assert interfaces to actual types
<hyphenated>	your code seems to be trying to type-assert a []byte to a []byte
<j0n17>	hey gophers, what do you guys use to read a socket, let's say a tls conn', do you loop through it with read waiting it to return an eof, or is there any higher level / more optimized existing method/function to do that ? thanks in advance :)
<tanj>	hyphenated: yeah. that makes sense :/
<tanj>	response is already typed, so it will always be a byte slice no matter what.
<hyphenated>	j0n17: all of those depend on the circumstances and the data the conn receives..
<j0n17>	could you elaborate please ?
<hyphenated>	tanj: yeah. the compiler's already assertive enough
<hyphenated>	j0n17: what _protocol_ does the connection use? what kind of data gets sent?
<hyphenated>	if it were raw bytes that needed dumping into a file, i'd dump raw bytes into a file. if it were a session-oriented protocol with streaming asyncronous transactions, i'd do something stateful
<j0n17>	hmm okay, thanks
<r00trunner>	can you tell me why the time.sleep() ist required here? http://go-tour-de.appspot.com/concurrency/1
<deniska>	r00trunner: program finishes as soon as it exits main
<deniska>	so without time.sleep chances are a program finishes before goroutine even runs
<napsy__>	ofcurse
<hyphenated>	r00trunner: it's not _sleep_ that's required, but scheduling
<hyphenated>	r00trunner: without it, line 16 schedules a goroutine to do something, then proceeds to line 17, and finishes. the goroutine from line 16 never even gets launched
<alectaylor>	hi
<alectaylor>	anyone using nats (queue)?
<hillatio>	hey everyone, just started learning golang literally like 5 minutes ago... and this is going to bug me until i figure it out. what is fmt an abbreviation for?
<vegai>	format
<kinlo>	format
<hillatio>	haha thanks
<alectaylor>	xd
<r00trunner>	hyphenated: because the launch of a goroutine is more time consuming than the rest of the program right?
<unga>	 /run usercount.pl
<hyphenated>	r00trunner: no, not at all
<hyphenated>	r00trunner: the scheduler was quite happily doing things in main. nothing really interrupted that and it reached the end of main.
<r00trunner>	hyphenated: thx
<r00trunner>	it's a shame we cannot use go instead of java to program android apps...
<hyphenated>	when it reaches there, it doesn't get busy looking for more things it can do, it just exits. it's up to _you_ when writing concurrent things to force certain scheduling (usually via channels or sync primitives rather than "sleep") to ensure the order occurs as you want
<ptrb>	r00trunner: perhaps in due time... :)
<tanj>	r00trunner: you can. just check the "mobile" pkg
<tanj>	although it's mostly in developemnt and you will probably have to bind to java a lot
<alectaylor>	here's a step backwards: https://github.com/pote/gpm
<alectaylor>	>.<
<r00trunner>	tanj: ah ok thx. didn't know. but i guess it's a a little bit to early then.... still, if it it's in development, that's a good sign. really impressed by go
<hillatio>	ok 10 minutes of learning go... it's like a weight of c++ syntax off my shoulders. so clean
<hyphenated>	hillatio: don't you dare ask for generics or operator overloading ;-)
<vegai>	alectaylor: how so?
<hyphenated>	just teasing, but a fair few c++ people coming to go are like "wow, you got rid of all the crap of c++, but what about all my favorite c++ features? how could you miss those?"
<mousetrap>	personally, i see go has more in common with c than with c++...
<vegai>	these are not the features you're looking for
<mousetrap>	and that's just so brilliant.
<vegai>	c is horrible crap too in its own way
<mousetrap>	of course.
<vegai>	not as a language perhaps, but the stdlib for instance is just out of this world
<mousetrap>	but it's a simpler way of crap.
<vegai>	sure
<alectaylor>	vegai: doesn't cross compile
<alectaylor>	hyphenated: c++ ftw
<r00trunner>	in the example demonstrated in http://go-tour-de.appspot.com/concurrency/2, would it be possible that the second goroutine finishes earlier than the first? is it garuanteed, that the first always finished first?
<hillatio>	hyphenated: haha nah all good. part of the reason i came to go was because, as much as i love c++, the complexity made starting projects feel like a burden
<hyphenated>	r00trunner: yes, it's possible
<vegai>	alectaylor: ah
<hillatio>	is the reason for using the := operator to avoid people accidentally using = instead of ==?
<hyphenated>	r00trunner: the "guarantee" in that code is that two values will be read from c before it assigns both of them to x and y
<hyphenated>	hillatio: no, not at all
<deniska>	hillatio: := is declare and assign, = is assign
<alectaylor>	hillatio: ever written pl/sql?
<alectaylor>	it's the old style declare+assign
<alectaylor>	pl/sql copies some much older style from some long forgotten language
<hillatio>	nope, never written pl/sql
<hyphenated>	hillatio: the general lack of statements being expressions prevents that misuse
<hillatio>	ah i see, just a shortcut instead of using var
<alectaylor>	here we go, it's from algol in 1958
<alectaylor>	(also pascal)
<deniska>	pascal uses only := for assignments
<deniska>	it doesn't have shorthand for declare and assign
<deniska>	because all variables should be declared on top of the function to teach students tidiness =)
<skripted>	hyphenated: ah thanks! sry lost connection in train
<alectaylor>	deniska: i still go the whole `var name type` when there is any sort of ambiguity to the coder
<hyphenated>	alectaylor: i only use var when absolutely necessary. there's usually enough context that expresses the type anyway.
<alectaylor>	mmm
<r00trunner>	hyphenated: ok, then i did understand the code correctly. thx a lot.
<freman>	so, i thought i'd cheat and use unmarshalxml to make the adjustments to my objects on the fly
<freman>	net result = stack overflow...
<freman>	s/on the fly/while importing/
<hyphenated>	freman: good ;-)
<freman>	func (s *server) unmarshalxml(d *xml.decoder, start xml.startelement) error { d.decodeelement(&s, &start); s.distance = s.geopoint.distancefrom(config.client.geopoint)
<freman>	no nice, simple way to do that?
<fooster>	does anyone know if godef is supposed to work with gopath with multiple entries?
<hyphenated>	freman: the &s there looks bad
<freman>	thought that'd decode the element to the object it's being called against?
<hyphenated>	well yes, but if the object has an unmarshalxml, it'll callit
<hyphenated>	which will then decode into the oject, which will then call unm..
<freman>	yeh... this my problem, no simple way "afterunmarshalxml" run s.distance = s.geopoint.distancefrom(config.client.geopoint)
<hyphenated>	you're trying to discard the data, yeah?
<freman>	nope, trying to add distance property based on geopoint
<hyphenated>	ok. then no, no easy way. you need to implement all the mechanics of decoding s, then do that
<freman>	or just run a for range after it's done
<hyphenated>	or just do it after.. yes
<hyphenated>	easier
<quiznilo>	mornin'
<andlabs>	https://github.com/golang/go/commit/e481aac0e1f7c26ce5c86c5771bcd4ca81e90765
<andlabs>	actually better https://github.com/golang/go/commit/121489cbfd082161d86dd5e6f5653dc654beeaf7
<andlabs>	cool work aram, thanks for the effort
<quiznilo>	today's project for me is to find a good idiomatic sample of using sessions--perhaps gorilla sessions--to manage a website authentication
<freman>	http://play.golang.org/p/l4st9lplri so um, i'm clerarly dumb, i can't modify s.z in a range?
<quiznilo>	you aren't making any modifications here
<quiznilo>	well, you're changing the value of 's' inside the for loop, fwiw
<quiznilo>	which isn't much
<quiznilo>	perhaps use a map instead of a slice?  i dunno
<quiznilo>	http://stackoverflow.com/questions/15945030/change-values-while-iterating-in-golang
<freman>	i solved it by using the index
<freman>	now to solve my sorting not working :d
<quiznilo>	there you go
<quiznilo>	how is sort() not working?  we had a working example last night
<freman>	oh, helps if you call it :d
<freman>	for _, s := range servers.sortbydistance().closest5() { :d
<freman>	much happiness
<quiznilo>	how many devs are at ookla?
<quiznilo>	lol
<quiznilo>	i thought you worked there
<freman>	nah
<xdeadl0ckx>	hello all
<ctrlrsf>	hello wrecker
<_2_dalejr88>	hi
<rocknrollmarc>	ok thnks 3306
<koda>	hi, is there a global way to recover from panics?
<koda>	eg a single recover() function in main() or in handler() ratehr than in each go routine?
<smw>	koda, nope
<koda>	d:
<fooster>	does anyone know if godef is supposed to work with gopath with multiple entries?
<cronos>	koda: perhaps don't write code that panics at all
<koda>	cronos: hard when interacting with cgo
<cronos>	huh, didn't know that cgo utilized panics
<smw>	cronos, a segfault leads to panic i believe
<koda>	^
<smw>	koda, generally a segfault should cause the program to die
<cronos>	didn't know segfaults were part of normal flow in c but then again, i didn't program in c a lot
<koda>	cronos: ok i got your advice, "don't write bugs" :)
<whippythellama>	they're not; or rather, they should not be
<smw>	cronos, they are used less for control flow than panics
<koda>	smw: yes, but i need to know why the program crashes
<koda>	so i was planning to recovering from the panicing routine by printing what url caused it in the first place
<smw>	koda, interesting. is the use of cgo instead of plain c stopping you from debugging c code?
<whippythellama>	is it dumping a core you can open in gdb?
<koda>	smw: not right now, it did in the past
<koda>	right now i don't know why my app is crashing :)
<smw>	koda, i find logs are useful for these types of things.
<smw>	koda, what you really need is a core dump
<smw>	iant, you happen to know if there is a way to coredump when a cgo code segfaults?
<whippythellama>	if it's producing a core, pick it apart in gdb; if it's not, can you run your  app via gdb and set a watchpoint/breakpoint for the function in question?
<iant>	smw: try setting the environment variable gotraceback=crash
<iant>	i don't know if it will work but it' the first thing i would try
<smw>	koda, see iant's answer :-)
<koda>	ok thank you
<whippythellama>	oo… nice tip, iant - didn't know about that one
<iant>	whippythellama: for the record, it's documented at http://golang.org/pkg/runtime/ under "environment variables"
<whippythellama>	yeah, just found it after you mentioned that  :)
<whippythellama>	teh googs, it tells me things
<coredump>	who, me?
<smw>	coredump, yes :-p
<coredump>	k
<ttke>	if i tried firing up pvm today in our datacenter, all sorts of red rows would come up on noc's security monitor
<ttke>	and some systems might not even see each other due to firewall rules
<ttke>	http is treated more nicely
<ebonics>	ttke, you use http between your own backend services?
<ttke>	yes, my employer's home-grown rpc infrastructure is http-based.
<ebonics>	:|
<echlebek>	ttke: we have some legacy mpi code... oof.
<ebonics>	that seems so limited
<liru>	i'll just leave it as http then.
<liru>	thanks
<ebonics>	ttke, what happens if you need full duplex or something
<ttke>	ebonics - our implementation doesn't allow for things like websockets, but there's nothing about http which prevents full-duplex communication over a single persistent connection.
<ttke>	i've implemented primitive realtime chat services via http before.  not all http clients deal well with it, but at the time it was fine.
<ebonics>	get <-> get <-> get <-> get <-> get <-> get <-> get ???
<ttke>	nope
<ttke>	data can be written incrementally to an open http connection, from either direction.
<ttke>	it's not commonly used that way nowadays, except in the case of websockets.
<ebonics>	do you use cusotm solution for that ttke
<ebonics>	or an existing technology?
<ttke>	i've only written custom code to do it, but today i would use websockets, which are an existing and well-supported technology.
<checkmatein1>	join ##beaner-central
<ebonics>	i don't understand why you would want to use http
<ebonics>	for that
<ebonics>	i don't even mean like performance wise, but it just seems really uh bloated overall
<ebonics>	why not just send json objects or something if you dont care about performance
<ttke>	heh
<ttke>	json objects over websockets aren't all that uncommon :-)
<ebonics>	ttke, my current solution is just raw json objects over tcp
<ebonics>	;o
<ttke>	*nod* there's nothing wrong with that, imo
<ebonics>	ttke, it's actually really lean. i like it a lot compared to what ive used in the past
<ebonics>	like binary protocols and stuff
<ttke>	good :-)
<ebonics>	i don't understand wanting to use a full http stack though
<ebonics>	what does it give you
<ttke>	convenience, mostly, and preferential treatment in the context of a corporate network.
<ebonics>	do you send over port 80?
<echlebek>	it gives you interop with a universe of tools that already speak http
<ttke>	the client sends *to* port 80, yeah
<ttke>	echlebek++
<ebonics>	like what tools specifically
<ebonics>	i dont know of any tools that use http other than your typical http rest servers
<echlebek>	beyond web browsers and curl? well at my workplace our data analysis software is third party and has http features, which is really convenient for us.
<ttke>	wget, curl, wireshark, any of dozens of "frameworks" and libraries which give you well-debugged interfaces .. it's quite a large ecosystem
<ebonics>	oh
<ebonics>	i didn't think about those
<ebonics>	that seems pretty nice for testing
<ttke>	yeah, debugging by pointing a web browser at your test instance and squinting at json can be convenient
<ebonics>	i use netty for this kind of stuff
<ebonics>	i can just add an http encoder/decoder to the chain arbitrarily
<furball365>	i've just hit a runtime error panic: "invalid memory address or nil pointer dereference". i see a few references to this kind of error but right now i just want to find the line which caused the issue. it's giving me context in the form of [signal 0xb code=0x1 addr=0x20 pc=0x193beb] and a several goroutine stack frames. i'd like to play 'swim through the symbols', but even better i would like to be able to
<furball365>	 get context at point of failure. is there some way to do this, perhaps by hooking panic in some manner?
<ebonics>	might consider doing that for testing with curl for example
<furball365>	apologies for interrupting your flow, ebonics..
<ebonics>	furball365, i don't care haha it's offtopic anywya :)
<ttke>	heaven forbid someone interrupt with an on-topic question ;-)
<furball365>	ebonics: i'm probably off-topic too :).
<quiznilo>	have i mentioned how much i love sqlx?
<ebonics>	quiznilo, i avoided using that
<hfaafb>	sqlx is nice, cheers jmoiron!
<ebonics>	what's nice about it?
<furball365>	ebonics: btw python requests might be worth looking into for testing if you haven't already
<freeze>	sqlx is nice
<ebonics>	furball365, what do you mean python requests
<ebonics>	for http you mean?
<furball365>	ebonics: yes.. testing
<ebonics>	or just randomly fuzzed tcp packets
<quiznilo>	well, to start with, i love how i can create dbs using my structs
<ebonics>	quiznilo, yeah i needed that functionality too but it was quite verbose with sqlx
<ebonics>	furball365, i test with just raw tcp packets atm. i was talking about adding an http encoder/decoder so i could streamline it with curl instead
<freeze>	i like the flip side, pushing my selects into structs
<quiznilo>	.mustexec(schema)
<ttke>	ebonics - "requests" is the name of a python class for doing http-stuff.  the module is called "requests".
<quiznilo>	well.. not using structs
<furball365>	ebonics: for testing rest interfaces etc. fuzzing tcp packets would be better done with another tool i think
<ebonics>	furball365, yeah :) there's no real "tool" other than the inherent sockets a language supports  in that case
<ebonics>	you have to write your own
<furball365>	ebonics: scapy? i don't know much beyond what google is telling me..
<ebonics>	furball365, i use that for more low level stuff like 802.11 fuzzing
<ebonics>	it's not really suited for testing services i think
<ebonics>	btw quiznilo have you checked out gorm?
<ebonics>	i chose to use that over sqlx
<quiznilo>	yes
<quiznilo>	long ago
<quiznilo>	peeking again
<quiznilo>	so much good db work going on
<quiznilo>	ya orm, a bit too much for my uses
<ebonics>	im working on a *imo* cool framework using gorm for graph databases
<ebonics>	rip
<viking>	lol
<furball365>	i'm new.. was that a mass extinction?
<furball365>	haha
<furball365>	they're back!
<furball365>	anyway.. if anyone knows a good way to pinpoint where a runtime panic has occurred in a debug environment.. like catching an exception in visual studio, say, then i would appreciate knowing how.
<smw>	furball365, what does that mean? panics have stack traces
<furball365>	so.. is it always the first stack trace which indicates point of failure?
<furball365>	i've got multiple goroutines going
<cespare>	furball365: yes
<furball365>	cespare: thanks.. i see the debugger page has been updated which is good news, but it doesn't look like you can break on panics yet
<furball365>	cespare: looks like someone has done a good job of digging into it, though. great!
<furball365>	cespare: https://sourceware.org/gdb/wiki/godebugging
<hfaafb>	displease: defaulthandler should return a function whose signature matches service.handler
<hfaafb>	but
<hfaafb>	w and r aren't defined
<displease>	so it should be a function that returns a function?
<hfaafb>	if that's what you want
<hfaafb>	sure
<displease>	i'm not exactly sure if that's what i want
<displease>	just trying to figure out the best way to define handler functions and pass them in
<hfaafb>	in the simplest case, just use an anonymous function
<furball365>	displease: i don't know if you're on-the-level, but if you check into it a decent editor will catch your errors asap. try looking at vim-go and the like. don't use a vanilla text editor if you want to be productive.
<displease>	i've been using sublime text with the go thing but i don't like it
<displease>	what else is out there?
<displease>	not a big vim fan
<dmarlow>	esarl: use a pointer as the val
<furball365>	displease: probably there is at least one emacs vet around. i'm fine with vim and there is probably at least one sublime user around. you can also run 'go vet', but it's easier if it's integrated into the editor hotkeys
<hfaafb>	displease: i think what you might want is to define a type  that implements http.handler
<displease>	not a big emacs fan either lol
<dmarlow>	esarl: https://play.golang.org/p/odubab5q2q
<hfaafb>	displease: https://elithrar.github.io/article/custom-handlers-avoiding-globals/
<displease>	oh awesome, thank you
<esarl>	dmarlow: thanks!
<displease>	hfaafb: i've been wary of googling for solutions to things, when i did that week i ended up reading a garbage book that gave me a ton of bad habits
<displease>	seems like theres a lot of blind-leading-the-blind out there
<hfaafb>	displease: defining a http.handler is as simple as implementing servehttp, it's extremely straight forward
<displease>	intellij's go support looks nice
<muraiki>	displease: i really like intellij
<dmarlow>	esarl: also, your type info in the var declaration is optional. you can leave that stuff off and it's a lot less typing/reading/etc
<displease>	muraiki: will the community edition work or do i need to get ultimate
<muraiki>	displease: ce works fine. i normally use either vim or sublime, but intellij's go plugin is excellent
<esarl>	dmarlow: oh. i wanted it global because it gets initialized in one function and is used in other functions. is there a better way of doing that?
<dmarlow>	global is fine, although i would prob shake a stick at you if we were working together for this kind of thing
<displease>	muraiki: yeah im accustomed to sublime but i really dont like the go plugin for it
<dmarlow>	i was just saying that the type is inferred, so a global var headers = make(map[string]*header) is fine
<esarl>	dmarlow: i guess i should be passing it around instead of using global then?
<hfaafb>	displease: http://play.golang.org/p/ixno_bsnez
<hfaafb>	this is a common pattern ... well defining your own handler is a common pattern
<displease>	right
<displease>	thank you
<furball365>	displease: hopefully u r pleased :)
<displease>	i am
<displease>	lunch time, bbs
<andlabs>	https://github.com/golang/go/commit/ec87dbf91330b8f12851b50675c812e4e3aee203 commit message is best non sequitur
<hfaafb>	i'm confused about that diff
<dmarlow>	andlabs: strange that the defer isn't after checking err from set
<jmoiron>	hfaafb: thanks
<cespare>	huh, weird log line: http://play.golang.org/p/cz5txo5kkq
<cespare>	in particular the asm_amd64.s:402
<wessie>	hello!
<skripted>	jmoiron: ah true, thx
<furball365>	don't know if anyone is overseeing the gccgo branch, but it does not appear to configure properly on yosemite (maybe other systems, too.. don't know). "the following requested languages could not be build: go".
<smw>	furball365, got any more info on what you did?
<iant>	furball365: gccgo does not work on darwin
<iant>	sorry
<smw>	furball365, were you trying to compile gcc?
<smw>	iant, ah, didn't know that :-(
<iant>	furball365: http://gcc.gnu.org/pr46986
<furball365>	smw: nevermind.. it was complaining because i ran configure in the src directory. the error message is perpendicular to the cause but i can see why it would complain
<furball365>	smw: i just run ../gccgo/configure from the build directory and it's fine
<cespare>	furball365: ok, but it's still not going to work
<furball365>	cespare: i think i'm finding that out now :)
<cespare>	furball365: the person who wrote gccgo just told you it doesn't work on darwin :)
<furball365>	cespare: thanks! i'm using https://golang.org/doc/install/gccgo .. perhaps a note might deter people
<furball365>	cespare: i don't see a way to annotate the page.. i'll let the site manager know if there is a way to get word to them.
<furball365>	cespare: unless that is also one of your hats..
<cespare>	iant: reasonable to file a ticket asking that supported os/arch be added to the gccgo installation page?
<cespare>	furball365: my only hat is "member of the peanut gallery"
<iant>	cespare: it would quickly go out of date
<iant>	there is no fundamental reason that gccgo can not work on darwin
<iant>	it's just that nobody has done the work
<cespare>	iant: ok thanks
<iant>	a better approach would be for the gcc configure script to give an error
<furball365>	iant: that would be good, too, but it's a fairly lengthy source download
<furball365>	iant: there are a lot of macs out there. is it safe to say that gccgo isn't as widely used? i was interested in its 'native' debugger support
<iant>	furball365: it is safe to say that gccgo is not as widely used, yes
<iant>	it does work, though
<furball365>	iant: it appears to still have some issues, but it is perhaps better than golang judging by this: https://sourceware.org/gdb/wiki/godebugging .
<cespare>	furball365: if you're set on using gdb extensively with go you're gonna have a bad time.
<echlebek>	it's true, i tried it once and it was a bad time.
<bnagy>	it's like.. using gdb... but even worse!
<furball365>	cespare: so i am told. do you know whether the docker team uses gdb? at that level i would think they might get some paradigm leaks.
<cespare>	furball365: no idea
<quiznilo>	hmm... os.enoent doesn't seem to exist
<cespare>	quiznilo: os.isnotexist ?
<iant>	quiznilo: use os.isnotexist(err)
<cronos>	quiznilo: or syscall.enoent if you really need it
<cespare>	quiznilo: enoent is os specific and lives in syscall
<quiznilo>	oh
<quiznilo>	thanks
<furball365>	bnagy: i don't mind gdb.. but just when you need it. the emacs interface wasn't bad last time i used it.
<echlebek>	i gotta ask. what is a paradigm leak and how do they occur?
<displease>	is there a way to use lldb instead of gdb
<op3nsv>	hey guys, quick question. i am listing all the ips possible in different subnets. but for the life of me i can't figure out a way to skip the first and last ip address no matter which subnet class i end up on.
<op3nsv>	here is my code i have:
<op3nsv>	https://play.golang.org/p/wbkcf8yrnk
<op3nsv>	i made a hardcoded value to make the golang play code easier to read
<op3nsv>	do any of you have ideas ?
<wayne>	echlebek: i don't know. is that on a space ship?
<jackdesert>	having trouble getting the *entire file* to write from stdin to local storage:  https://gist.github.com/jackdesert/a109b0549f19997eda9b . it stops writing when it gets a few lines from the end. am i missing something?
<echlebek>	wayne: maybe on a space ship with an infinite improbability drive
<displease>	op3nsv: doesn't https://golang.org/src/net/ip.go do that already
<tv`>	jackdesert: that's bufio still holding your outgoing last chunk
<tv`>	jackdesert: flush and close
<jackdesert>	tv`: that makes sense ..
<tv`>	jackdesert: also, most of what you have there is unnecessary, _, err := io.copy(tempfile, os.stdin) is plenty
<furball365>	echlebek: the leaky paradigm is the bane of all frameworks. a leak is when something unanticipated happens and you have to find out how the framework was put together. in this case a leak would be a runtime panic due to something breaking in the middle of a large body of 3rd party golang.
<op3nsv>	displease: which function are you thinking of, i can't seem to find anything that would skip the first addr and the broadcast addr
<echlebek>	furball365: oh i see.
<displease>	op3nsv: i missed the first part, whatre you trying to do
<echlebek>	furball365: this happens in every framework i've used :)
<furball365>	echlebek: basically the tower of babel..
<echlebek>	furball365: except latex
<op3nsv>	displease: with the code i provided here https://play.golang.org/p/wbkcf8yrnk i am listing all the ips possible in a subnet of a network. but i need to skip the first and last ip addr that are being printed out
<op3nsv>	and the subnet will vary as it gets a specific subnet depending on the kind of network it is on, in the play code i just hard coded a value so you can see how my iteration func works
<tv`>	op3nsv: is this enough of a hint: https://play.golang.org/p/urulbskn52
<op3nsv>	i am trying to find a way in the iteration func to skip the first and last and can't think of a way to do that with the way i have it
<tv`>	op3nsv: or just literally inc once at the beginning
<displease>	^
<tv`>	(though that approach won't solve the broadcast address part)
<tv`>	equal can; just delay the fmt.printf until you know it's not the last one
<furball365>	echlebek: it's a tough standard to meet. rails has done ok. latex will still cause you difficulty, like any framework, if you try to bend it too far. i just read a kindle book with the strangest typesetting. but i think we both know who wrote it :). it might do weird things, but it probably wouldn't crash.
<furball365>	echlebek: joel spolsky calls it the "law of leaky abstractions" http://www.joelonsoftware.com/articles/leakyabstractions.html
<bnagy>	augh refs to classful routing in a cidr handling func.. which only handles netmasks on byte boundaries ;_;
<echlebek>	furball365: definitely. i've never done advanced typesetting but latex never caused me to need to learn tex.
<op3nsv>	how can i delay since the broadcast will be different depending on the subnet
<jackdesert>	tv`: your simpler version does the trick nicely: https://gist.github.com/jackdesert/6dc9d3487543e2e0c770
<echlebek>	furball365: yes, familiar with that
<op3nsv>	if i knew the subnet like say it was always a class c then i skip quite easy
<op3nsv>	but since it constantly changes i thought there might be a way in my inc function
<tv`>	op3nsv: e.g. if you were to gather these in a slice, you could just slice it out
<furball365>	echlebek: i just like to know i have a net before venturing too deep
<op3nsv>	yeah i was thinking about that
<bnagy>	fun fact - classes and netmasks are orthogonal
<tv`>	op3nsv: but if you need to do it one by one, and don't want to hold a "last" variable, then construct the broadcast address and equal..
<bnagy>	imho just do it as a mask on a uint32 and then convert it back
<bnagy>	suddenly proper netmask support
<displease>	mask seems like the way to go
<displease>	funny that you're doing this, was just about to do something similar
<tv`>	bnagy: in the comment, sure, but ignore the lie and read the code..
<tv`>	all comments lie, anyway
<echlebek>	/ this comment is a lie
<echlebek>	irc client ruins my joke
<bnagy>	ohhhhh
<bnagy>	more reasons i shouldn't irc before coffee kicks in
<bnagy>	nn, m := networknumberandmask(n) yay stdlib
<bhenderson>	is there a way to format floats such that: 1.1 => "1.1", 1.0 => "1"
<dmac>	bhenderson: https://play.golang.org/p/lb_ahrcien
<cespare>	http://play.golang.org/p/rmhkwgy0ga
<cespare>	oops late
<skelterjohn>	oh didn't know about that verb
<quiznilo>	i'm given this bytes.buffer named 'buf', filled with stuff i'm trying to write to a new file
<bhenderson>	interesting
<echlebek>	heh %g doesn't even say it will do that in the docs
<bhenderson>	dmac: cespare thanks
<echlebek>	not explicitly anyway
<quiznilo>	so like any experienced go coder, i create a new file f, _ := os.create("foo")
<skelterjohn>	lol
<echlebek>	haha
<bnagy>	:)
<quiznilo>	and then i f.write(buf)
<quiznilo>	and that's when disaster strikes
<cespare>	echlebek: sure it does
<cespare>	"for %g it is the smallest number of digits necessary to identify the value uniquely"
<quiznilo>	thankscannot use buf (type *bytes.buffer) as type []byte in argument to f.write`
<echlebek>	cespare: ah, ok
<cronos>	quiznilo: io.copy
<lemmi>	quiznilo: well.. is a *bytes.buffer a []byte ?
<quiznilo>	all this io stuff is driving me crazy
<skelterjohn>	quiznilo: buf.bytes()
<quiznilo>	i don't know... i suppose i should look it up
<cespare>	skelterjohn: cronos's answer is better :)
<bnagy>	quiznilo: and check your errors, that's why everyone was laughing
<quiznilo>	no, they aren't laughing at me.... .... are they?
<echlebek>	yeah i was assuming disaster struck when you tried to create the file
<ebonics>	i thought you were joking haha
<skelterjohn>	i was assuming the disaster was a npe when you tried to write
<ebonics>	like the first paragraph of the go spec explicitly says not to do that
<cespare>	not the spec
<skelterjohn>	cespare: agree.
<skelterjohn>	(about cronos's answer)
<ebonics>	i forgot where i read it maybe the tour
<ebonics>	but it was like the first thing i read about go
<skelterjohn>	probably 'effective go'
<echlebek>	spec doesn't care if you check your errors
<ebonics>	it seems like the go spec would
<ebonics>	:d
<skelterjohn>	nah, spec just describes the language
<op3nsv>	tv`: i am having trouble adding each ip to a slice
<skelterjohn>	the language allows you to not check errors
<op3nsv>	https://play.golang.org/p/efqpmvb6gm
<quiznilo>	okay, we have io.copy(), what about the fmt.fprint family
<ebonics>	skelterjohn, check out the ecmascript spec lol
<ebonics>	has tons of idioms
<op3nsv>	tv`: i keep getting the last ip in every spot, do you see what i might be doing wrong?
<skelterjohn>	op3nsv: there must be a bug in inc()
<skelterjohn>	op3nsv: you get the last ip in every spot but the first
<harikb>	is init a reserved word?
<op3nsv>	oop wrong word
<op3nsv>	https://play.golang.org/p/nv8b-mnok6
<skelterjohn>	harikb: sort of, it's a reserved function
<smw>	harikb, not a reserved word, no
<op3nsv>	skelterjohn: well here is the thing i when i print ip with the slice funciton it prints out the right ips
<skelterjohn>	op3nsv: i bet it's a pass-by-value issue
<skelterjohn>	op3nsv: i don't really understand what inc() is doing, but i bet it only modifies a local copy
<smw>	harikb, reserved words like type pretty much can't be used anywhere, init just can't be a package level function
<smw>	harikb, and even still, i think a different function signature is allowed
<skelterjohn>	op3nsv: oh, then it's the opposite of what i said
<quiznilo>	what is the point of having bytes.buffer *and* buf.bytes()?
<op3nsv>	skelterjohn: it is starting from the last part of the ip and incrementing until the ip is no longer in that subnet
<skelterjohn>	quiznilo: one is a type, the other is a method on that type?
<bnagy>	quiznilo: to convert between them
<smw>	quiznilo, buf.bytes is bytes.buffer.bytes()
<skelterjohn>	op3nsv: your slice has pointers all to the same object
<bnagy>	buffer gives you all the io primitives which is super handy
<quiznilo>	lol smw
<skelterjohn>	op3nsv: so when you inc() it, it is updating everything in the slice, since it's all the same thing
<smw>	quiznilo, ?
<bnagy>	but sometimes you need a []byte out at the end
<op3nsv>	hmm i am new to the pointer stuff, suggestions on fixing it?
<harikb>	skelterjohn:  i am reading effective_go - i see init() is already reserved for a particular use - in fact that is my exact use case. but i am not quite sure when it will be called. i just want it run the first thing from main(). i put a call to init() in main and that is how i realized it was a reserved one
<skelterjohn>	harikb: the spec describes when init()s are called
<skelterjohn>	harikb: but briefly, any init() is called before main() starts, and after the init()s of any packages the current package imports
<harikb>	ok thanks
<skelterjohn>	i *believe* all the inits() are called in the same goroutine, though they can start additional goroutines that will begin execution potentially before main() starts
<furball365>	harikb: you can also define multiple (!) init()s.. that struck me as unusual the first time i saw it
<skelterjohn>	yeah i still think that's pretty weird
<echlebek>	i think it's weird, but i can't say it has a real impact on anything
<echlebek>	at least not in my corner of the world
<echlebek>	how much init() do you really need anyway?
<bnagy>	i haven't found a use for init in anything that has a main tbh
<bnagy>	maybe i just lack imagination
<echlebek>	yeah, you don't really need init() when you have main
<bhenderson>	bnagy: flags?
<bnagy>	why not call parse() in main?
<skelterjohn>	i use init() for driver registration
<skelterjohn>	basically, when a package wants to set state
<skelterjohn>	less use in main(), i prefer sequencing to be explicit.
<bnagy>	i totally get it for packages
<bhenderson>	bnagy: yeah, i don't know... i just follow the docs of the flag package :)
<bhenderson>	maybe blindly
<echlebek>	yeah, it makes sense for packages. what doesn't make sense is why you'd want to break up your inits within a package?
<skelterjohn>	i dislike the flag package
<harikb>	now i have the loading of a config inside the init - nothing that couldn't go in to main() strictly
<smw>	echlebek, it allows you to have one per file
<tv`>	echlebek: e.g. define a thing, register a thing; define a thing, register a thing; ...
<smw>	echlebek, that was useful to me once.
<echlebek>	smw: yes i understand that, just don't see the point of it
<smw>	echlebek, i was using inits to deal with recursion of dependencies
<skelterjohn>	no one would wonder why you could only have one, if you could only have one
<smw>	echlebek, a = combine(b, c); c = a
<bhenderson>	doesn't the go cmd itself have lots of inits?
<smw>	echlebek, i was doing some magic to say c = indirect(); init(){c.bind(a)}
<tv`>	bhenderson: subcommand registration is a good example of what i was talking about
<smw>	echlebek, but yeah, it is great for registration where you want to register in the same file you define it
<echlebek>	smw: i guess, just seems a little at odds with the concept of a package being a single logical unit
<kevinburke>	what's the best way to define an interface that has functions, but also variables? say i wanted to let someone implement something that had a drive() method but separately wanted to let them set a maxspeed parameter
<tv`>	kevinburke: interfaces have nothing but methods
<saidinwot>	kevinburke: interfaces only define behavior
<smw>	echlebek, doing things closer to each other that depend on each other is good
<smw>	echlebek, like deferring close after opening
<kevinburke>	how could i combine those? could do a maxspeed() function which just returns a constant but that doesn't seem great
<kevinburke>	maybe make one interface and another struct which holds values
<skelterjohn>	kevinburke: i find it easier to address questions like that if we drop the car metaphors :)
<skelterjohn>	and use an actual case that you're working against
<echlebek>	he could be designing a self-driving car
<kevinburke>	sorry. i'm trying to make an experiment class. the user needs to define a fitness function which operates on members of the pool
<skelterjohn>	kevinburke: so, that fitness function would come in via an interface?
<kevinburke>	also want the user to be able to set things like the pool size, the mutation rate, # of iterations
<skelterjohn>	those would just be methods/fields on the experimetn type
<skelterjohn>	no interface necessary
<skelterjohn>	unless you're trying to make a framework for experiment running implementations?
<kevinburke>	so you'd have an experiment type, and an experimenter interface with a fitness method?
<kevinburke>	yes skelterjohn that's what i had in mind :)
<skelterjohn>	a fitnessevaluator interface with an evaluatefitness() method
<jmoiron>	didn't you say fitness was a function
<kevinburke>	yep
<jmoiron>	func fitness(e experiment)
<skelterjohn>	eep, that's probably a bit of an inversion there
<skelterjohn>	the experiment would use the fitness function to evaluate a particular population
<kevinburke>	hmm.. i'd like the framework to be able to perform things like crossover & mutation and do multiple iterations
<jmoiron>	functor then?
<bnagy>	kevinburke: there are a few existing ga things on godoc
<kevinburke>	without needing to loop back into user control except for the fitness fn
<bnagy>	you could go and steal^wexamine their apis
<kevinburke>	here's what i have now https://github.com/kevinburke/rct/blob/master/genetic/lib.go
<kevinburke>	yeah i prolly could... trying to figure out how to let the user define pool_size etc
<bnagy>	tbh all the ga stuff i have ever done i write really non-abstract implementations
<bnagy>	because then it's fast and easy :>
<echlebek>	same with monte-carlos, you can usually make a made-to-measure one in a few hundred lines
<bnagy>	you can initialize with a config struct, that's a common idiom
<kevinburke>	kk. thanks everyone for the tips, i'll try out a few of the ideas here
<bnagy>	and then provide evaluation and mutation as functions in an interface
<furball365>	iant: just fyi here is gccgo on darwin issue: https://github.com/golang/go/issues/10727
<bnagy>	maybe have that for each population member mutate() score() breed(other member) etc
<echlebek>	i wrote a ga that let you breed with {n | n > 0} other members once. things got crazy fast.
<echlebek>	that was when i realized i didn't really know what i was doing and should just stick to basics.
<bnagy>	with a ga?
<lemmi>	yep
<bnagy>	bro do u even np-complete?
<bnagy>	ga is not for 'optimal' ;)
<lemmi>	i know the optimal score
<lemmi>	and if it wasn't possible to find a propper solution in a timely fashion a differen mix of pizzas had to be ordered
<bnagy>	"a ga is the second-best approach to almost any problem"
<skripted>	anyone using a testing lib like gingko+gomega or do you guys prefer stdlib testing?
<skelterjohn>	ga's can find local maxima. when there is only one maximum, it can be optimal :)
<bnagy>	to address local maxima for pizza you could do simulated congealing
<bnagy>	*rimshot*
<bnagy>	that killed them in salt lake city :(
<heydabop>	what the hell
<quiznilo>	lol
<echlebek>	bnagy: i understood that reference
<furball365>	bnagy: congealing :)
<echlebek>	my ga bred musical scales together. what came out was not unlike free jazz.
<hfaafb>	is it weird that i rarely see people here asking for help with concurrency
<kolorado>	i'm distributing jobs across ec2. i rsync data to an ec2 instance, run a command that takes ~1hr, rsync the output and then terminate the instance. any best practices on checking the status of the job while it's running, and knowing when to terminate? i was thinking using the sqs (simple queue service) would be a good-enough thing to use.
<echlebek>	hfaafb: when i have concurrency problems i usually just suffer in silence ;)
<kolorado>	this is my first foray into distributed computing. i'm doing it all in go but this question is not go specific.
<echlebek>	hfaafb: i see concurrency questions in here though.
<hfaafb>	i feel like channels are the missing piece in my go knowledge
<echlebek>	i bet it does some tomfoolery to preserve the semantic meaning :)
<dmac>	yeah, probably a wrong guess
<dmac>	nothing jumped out at me here: https://golang.org/src/cmd/gofmt/rewrite.go
<echlebek>	well (a + b) * c produces a different ast than a + b * c, maybe the tool will only do transformations that preserve the ast
<robot-beethoven>	that sounds like a good constraint
<freman>	http://play.golang.org/p/nldzeeyhpi - shouldn't that exit after 1 second?
<skelterjohn>	freman: at first glance it seems like it
<cespare>	freman: no
<cespare>	freman: the time.after is evaluated each loop iteration
<freman>	suppose the question i should have asked, why not :d
<cespare>	freman:  you probably want time.timer
<freman>	ah
<skelterjohn>	oh haha yeah
<freman>	time.after manual says it works the way i set it up... http://golang.org/pkg/time/#example_after or at least that's what that example indicates :(
<freman>	oh, no i get it
<skelterjohn>	you need to create it once before you start the loop
<freman>	it basically sleeps that long
<skelterjohn>	ch := time.after(1s); for { select { case <-ch: .... } }
<freman>	yeh, it's being used there as a timeout per request i get it now
<freman>	brilliant, this works :d
<freman>	http://play.golang.org/p/eisflzwtz6
<scientes__>	can someone help me debug this rbtree implementation: http://paste.debian.net/172305/
<bnagy>	scientes__: you'll probably have more luck if you can put runnable code on play.golang.org
<scientes__>	http://play.golang.org/p/ncpypjgyor
<scientes__>	the problem is that it doesn't work, they insert all wrong
<scientes__>	i checked and rechecked it against the c it is based on
<scientes__>	what about that c-to-go translation tool the compiler used, maybe i can use that
<scientes__>	question: does the gc hold onto an item if the pointer points to somewhere in the object, or only the beginning
<scientes__>	slices would probably only work if it can point to the middle
<bnagy>	scientes__: yeah you're going to need to add code demonstrating the failure :)
<bnagy>	afaik backing arrays are live until all slices that view any part of them are gone
<bnagy>	but i wouldn't rely on it
<scientes__>	cause i'm using offsetof
<scientes__>	so its kinda important
<scientes__>	its not a slice, but it points to the internal
<scientes__>	and yes of course a slice keeps the whole backing array
<bnagy>	why are you using unsafe?
<bnagy>	oic.. wtf
<bnagy>	try not doing that
<maniacal>	hi.  how can i do a multi-line assignment like this: http://play.golang.org/p/3nnjxjj7fr
<scientes__>	the real project is to add type safety to porting the container_of() macro the linux-kernel
<scientes__>	but i have to get the reference working before i can demonstrate the compiler feature needed
<daved>	maniacal: add a comma to the last item
<maniacal>	awesome.  thx
<daved>	maniacal: http://play.golang.org/p/ewseqxqemd
<maniacal>	that'll be a tough one to remember :)
<daved>	maniacal: the compiler adds a semi-colon to the end of lines, so adding the comma tells the compiler that more is coming and not to add the semi-colon.  it should be easy to remember if you think of it that way.
<scientes__>	maniacal, you can also move up the closing bracket
<maniacal>	oh.  for sure.  that will make it easier to remember
<maniacal>	scientes__: ic.  then don't need the comma.  thx
<daved>	^ that too, but often the "look" of maniacal's snippet is desired.
<scientes__>	daved, it also makes version control nicer with the trailing comma
<daved>	scientes__: why's that?
<maniacal>	yeah.  i don't like having it on the same line as the last item
<maniacal>	i'd rather have it after i think
<scientes__>	cause you don't have to change that line to add another at the bottom daved
<daved>	scientes__: oh, i see.
<scientes__>	bnagy, http://play.golang.org/p/igdqwpdktk
<scientes__>	the outputs should be the same but they are not
<scientes__>	http://play.golang.org/p/k-gyttn-eo
<bnagy>	the first thing i would do is get rid of unsafe
<edcarter>	anyone think that a go interpreter would be feasible? compilation tends to be pretty fast
<bnagy>	edcarter: it makes no sense
<bnagy>	this is partly my opinion and partly a digest version of the last 100 times it has come up on the channel
<scientes__>	edcarter, non sequitor
<scientes__>	compilation speed and interpreter totally unrelated
<scientes__>	edcarter, anyways, the answers is no. go's lack of forward declaration means the entire file must be scans before anything can be interpreted
<edcarter>	scientes__, thanks for the info
<jy>	all, whats the best dev stratagy for working with a github fork of a project that has includes all over the place for the parent.. if i need to do work on both the main project and the includes
<scientes__>	edcarter, doesn't mean you can't do jit however
<bnagy>	jy: when i've done it i left the import to upstream when i could, otherwise i forked and changed the imports to my fork
<jy>	bnagy: is there anyway to do local includes.. like they do import github.com/owner/app/collector is there anyway to import ./collector
<bnagy>	i changed it to github.com/myfork/app/collector iff i needed to change it
<jy>	ok thanks
<edcarter>	any of you guys use goconvey? looks like a pretty nice tool
<freman>	http://play.golang.org/p/gqq6ev79wf 299-337 + 392-420 - i think i"m doing this the hard way
<freman>	thinking it might be better to just tell each goroutine it can run for $x seconds, and just harvest them all when their done
<freman>	s/their/they're/
<steveej>	hey there, how do i access the const items listed here? http://golang.org/src/os/types.go?s=1044:1064#l20
<steveej>	i use os.stat() to retrieve a fileinfo, and i want to check if it's a device using modedevice
<hyphenated>	steveej: fi.mode() & os.modedevice != 0
<steveej>	thanks hyphenated, so the const vars are available from os.
<hyphenated>	steveej: http://play.golang.org/p/rhnpalnhte
<daved>	not that it helps much, but os.devnull exists.
<scientes__>	bnagy, hmm yeah seems like it was the unsafe code
<scientes__>	http://play.golang.org/p/1et8luepc8
<scientes__>	but now i can change the sorting
<scientes__>	cause its by pointer location
<scientes__>	still not sure what was screwing it up....i need that stuff...
<scientes__>	could be the gc.....
<bnagy>	i can't see why you would need / want unsafe for an rb tree in go
<scientes__>	anyone know how the gc works?
<scientes__>	bnagy, with a compiler feature it can be type safe
<scientes__>	bnagy, except for the implementation
<scientes__>	bnagy, i was trying to make the write up on the feature
<scientes__>	bnagy, its how rbtrees work in the linux kernel
<scientes__>	using container_of() which is based on offsetof(), but the feature adds type safety so users of the rbtree impl. don't need unsafe
<bnagy>	ok, well i just spent all day parsing so my brain is broken and i don't want to try to actually understand your zero-comment algorithm
<bnagy>	you can disable the gc, if you think something is getting hoovered
<scientes__>	how
<bnagy>	in runtime, isn't it?
<scientes__>	its this: https://github.com/xemul/criu/blob/master/rbtree.c
<scientes__>	bnagy, oh yes i remember
<bnagy>	if i had to guess i'd say you're not looking at the offsets of the things you think you're looking at
<bnagy>	but i can't back that up, sry
<bnagy>	add moar printf
<scientes__>	no way to turn off gc in runtime
<scientes__>	only run it
<scientes__>	oh gogc=off
<freman>	so how to ya'll break things up... i usually end up with one file of types... but can't decide if the func (x type) funcs should go in there with them...
<scientes__>	variable
<bnagy>	scientes__: setgcpercent to negative
<bnagy>	freman: imho put methods in with the types they act on
<bnagy>	but (again imho) i don't have one file per type or anything, i use bigger, more thematic files
<freman>	cos i have 500 lines of code, and the first 100 are just types most of which are related to the parsing of xml, the following 100 lines are all unmarshal* functions...
<bnagy>	turns out it's easier to search within a big file using modern editors
<bnagy>	500loc is nothing :)
<bnagy>	just stick it in one file
<bnagy>	type meths type meths ...
<scientes__>	bnagy, s/+/-/
<scientes__>	^^
<bnagy>	?
<freman>	i went type1, type2, type3, type4, meths1, meths2, meths3, meths4, funcs
<bnagy>	up to you, but i don't like that style
<bnagy>	and based on unscientific sampling that's not common
<freman>	heh, that's why i'm here asking - i can't find a style i like :d
<freman>	maybe the problem is sublime...
<bnagy>	i do type, meths ... funcs in vaguely fdecl order main at the bottom
<ebonics>	do you put main at the bottom out of habit
<bnagy>	i don't know if https://github.com/golang/go/wiki/codereviewcomments has anything
<bnagy>	well personally i put it there because that's where i'm used to looking for it in other people's code
<bnagy>	but all this is just my opinion, man
<jules_>	good day! i kind'a new here in
<jules_>	go
<hyphenated>	freman: you probably want to keep types and their related methods in the same file
<jules_>	just a quick question, is it possible to declare a variable without a type?
<_jesse_>	i tend to put methods next to their types
<hyphenated>	freman: but overall "how to organize shit" is hard to explain, except you know when things are disorganized
<bnagy>	jules_: strongly typed. ie no.
<_jesse_>	jules_: no, unless during initialization where the type is inferred
<_jesse_>	e.g. x := 5
<jules_>	oh i see thanks :)
<bnagy>	oh, derp, i don't think of that as 'without a type'
<bnagy>	my bad
<bnagy>	did i mention i have been parsing pdf all day?
<bnagy>	o_0
<_jesse_>	that sounds...
<_jesse_>	fun
<hyphenated>	bnagy: that sounds terrible
<bnagy>	rite?
<freman>	yeh, my code feels a bit like my house - messy, not because it's "messy"  but because it isn't organised (insufficient storage - something i'm working on with a new desk and work space area in the nerd cave)
<hyphenated>	freman: just put it in the kitchen, so you don't have to get up for snacks and meals
<ebonics>	genius
<freman>	nerdroom actually opens into the kitchen besides the fridge :d
<_jesse_>	maybe it is a weird corrolary to conways law that code reflects the physical environment it was written in
<bnagy>	i wish
<hyphenated>	i'm a bit lucky, a year ago i moved back from overseas with nothing but clothes. so i don't have a lifetime of accumulated junk. it all got given away before a big move back
<freman>	_jesse_: this is all written in a nice clean office with marketing making lots of noise... so i can believe that :p
<bnagy>	i wrote my last bunch of stuff sitting by the ocean in palau
<jules_>	can you guys help me out? i am creating a simple cli program that is based on https://github.com/jeanmertz/consulctl and https://github.com/ashcrow/consuloretcd to communicate with the consul/etcd kv store. i am having trouble on making it work in both "consul" and "etcd" mode. it works if it just operate in one mode.
<bnagy>	it's not tropical and breezy at all :(
<jules_>	this is my repository https://github.com/telanj/consul-kv-ceph
<freman>	i have an oscilloscope sitting on the bedside table because there's no-where to put it (and another in it's box at the foot of the bed).
<cronos>	hyphenated: moved 6mo ago with my clothes. managed to accumulate more junk that i previously had :(
<hyphenated>	hah
<freman>	bnagy: but i bet it's not depressing
<_jesse_>	jules_: you are declaring the client variable inside of conditionals -- they won't be available outside
<_jesse_>	not sure if that is your issue specifically, but it is definitely an issue
<_jesse_>	e.g. https://github.com/telanj/consul-kv-ceph/blob/master/command/put.go#l34
<_jesse_>	is redeclaring `client` that you would have declared on line 31
<_jesse_>	`client`s type should also be `consuloretcd.keyvaluestore`, not `interface{}`
<jules_>	_jesse_: thank you, i'll try what you have said
<bnagy>	https://github.com/bnagy/pdflex/blob/master/cmd/pdfshrink/main.go so. much. pain.
<bnagy>	need beer, stat.
<_jesse_>	i can't even imagine if you had to handle other pdf versions as well
<_jesse_>	i assume you've seen http://cuddle.googlecode.com/hg/talk/lex.html
<jules_>	jesse_: this happened after i did what you said. http://pasteio.com/ih6
<bnagy>	yeah that's what i based the lexer on
<bnagy>	this is all on top of that. tbh the lexer was long but less mind-bending
<_jesse_>	jules_: you post the new code that causes that error?
<_jesse_>	just the one file is fine if you don't want to commit it
<jules_>	this is the new code http://pasteio.com/ih7
<_jesse_>	jules_: exactly, you are declaring `client` again
<_jesse_>	use `=` not `:=` for assignment
<_jesse_>	`:=` does declaration and assignment
<jules_>	_jesse_: thanks a lot! it now works :)
<_jesse_>	np
<hendry>	can someone explain why i can't build or `go get` outside the gopath which seems to be, by default $home/go ?
<hendry>	sometimes i just want to work from /tmp or something
<hyphenated>	hendry: you can temporarily set it to /tmp if you prefer
<hendry>	hyphenated: but why have this odd constraint to begin with is what i am wondering?
<hyphenated>	hendry: the go tool uses it for basically everything
<hyphenated>	if you don't want to use the go tool, you can invent your own way of doing..everything
<daved>	hendry: or, create $gopath/src/scratch/tmp0
<chance>	hendry: all the 'go' tools use gopath
<chance>	that's just how they work
<chance>	you can compile go code using the go compiler without the go tools
<hendry>	why can't it just work with the cwd? what other features do `go tool` provide since it has a defined $gopath?
<daved>	if using any cwd, where will installed binaries go?
<daved>	should it assume, after you've gone outside of convention, that you will be ok with convention for installed binaries?
<hendry>	daved: i can manage where my own binaries deploy myself, e.g. ~/bin or /usr/local/bin ... i am not sure where/how go thinks they should live
<daved>	hendry: i knew i felt weird saying "install 'binaries'"
<daved>	s/binaries/packages
<daved>	https://golang.org/doc/articles/go_command.html#tmp_3
<daved>	hendry: the second to last paragraph in the linked section addresses your concern directly.
<chance>	hendry: well first, you need some kind of canonical import path
<chance>	if cwd was your gopath, then it would expect {src,pkg,bin} all in your cur dir
<chance>	which could be a pain since you might not want all those things in the same dir as your source.
<pnsrc>	hi, is there a workaround to convert a []uint64 value to uint64?
<robot-beethoven>	one is a slice of the other
<daved>	pnsrc: as in, a reduce function?
<pnsrc>	i want to use a member of a slice as a uint64 value
<daved>	pnsrc: if you know which, it would be myint64[i]
<pnsrc>	i tried, that, but got a mismatched error
<pnsrc>	i'll post it
<daved>	pnsrc: http://play.golang.org/p/mou2qhbbxf
<daved>	pnsrc: further - http://play.golang.org/p/rvv2dpwxw9
<pnsrc>	thanks
<fivetwentysix>	how can i start a server and close it, or start 2 servers rather? http.listenandserve(...) blocks...
<chance>	use the go keyword
<fivetwentysix>	okay, so create a go routine? how would i close the server gracefully...
<daved>	fivetwentysix: please define gracefully
<chance>	^
<fivetwentysix>	no memory leaks, waits for requests to finish?
<fivetwentysix>	daved: ^
<chance>	generally you write a custom listener or something
<daved>	i use https://github.com/tylerb/graceful
<daved>	i have about 8 servers setup and run.  there is a waitgroup involved, and other minor tricks for reloading, etc.
<chance>	generally libraries work
<chance>	but it's pretty easy to write too
<pnsrc>	one more question, is "copy(myslice, myfunc(num))" a good way to to make a slice identical to output of an external function?
<chance>	you basically write a custom listener with a different accept() method.
<fivetwentysix>	daved: wow, one go file. 300 lines
<daved>	worth noting is that i disable the sigint/sigterm handling that is provided and handle it myself with my own lib - https://github.com/codemodus/sigmon/
<fivetwentysix>	that's some high quality code
<chance>	its not that hard to write.
<daved>	oops, need to push some changes to my lib.
<keepguessing>	i see multiple git repos for godef. which one should i be useing?
<keepguessing>	rogpeppe/godef · github vs buaazp/godef · github ?
<keepguessing>	ok looking at the individual repos found that one was for sublime-test
<keepguessing>	s/test/text/
<pnsrc>	i get "panic: runtime error: index out of range"
<edayo>	keepguessing, im wondering why you arent installing with package control
<keepguessing>	edayo, i am new to go. so golang has package manager :-)
<keepguessing>	edayo, is it gopm?
<keepguessing>	edayo, are you asking me to use the default package manager for my linux dist?
<edayo_>	no im talking about: https://packagecontrol.io/
<edayo_>	its the semi-official package manager for sublime
<keepguessing>	edayo_, i am not using sublimetext. i am using vim.
<pnsrc>	you could use vundle, i guess
<keepguessing>	pnsrc, i installed vim-go via vundle. but it throws an error saying godef is missing.
<edayo_>	keepguessing, my appologies, i from the repo, godef seems to be a sublime-text plugin, i didnt realise it could be used with vim
<keepguessing>	pnsrc, i install gocode the same way.
<keepguessing>	edayo_, i am not sure it can be. i am asking around too :-)
<keepguessing>	http://gopm.io/ maybe i could use this one.
<edayo_>	keepguessing, ah in that case, id be interested in the answer too
<sodae>	keepguessing: read the vim-go readme
<sodae>	keepguessing: :goinstallbinaries
<keepguessing>	sodae, i ran that and it did not do anything. i ran it again right now and it worked. when i tried the first time i have missed some steps. so probably tracing my steps back would have helped
<keepguessing>	sodae, thanks for the pointer.
<daved>	pnsrc: "panic: runtime error: index out of range" means just what it says.
<pnsrc>	thanks, but it seems to be in range; the code has no comments and is bad, i'll recode the function with a map
<__john_doe__>	hey guys, i need to wait for all gocoroutines to finish before program terminates
<__john_doe__>	should i use chains or sync?
<daved>	pnsrc: if it matters, a map will be slower.
<daved>	__john_doe__: chains?
<daved>	__john_doe__: waitgroup
<__john_doe__>	c := make(chan struct{})
<__john_doe__>	daved: this
<pnsrc>	thanks,
<daved>	__john_doe__: channel?
<pnsrc>	bye
<__john_doe__>	daved: yes sorry
<daved>	np
<__john_doe__>	but anyway i need to pass both to my function
<__john_doe__>	right?
<daved>	__john_doe__: if there is nothing interesting involved, a waitgroup is probably best.  if something needs to be communicated, use channels.
<__john_doe__>	daved: im building image api, so the image will be uploaded and than i will use coroutine to generate thumbnails
<daved>	are you sure that you're thinking through whether it should be asynchronous or not?
<__john_doe__>	daved: well it should be async
<__john_doe__>	otherwise it;s gonna take forevery
<__john_doe__>	"forever
<daved>	many thumbnails, one person waiting?
<__john_doe__>	other way is to use message queue
<__john_doe__>	and if upload is successfull and at least one thumbnail is generated
<__john_doe__>	return result
<daved>	if you have a work request come in, and multiple things need to happen at once, and once all are done you are free to respond to the client, then a workgroup is best.
<__john_doe__>	daved: you mean i can return response, and go can continue execution in the background?
<daved>	if you wish to get any more detailed, you will need to work out how you should structure communicating between all the goroutines and the calling code.
<daved>	__john_doe__: if you don't care to wait until all things are done, then no waitgroup is needed.
<__john_doe__>	daved: yes i dont want him to wait till everything is done
<__john_doe__>	if upload is successfull and if one thumb has been created
<hendry>	thanks btw daved, almost forgot to thank you
<daved>	hendry: no problem.  think of some of the idiosyncrasies in the same way as driving laws.  they aren't necessarily perfect, but by agreeing to them, we can get a lot done consistently.
<daved>	__john_doe__: slow down and read my responses carefully.
<daved>	there are three options i'm laying out, although, maybe someone more intelligent would come up with more.
<daved>	you can receive a work request, call the goroutines, and return.  you can receive the request, call the goroutines and wait for all to return using a waitgroup.  you can receive the request, call the goroutines and provide them a way to communicate back to the calling code (one or more channels), and then do whatever you want with the data communicated back to the calling code.
<__john_doe__>	daved: okay so the one with channels
<__john_doe__>	i call all goroutines, wait for at least one success response and if i get it i return
<daved>	__john_doe__: you might be tempted to start a waitgroup with add(1), but if you have multiple channels call done(), you will have problems.
<__john_doe__>	"return response to the user to be specific
<__john_doe__>	but will other gorouties carry on execution?
<lemmi>	__john_doe__: and then all other goroutines get killed when your program exits
<__john_doe__>	lemmi: ok thx
<daved>	lemmi: that
<daved>	lemmi: that's not necessarily true.
<daved>	lemmi: did the program exit?  or just the calling function?  the calling function can exit without killing the goroutines.
<lemmi>	daved: of course it is. if main exits, the rest is killed
<__john_doe__>	yes but if the request comes from browser, not sure that request will be done before main exits? or maybe i can send something back to the browser?
<daved>	__john_doe__: if main exits, the server dies.
<daved>	__john_doe__: it is not likely that main will exit if your users are interacting with your application through an http server.
<lemmi>	__john_doe__: you might want to consider something like that: spawn multiple worker-goroutines that pull work from a channel until this channel is closed, thus signaling no more work will be delivered. you also need a waitgroup or a second channel to synchronize the remaining workers until all of them are finished
<__john_doe__>	okay so technically my goroutines will carry on even if i return from function that is handling request
<daved>	lemmi: i think the waitgroup is not needed.  i'll write up a play in a few minutes if anyone cares.
<daved>	brb
<__john_doe__>	tyt
<lemmi>	normally you spawn as many workers as you have cpus for parallel workload, or as many as you want to have doing io on io-heavy applications
<__john_doe__>	this is going to be cpu intensive as it's an image service
<lemmi>	daved: that's true as long he doesn't care about shutting down the thin cleanly
<__john_doe__>	that's generating thumbnails
<lemmi>	__john_doe__: doesn't matter. you might even consider splitting the part up. so have a set of workers that do the thumbnails and have a set of workers that do the uploading
<lemmi>	the number can differ
<__john_doe__>	well the one worker is doing upload, as soon as upload is successfull i activate workers to generate thumbs
<__john_doe__>	and ill put my service behind reverse proxy
<lemmi>	__john_doe__: in any case, you know what tools you might need. if you don't know how to use them, read on that up first and then decide what suits you best
<__john_doe__>	yes
<__john_doe__>	ta lemmi
<daved>	lemmi: "shutting down the thin cleanly" - depends on what is happening in the goroutines.
<daved>	__john_doe__: lemmi: "a set of workers that do the uploading" - the http handler instances are that.
<lemmi>	daved: what? you consider killing of goroutines a clean shutdown? yes at the moment http-server can not easily be shut down cleanly, so whats the point you might ask. for one, hopefully it will be implemented in 1.5, he might have to sync on something later we/he don't know about yet. he probably can use the practice
<lemmi>	daved: especially then he should think about limiting that number
<daved>	lemmi: you are thinking to narrowly and it is resulting in hyperbolic assumptions.
<daved>	lemmi: i agree that limitation may be needed, but that is a separate implementation detail.
<lemmi>	daved: other way around, i'm assuming less.
<daved>	lemmi: yes, narrow, but far-reaching assumptions.
<v0idcat>	daved: it's not *too* hard to shutdown a http server. you just need a custom listener
<daved>	v0idcat: sure.  i wasn't the one concerned with that.
<v0idcat>	daved: oh right. not seeing lines straight :)
<lemmi>	which is my point: i'm making less assumptions about the environment, so it won't break as easily when things might change (or still work cleanly for that matter)
<daved>	you can even hold/delay requests using a mutex in middleware, but depending on many factors it is probably better to return a "busy" response.
<daved>	let's either put it to code or let it rest.
<__john_doe__>	daved: if i want to put service down, i can stop receiving requests
<__john_doe__>	and wait for all coroutines to finish before i kill main
<daved>	__john_doe__: i don't think you will want to kill the main function.
<daved>	unless you want service outage entirely.
<__john_doe__>	what if i want to update my service
<daved>	__john_doe__: i suggest having a fallback in your reverse proxy.  take your primary offline and have requests go to the fallback.  bring the primary back online after updating.  then update the fallback.
<daved>	others may have better ideas.
<__john_doe__>	that's what i thought ill have 2-3 instances
<__john_doe__>	and during update put one by one down
<daved>	__john_doe__: for more than two, i would consider having a "down for maint." response as it will get more complicated.  at least it can if you have database updates, etc.
<__john_doe__>	daved: i will verson my service, so if it's minor update, it should be compatible
<__john_doe__>	if it's version update, than ill use different url, so my proxy is not going to point to that service anymore
<__john_doe__>	daved: in this case, where should i close channel? https://play.golang.org/p/nbkbmr4ztw
<daved>	__john_doe__: i'm not sure how to approach that.  maybe someone else can see how to help.  i will provide some examples based on the suggestions i made before.  after that, try to have me see it more from your need/perspective.
<__john_doe__>	daved: well if im using channels wrong, im opened for suggestions
<daved>	__john_doe__: i wouldn't say wrong, just not what i had thought you were trying to accomplish.  again, let me work a bit more on this play and then we can try to go from there.
<__john_doe__>	anyone else any suggestion on this matter? https://play.golang.org/p/nbkbmr4ztw
<jules_>	is there any way to convert int to uint?
<lemmi>	__john_doe__: your channel is never closed, use a waitgroupt
<lemmi>	and if you don't, you'll end up implementing waitgroup in worse anyway :>
<__john_doe__>	lemmi: so i can't close channel without waitgroup here? or i can use for loop instead of range
<lemmi>	__john_doe__: the actual problem is, you don't know which goroutine will be the last to stop working
<__john_doe__>	lemmi: yes
<lemmi>	__john_doe__: if your channel is closed before that and a goroutine is writing to that channel the program will panic
<jules_>	how can i convert int to uint64?
<lemmi>	jules_: uint64(you_int)
<jules_>	is there a function that lets me choose what the base of the number is?
<lemmi>	jules_: but also think about unifing your code to not need the conversion, though sometimes this isn't possible of course
<lemmi>	jules_: an integer is always base 2
<lemmi>	jules_: you are asking about string to int conversion, which is a totally different matter
<lemmi>	jules_: i'm assuming you coming fom php/js something like that?
<jules_>	js :)
<jules_>	i'm a bit confused with the syntax in go
<lemmi>	jules_: you need to parse the string, have a look at the fmt or strconv package
<lemmi>	jules_: this has nothing to do with syntax
<lemmi>	jules_: a string is not an integer
<lemmi>	it's as simple as that
<xetius>	im attempting to profile my go application, and when i run web it attempts to open in illustrator (running on a mac).  any idea how to get this to work?
<jules_>	lemmi: thanks for the help
<__john_doe__>	lemmi: how can i implement waitgroup in this case?
<lemmi>	__john_doe__: sync package
<lemmi>	__john_doe__: and if you are wondering how they did it: look at the source
<daved>	__john_doe__: code coming.  hold tight.
<daved>	you don't want a waitgroup.  i'll apologize otherwise.
<__john_doe__>	lemmi: like this? https://play.golang.org/p/5hz6nizq6m
<__john_doe__>	daved: k
<lemmi>	__john_doe__: not quite. you might miss some of the printlns that way
<__john_doe__>	lemmi: how? i'm waiting for 100 routines to finish before i exit?
<lemmi>	__john_doe__: no. your loop is in another goroutine and you don't care if it's finished or not
<lemmi>	so it might read the last value, then your main prints "done" and kills of the goroutine, thus not printing the last line
<daved>	http://play.golang.org/p/0259agb2dc
<daved>	if you need to put a hold on the server responses because you have goroutines running, there are a couple of ways to handle that, or more.  i think i might be able to implement one quickly.  but it's almost 2am here and i need to go soon.
<lemmi>	__john_doe__: http://blog.golang.org/pipelines
<dmitris>	hi!  does the command-line godoc not show docs for subpackages under “internal” path?
<dmitris>	for example, is it possible to get an equivalent of https://godoc.org/golang.org/x/text/internal/triegen#gen on the command-line?
<qwrrtz>	hello is there any way to reuse encoding/json or is there a library which offers the same functionality. i'm writing a specific type -> binary en/decoder library but doing it all with proper caching and such would take a huge amount of time.
<daved>	__john_doe__: lemmi: i'm not experienced with pipelines, so there very well could be a lot of wisdom using them.
<lemmi>	daved: yes there is. he could make good use of the last part (bounded parallelism)
<__john_doe__>	i will take a look into all of this... both suggestions and prob come back tomorrow with more questions lol
<furao>	is there a way to create a range from an int in template/html template? i have 5 and i would like to {{ range $x := something(5) }}{{ $x }}{{ end }} ?
<daved>	furao: isn't that a loop, not a range?
<daved>	s/for loop/loop/
<furao>	oh
<furao>	yeah
<furao>	i know
<furao>	sorry :)
<furao>	wait, no i can’t create a for loop like that in template right?
<sztanpet>	sure yo ucan
<furao>	sztanpet: how?
<furao>	i can’t find any usage of keyword “for” or “loop” that might be doing this in http://golang.org/pkg/html/template/
<sztanpet>	by defining a custom function for example
<furao>	ah yes that way, i tried to use vanilla html/template :)
<sztanpet>	you could also just define a template and call it and decrement the value  and check in an if its zero or not
<daved>	__john_doe__: http://play.golang.org/p/cafwgausda
<daved>	__john_doe__: but, please, still do look into whether pipelines can help you.
<daved>	gnight
<dmitris>	(never mind, figured it out - “godoc golang.org/x/text/internal/triegen gen” does work, “godoc -src golang.org/x/text/internal/triegen gen | more” as well)
<xetius>	what is runtime.goexit?
<sztanpet>	xetius would you like us to link you the manual instead of looking it up yourself?
<xetius>	ok, fair answer
<ptrb>	sztanpet: that was quite rude. is that the image you want the community to project?
<sztanpet>	ptrb for rtfm questions?
<ptrb>	sztanpet: for any earnest question.
<sztanpet>	not all questions are created equal
<hyphenated>	blunt maybe, but not really rude, imo
<xetius>	actually, i know what runtime.goexit is, but when i am profiling my code i am seeing lots of runtime.goexit… lowercase g
<ptrb>	please consider the effect you have on others' perception of the go community
<bnagy>	sets a reasonable expectation, no harsh language
<xetius>	that answer was fine ptrb
<sztanpet>	xetius those are local to the runtime package, its normal
<xetius>	i have a memory leak, and that seems to be at the root.  goes up through various http stuff
<xetius>	i don’t believe that there is something wrong with go files, but rather something i’m doing that is causing this to happen…  was trying to work out how to trace back is all
<bnagy>	xetius: how sure are you that you have a memory leak?
<xetius>	for a stateless application, it ends up running up gigs after a day or so
<bnagy>	eg most unixes are pretty lax about chewing memory nobody else wants when there's no actual pressure
<hyphenated>	xetius: goexit gets called when a goroutine is doing its cleaup..
<xetius>	ah ok.  i couldn’t find the manual page for it
<xetius>	thanks
<bnagy>	ohh.. you _could_ be leaking goroutines, that's not that hard to do
<bnagy>	you can introspect that with other runtime stuff
<hyphenated>	it could just be unbound growth of goroutines that do very little, quite quickly
<hyphenated>	you should consider having a handful of them and feeding them things to do via a channel
<bnagy>	a naive http app will have unbounded goroutine creation, right?
<xetius>	yes
<bnagy>	if the handler func is hanging trying to do something, not closing the request etc etc...
<xetius>	ah ok
<xetius>	awesome… found it… thanks
<bnagy>	what was it?
<xetius>	goroutines… thanks for the pointer.  i’m creating them slightly faster than it can manage, so currently i have 61 outstanding.
<xetius>	from 36000 requests
<bnagy>	61 goroutines is nothing :/
<bnagy>	does each one read tons of stuff into memory?
<bnagy>	k, bed
<bnagy>	luck!
<skripted>	whats unbound? without channel?
<edayo>	"a naive http app will have unbounded goroutine creation, right?" ive wondered about that going thru examples an articles
<edayo>	id have thought a "worker" pool of go routines would be safer.
<hyphenated>	well, the naive approach to connections (http or otherwise) is to spawn a goroutine for it
<hyphenated>	each one requiring memory, and having an effect on the runtime scheduler
<hyphenated>	and when completed, requiring cleanup and having a hit on the garbage collector
<edayo>	exactly, so it seems my instinct was right
<edayo>	a large worker pool makes more sense and is a bit more deterministic (in terms of system resources)
<hyphenated>	so with that approach to connections, you end up with unbounded creation, since it'll create as many as it "needs" for the circumstances, despite the effect it'll have
<edayo>	hyphenated, would you mind providing me with an example of how you might create such a pool
<hyphenated>	a "worker pool" approach won't get you very far. you still have to have done something with those connections
<edayo>	hmm
<edayo>	what then is the alternative? i was thinkin more along the lines of putting the connections in a queue
<hyphenated>	you need something smarter like rate limiting, or a bounded queue
<hyphenated>	and once it's reached capacity, you reject things
<pjvds>	instead of a pool, the acceptor should have an counter for inflight requests and use it to reject when needed.
<pjvds>	much simpler design and you don't need to create a goroutine pool for that.
<hyphenated>	it could be a mix of both, if that suits the overall circumstances better
<hyphenated>	and rate limits, bounded queue, worker pool all fail when there's goroutines leaking
<pjvds>	i don't see why it should be a mix, since if you limit at the beginning, you never create more routines than the limit.
<pjvds>	this means you don't need a bounded queue and worker pool at all.
<hyphenated>	pjvds: a static rate is only useful if everything else is static
<pjvds>	yes, the only thing it provides is bounded number of inflight requests.
<hyphenated>	so you might tune it to 10k/sec or some arbitrary amount that worked perfectly when the database was lightly loaded
<edayo>	i think what pjvds is sujesting is a situatione where the counter goes up ver each "inprogress" event and the counter decremented once the event is handled
<hyphenated>	but it's useless when the database gets a high load (overlapping some scheduled reporting), so you start building a backlog
<pjvds>	edayo, yes
<hyphenated>	and that's when the concurrency limit comes into play
<pjvds>	this pattern can also be applied at different levels, like max number of outstanding operations in a transaction.
<pjvds>	it is a way to limit concurrency.
<pjvds>	you can also use latency as a limit.
<pjvds>	instead of max inflight work.
<pjvds>	stop accepting new request as soon as 95 procentile latency gets above x.
<pjvds>	that is way more dynamic then a hard limit on number of requests.
<pjvds>	but the pattern is still the same.
<pjvds>	reject work at the beginning, instead of creating bounded queues and work pools.
<edayo>	problem with that (for this app) is that rejecting a connection might mean dropping a call
<hyphenated>	better to drop one than all of them
<hyphenated>	if you're working with phonecalls, you have a whole new set of dynamics when you reach capacity
<edayo>	perhaps i'll create a bounded queue and only queue call connection events up to a limit
<edayo>	cant do anything about the fact that there are limits, in a way pjvds is right at some point i will run outa resources, i might as well just drop connections i cant handle and simplify the design
<hyphenated>	in my experience in mobile environments, you can put those limits in, manage them perfectly and so on.. but if you hit actual capacity, you might as well give up for the night.
<hyphenated>	you need either complete control of incoming traffic in addition to the traffic handling parts, or some "spare" capacity to handle the waves of retries
<hyphenated>	in the wrong circumstances (peak hour), those waves are roughly 5x higher
<edayo>	yeah... fun times ahead! thanks for your input hyphenated, pjvds
<napsy__>	hello. i have a stack trace of my panicked program, but i can't decode the argument list in function calls as they're only hex numbers and the actual order in source is different
<napsy__>	how doe the argument list form the stack trace map back to the source
<napsy__>	?
<sztanpet>	stack trace made by go i hope
<napsy__>	yes
<napsy__>	by panic
<napsy__>	cacheprocessor(0x64256000, 0x3c6cc0, 0x3c6cc0, 0x1,
<napsy__>	actual header is
<napsy__>	cacheprocessor(rgbaimage []byte, wkrectangle common.webkitrectangleheader)
<sztanpet>	are you sure the stack trace is from the same program that you have the source of?
<napsy__>	yes
<sztanpet>	no other ideas then, sorry
<napsy__>	ok, np
<jkbbwr>	if you were hosting a go rest service, would you hide it behind a proxy or expose it directly to the web?
<hfaafb>	i'd probably proxy it through nginx
<muraiki>	that's a good question that i'd also like to know the answer to :)
<muraiki>	what's the advantage of proxying through nginx?
<jkbbwr>	muraiki: defence against resource starving attacks i would imagine
<mousetrap>	you decouple your application from the customers.
<lemmi>	muraiki: if you have several apps running on a port and ssl stuff
<mousetrap>	also, you can proxy several apps behind one nginx.
<hfaafb>	you also get some things for free like gzip encoding
<muraiki>	now if we wanted to take advantage of something like http2, can i still proxy behind nginx?
<mousetrap>	i believe there's http/2 support in nginx.
<muraiki>	to clarify, i've proxied non-go apps behind nginx before -- but go's http seemed so powerful, i was tempted to not put nginx in front
<hfaafb>	nginx can be a valuable piece of indirection
<mousetrap>	i think it's better to decouple it. if your web service goes down, your application state doesn't vanish with it. similarly, a crashing app doesn't become an unresponsive endpoint.
<muraiki>	hrm, these are good things to think about
<hfaafb>	i serve static assets through nginx
<hfaafb>	so go doesn't have to
<jkbbwr>	it upsets me that the idea of multiple points of failure is okay
<jkbbwr>	i am upset at how python is deployed, nginx > (uwsgi | gunicorn) > flask
<jkbbwr>	this bugs me
<mousetrap>	if your service doesn't need that, then you can just use go without a front-end, absolutely.
<mousetrap>	but for me, i'd rather build it to do its thing and delegate what i don't need to worry about to nginx.
<jkbbwr>	i never really serve static content
<lemmi>	but as long as don't need to, i simply fire up the go-http server and be done with it
<hfaafb>	a computer is a huge stack of potential points of failure
<_1_eslam>	yoyoyoyoy
<_1_eslam>	hey
<r00trunner>	is it possible to read from two channels simultaneously in a for loop? something like for v1, v2 := range ch1, ch2 {}
<sztanpet>	no
<mieciu>	hi, do you know any tool/example on how to write a golang wrapper to a python program? i have simple python cli app which i'd love to wrap and distribute with go as a single binary
<hinst>	you would either have to distribute all of python runtime with it or require uses to have python runtime installed on their pcs
<mieciu>	most probably i'd go for python runtime
<mieciu>	bundled in the app
<aspire>	my friend suggested that i should use go to write my server - is this wise?
<darius93>	is there a way to detect when gc kicks in (if ever)?
<kamol>	aspire: yes :)
<smw>	aspire, walk into a church and ask "should i believe in god"
<mousetrap>	aspire: you should read up on it, and decide for yourself if it meets your needs or not.
<aspire>	smw thats a fair point haha
<fooster>	darius93: you mena programatically? or debugging?
<aspire>	well mousetrap in comparison to java or scala, go is the "better" choice?
<smw>	aspire, mousetrap's answer is what i would expect from a chuch actually...
<smw>	mousetrap, :-)
<fooster>	you can see the gc with gcdebug=`gctrace=1'
<fooster>	https://golang.org/pkg/runtime/
<smw>	aspire, depends on what you are doing
<aspire>	oh i see
<smw>	aspire, use the right tool for the right job. i have no idea what the job is so i will just say use go.
<aspire>	ok quick question (idk much about go) can i use go as an alternative to php?
<mousetrap>	aspire: go's suitability compared to java and scala depends entirely on you and your project.
<aspire>	i have a web server with a get.php which queries a database and returns all of the records of a database in json format
<smw>	aspire, both are languages. you can generally use one language in place of another language...
<mousetrap>	for that, language is irrelevant. choose the one you like best.
<aspire>	can i accomplish this using go or is php really my only option
<aspire>	mhmmm
<fooster>	you can do that in go yes
<smw>	aspire, you can use just about any general purpose language for that
<aspire>	fooster so i can have like: http://mysite.com/path/to/get.go
<aspire>	and i can have it return my database records in json format?
<darius93>	fooster, debugging purposes
<mousetrap>	again, you can do that in dozens of languages.
<hfaafb>	that's not how you do web in go
<fooster>	darius93: ok, gctrace=1 is your friend.
<darius93>	thanks
<aspire>	mousetrap like what? and is go one of them
<fooster>	aspire: it wouldn't work really like with php, no
<hfaafb>	http://golang.org/pkg/net/http/#handlefunc
<aspire>	ahh
<darius93>	aspire, you have create a server with go (which it does have libraries to handle http server in net/html)
<mousetrap>	go/java/php/c/scala/python/ruby/js/c#/vb/asp/cf and more.
<mousetrap>	they're countless.
<aspire>	o
<aspire>	i see
<smw>	mousetrap, you forgot rust, d, nim, haskell
<saml>	and guile and vala
<mousetrap>	those are the "and more".
<fooster>	honestly those responses are not very helpful. yes would be sufficient ;)
<smw>	fooster, yes, but aspire is asking stupid questions and listing every language ever created is more fun
<smw>	fooster, everyone forgets scheme and haskell :-p
<jkbbwr>	and you forgot iron
<aspire>	im asking questions im interested in knowing the answer to :(
<smw>	jkbbwr, i have never heard of it
<jkbbwr>	smw: i invented it :d
<jkbbwr>	smw: its being graded right now
<smw>	lol
<jkbbwr>	whats so funny?
<smw>	graded for a class?
<smw>	jkbbwr, mousetrap we forgot brainfuck!
<jkbbwr>	final dissertation for my bsc
<nteon>	aspire: depends a bit on how you want to go about this.  do you already know php?  if so, mabye you just want to use that to get this relatively simple task done.  if you want to learn something new, go would be an efficient choice
<aspire>	nteon i know php enough to know how to do what i want to do
<saml>	go can be good alternative to php. but hosting will be more expensive compared to shared hosting with php ftp upload deployment
<smw>	jkbbwr, nice
<jkbbwr>	smw: https://github.com/jkbbwr/iron
<jkbbwr>	smw: very weird virtual machine with a silly limited subset
<aspire>	nteon i am just trying to expand my horizon of languages
<aspire>	to try new things yknow
<nteon>	aspire: so yea, then i guess the question is whether you're looking to get this task done, or accomplish the task by learning something new
<smw>	aspire, so try it :-)
<jkbbwr>	smw: im that "no stack vm" boy
<jkbbwr>	that was kicking around
<smw>	jkbbwr, i wonder if you could implement go or something on top of a turing machine vm :-)
<aspire>	nteon i like php in this case because i don't need to run any server code or anything like that - user just goes to my get.php and itll return the json
<aspire>	frankly i don't think go is an appropriate choice here - its not like im building an entire web server
<jkbbwr>	smw: probably not this one, as this one is bloody stupid. but im sure a decent one yes.
<jkbbwr>	smw: i actually did comment on how my vm could self host itself.
<saml>	aspire, with go, you can output to json file in cron job. and have nginx serve that json
<nteon>	or just proxy directly to the go binary
<aspire>	o
<aspire>	eek don't know what a cron job is
<saml>	dump-table-as-json -h mysql.example.com -db your-db  -o /var/www/wow.json
<aspire>	o
<saml>	i see. what's your database?
<saml>	your database probably has `dump` command that can output json file
<nteon>	saml: that feels more complicated than necessary.  now he has to worry about cache invalidation too, potentially
<conecto>	if you compile a go binary on a mac, do all mac boxes that will execute need the go lib installed or will it just run?
<jkbbwr>	conecto: it will just run
<conecto>	ty
<saml>	nteon, i don't think he's full web scale in the cloud.  just an http file server is good
<aspire>	saml http://stackoverflow.com/a/5036646/1255746 ooo
<nteon>	aspire: go will build the web server into the executable file for you, along with your fuction to do the db query.  php provides the web server in a different form (either a fastcgi server, or apache mod).  to me it feels like the same sort of thing either way
<aspire>	mhmm
<aspire>	i see
<saml>	yah just do it in php. you can copy paste
<nteon>	aspire: you would end up writing a function that does a similar thing whether you choose php, a go web server, or go cronjob.  you need a function taht does a db query and turns the resultset into json
<nteon>	go is probably a good fit, because the json marshalling support + annotations are super nice
<nteon>	imo
<saml>	but depending on how many requests to json file you get...  fetching entire table as json on each http request might not be a good idea aspire
<aspire>	gah well i can accomplish this in ~6 lines with php
<jkbbwr>	(pssst pagination)
<aspire>	eh saml i don't expect it be queried often
<aspire>	its only intended for local use anyway
<saml>	yah just do it in php then
<aspire>	accessible by computers on the same network as me
<saml>	local scale isn't web scale
<saml>	go is web scale only. for local scale, you can use anything
<nteon>	what does that even mean
<aspire>	ah ok php it is then, thanks for your contributions
<saml>	!next
<jkbbwr>	:( php
<jkbbwr>	ewww
<edayo>	me! me!
<jkbbwr>	i might build a paas
<edayo>	jkbbwr, what would you be doing different from all the other fellas who have built a paas
<edayo>	would it be a for the learning experience?
<jkbbwr>	edayo: they all miss the point *just* slightly
<saml>	what do you use for scraping web pages?
<smw>	saml, python :-)
<saml>	i need to do things in parallel. lots of http requests need to be made
<smw>	saml, scrapy
<saml>	danke
<smw>	saml, i have built some impressive stuff with python/scrapy
<smw>	saml, sorry if that was not the answer you were looking for :-)
<saml>	actually, i scrape one page. parse html. possibly need to execute js to load things.  then get outgoing links that meet criteria.  talk to an api regarding those links to get extra information.  output json or rss
<saml>	talk to api for each outgoing link for extra info
<saml>	i guess 500 requests max
<saml>	i'll do it in python until i need to execute js.. then has to be webkit
<smw>	saml, that is a different level entirely. phantomjs? :-)
<smw>	saml, i have never used it. i have orchestrated chrome though
<saml>	looks like i dont need to execute js. things are inlined in html already
<saml>	i guess putting go into system would take 6 months. they have python 2.6
<smw>	saml, i think go has html parsers with css selectors, i don't know them though
<smw>	and i like xpath if i can find it. but only because i know how to use xpath :-)
<salgado>	i've noticed some weird behaviour in json.marshal(). i have a type t that contains a field of type f, which implements marshaljson(). when i pass a t pointer to json.marshal() it calls the field's marshaljson(), but if i pass a t value it ignores the field's marshaljson and tells me the field's type is not supported
<salgado>	http://play.golang.org/p/pcbjictgjt shows that
<tucnak>	hey! my background project application seems to start growing, that's why i am way more interested in actual code formatting
<tucnak>	is there a way to implement some sort of "namespace" functionality from c++?
<tucnak>	so i could logically separate my code
<tucnak>	is it about nested packages? my project is a web application
<context>	loucho: https://play.golang.org/p/cpaqwfxldg
<context>	loucho: you have the wrong src in your decode
<context>	you are trying to decode the original random bytes
<quiznilo>	http://blog.golang.org/package-names a good article talking about that
<quiznilo>	well, touches on it
<quiznilo>	ya rtfm
<quiznilo>	tucnak: i don't know anything about c++ though, so i don't know if that's what you mean
<tucnak>	quiznilo: well, namespace is a language structure that allows to module some code
<hfaafb>	tucnak: no, there are no namespaces.
<yh>	hi guys.  how might i unmarshall/decode json into a nested map ?
<hfaafb>	code organization is done strictly through packages
<tucnak>	hfaafb: are nested pkgs going to work?
<hfaafb>	there's no concept of a nested package
<hfaafb>	there are only packages
<edayo>	tucnak, a package is the closest thing to c++ namespace
<yh>	i've no problem doing that into a struct with a known json schema, but i'd like my map to be an exact representation of the json structure, without up-front schema knowledge
<danmace>	quick little question about declaring and assigning a *int64 inline... is like 13 possible somehow? http://play.golang.org/p/t5rl_7qtty
<tucnak>	hfaafb: there is no concept of nested package, but there are nested pkgs, right?
<tucnak>	so what if i create a dir `bar` in main app dir `foo`
<tucnak>	and then import "./bar"
<tucnak>	is it going to work?
<context>	try it ?
<tucnak>	alright
<context>	i promise you wont start ww3 no matter what the outcome is.
<fergusl>	someone using gompd around? can't get the search functions to work !
<andlabs>	context: (you're lucky no one is here right now to start ww3 for you)
<edayo>	tucnak: ive used the following structure $gopath/src/lib/module1 , $gopath/src/lib/module2
<context>	and if it does well... congrats for finding the largest security whole in the worlds governments
<edayo>	then i import "lib/module1" seems to work or me
<context>	another week !!
<context>	oops
<hfaafb>	tucnak: you can certainly put a package wherever you want
<hfaafb>	that is the say, in the same folder as another package
<hfaafb>	or rather
<hfaafb>	if ~/foo is a package
<hfaafb>	~/foo/bar can be a package
<tucnak>	sounds neat
<hfaafb>	but it's wrong to think about foo/bar as a nested package
<tucnak>	is it the way big go apps separate their code?
<edayo>	hfaafb, i know : but as a python imigrant, it helps! :)
<tucnak>	alright, foo/bar is not nested package, it's a package located in nested directory relatively to core application package
<danmace>	is it possible to assign to an *int64 inline? for example, this doesn't work (assume `var foo *int64`): foo = &int64(1)
<tucnak>	just some language stuff
<tucnak>	doesn't make any *real* difference
<hfaafb>	the standard library has many instances of packages living one level deeper than another
<hfaafb>	it's a good way to organize your packages, if they're related, like the "net" or "encoding" packages in the standard lib
<skripted>	how would i implement http patch in go? if i pass only one field (to patch) all others are going to have set their default value after decoding and i won't be able to distinguish if the fields were ommited or set to default on purpose
<hfaafb>	but i would warn that creating a new package is a large commitment
<hfaafb>	and they shouldn't be as capriciously made as you would namespaces or modules in other languages
<quiznilo>	danmace: what do you mean by 'inline'?
<tucnak>	hfaafb: i just don't want to keep all my mux handlers in `main`
<danmace>	quiqua: http://play.golang.org/p/t5rl_7qtty
<danmace>	quiznilo: http://play.golang.org/p/t5rl_7qtty
<danmace>	quiznilo: line 13
<hfaafb>	tucnak: honestly, you probably should and can keep them to one package. there's nothing wrong with that
<quiznilo>	we have 'new' builtin... http://golang.org/pkg/builtin/#new
<hfaafb>	you don't have to put them in main, maybe you make a server package and run it from main
<hfaafb>	or just put them in main until you run into a problem
<quiznilo>	you want the 2 lines on 1 line only?
<danmace>	quiznilo: yeah... i want to make foo point to the value "1" without having to declare a variable elsewhere
<danmace>	quiznilo: new doesn't let me initialize a non-default value
<tucnak>	hfaafb: i am afraid that there are like two (at the moment) methods with identical name, but different url scopes, so i came to a stupid workaround by prefixing "dashboard_", "preferences_" these methods and it seems kinda, rusty
<tucnak>	hfaafb: is it a bad practice in go to make use of "nested" packages in common web application?
<hfaafb>	tucnak: naming things is hard, but spreading handlers out between packages is a misuse
<tucnak>	wait a sec, is it just an ideological thing?
<tucnak>	i like many go concepts, but cmon in the meantime i'd love to keep my code module, not just spread inside a single package
<hfaafb>	code organization is not modularity
<tucnak>	hfaafb: code organisation is religion
<hfaafb>	but you're a free man, please feel free to spread your handlers among all the packages you desire
<tucnak>	you say that like it's smth i should feel shame for
<bhenderson>	if i'm reading bytes from a file, when would it not read len([]byte)?
<context>	bhenderson: when there are not len([]byte) to read
<quiznilo>	danmace: i'd just do this: http://play.golang.org/p/tdthpzd1yu
<quiznilo>	i roll that way
<bhenderson>	context: is it also true when len([]byte) > atomic read?
<bhenderson>	atomic might be the wrong word
<context>	bhenderson: that i dont know.
<bhenderson>	ok, thanks
<quiznilo>	using 2 lines to initialize a pointer never bothered me though
<ojacobson>	does go have a utility for resolving a program against $path, or do i have to cook that up myself?
<ojacobson>	(i don't want to run it, i want to know _where it is_, if it exists.)
<ojacobson>	eg. given path=/usr/bin:/bin:/usr/sbin:/sbin, resolve("cat") would yield "/bin/cat" and resolve("foo/cat") would yield "foo/cat" unchanged
<gra1>	i am trying to use gdb in my emacs to debug my executable main , i am getting no such file or directoary gdb, any one run in this problem..? (sorry it s not a pure go question)
<quiznilo>	afaik, pure go doesn't have the symbols gdb requires
<quiznilo>	i don't know about gccgo or cgo
<ojacobson>	ah, i want os/exec's "lookpath"
<quiznilo>	gra1: anyway, just cd to directory with the bin and gdb <bin>
<quiznilo>	and then 'run'
<quiznilo>	try outside of emacs heh
<gra1>	quiznilo it s working outside emacs
<quiznilo>	can you get gdb working on any executable inside of emacs?  try /usr/bin/lsof or something crazy
<quiznilo>	go doesn't necessarily require gdb though, it has a lot of builtin debugging features
<bhenderson>	when you do: s := "hi"; s2 := s;   i know s2 is a copy of s, but is the underlying byte array the same?
<tucnak>	 guys, i know that this might irritate you, but is there a way to handle errors from nested function call in the stack without tons of `if` statements?
<bradhe>	anyone ever have go get prefer connecting over http vs. connecting over ssh to github.com? anyone know what settins control that??
<cronos>	bradhe: i believe it uses https by default
<cronos>	tucnak: "tons of if statements" is the idiomatic approach
<cronos>	some rare cases (complex recursion) can use panic-recover as control flow but it's likely not what you want
<quiznilo>	never not use recursion
<tucnak>	cronos: am i right that recover() can catch errors exposed from the functions on the stack?
<cronos>	tucnak: recover catches panics
<cronos>	you have to explicitly panic some value for it to trigger
<tucnak>	i see
<tucnak>	but suppose you have a call stack with 5 functions
<daved>	for some reason i'm having trouble understanding when i should pass variables into an anonymous function as args versus when i should just call them from within the function.  would someone, please, help me understand the when and why here?
<tucnak>	a root function has a defer statement with recover() call
<tucnak>	and the inner function panics
<tucnak>	is it going to get caught?
<cronos>	yes
<cronos>	but as i said your case doesn't sound suitable
<tucnak>	cronos: alright, just to clarify, am i right that in case of my web application, suppose it couldn't connect to database somewhere on the stack, should i panic and catch it in the recover call of root function?
<cronos>	tucnak: no, you should bubble up errors
<cronos>	you get used to it pretty quickly
<tucnak>	cronos: and pass them aaaaall the way up to stack?
<cronos>	yup
<cronos>	unless you can handle them earlier
<tucnak>	cronos: sounds like a dirty solution
<cronos>	it's way cleaner and prettier than panics
<cronos>	and way safer
<cronos>	this is the most common complaint of people coming to go, trust me
<tucnak>	cronos: try-catch e.g. from java seems to look greater on this particular usecase
<cronos>	go explicitly doesn't have exceptions
<tucnak>	i know
<tucnak>	again, i am talking on this particular usecase
<cronos>	tucnak: http://golang.org/doc/faq#exceptions
<tucnak>	cronos: read it, twice
<cronos>	this particular use case is very simple
<cronos>	i have way deeper stacks with errors
<tucnak>	and you pass them aaaaall the way up to stack?
<tucnak>	and feel okay with and all the mental tax it takes to maintain all calls with `if err != nil`?
<andlabs>	[12:30] <tucnak> and you pass them aaaaall the way up to stack?
<andlabs>	if you can't handle them yourself
<andlabs>	it's like transparent drawing
<andlabs>	something has to catch them eventually
<tucnak>	that's like how it works with exceptions
<andlabs>	it doesn't matter what error handling ssystem you use, mind
<andlabs>	yes that is
<andlabs>	except exceptions just make you not have to spell it out
<tucnak>	sry, by accident
<tucnak>	>except exceptions just make you not have to spell it out
<tucnak>	hold on
<tucnak>	i head that exceptions are evil, but are they really that evil?
<andlabs>	no
<andlabs>	they're very subtle, though
<andlabs>	very easy to get wrng
<andlabs>	http://blogs.msdn.com/b/oldnewthing/archive/2004/04/22/118161.aspx
<andlabs>	http://blogs.msdn.com/b/oldnewthing/archive/2005/01/14/352949.aspx
<andlabs>	it's harder to fall into this trap if you have to check for errors at the point where it's called because you have to do something
<andlabs>	it's still possible to misbehave even with error values
<kdr2>	daved: from this file: https://github.com/golang/go/blob/master/doc/go_spec.html
<skelterjohn>	daved: how many different combinations of templates can be chosen by the user?
<daved>	depends on the settings, and created templates.  so, one brand may or may not have the embedded template.  and if it does, it may not override the default.
<daved>	kdr2: the second link is source and the other is generated automatically.
<skelterjohn>	daved: how do brands and themes relate?
<daved>	kdr2: http://blog.golang.org/godoc-documenting-go-code
<skelterjohn>	daved: but it seems like for a given url, you have a template that is executed, with subtemplates determined by the brand/theme?
<kdr2>	daved: thx
<daved>	kdr2: follow a commenting convention and use a public repo (or run godoc -http={addr} on your local machine) and documentation is generated for you.
<daved>	kdr2: you do not need to generate it and save it to your repo or serve it.
<daved>	kdr2: if you do not use a public repo, running `godoc -http=6060` will allow you to visit localhost:6060 and see the generated docs.
<daved>	skelterjohn: every template is determined by brand/theme/url.
<skelterjohn>	daved: how many brand/theme/url combinations are there?
<skelterjohn>	probably not too many to precompile all of them
<daved>	skelterjohn: during startup, i cache the directory contents.  when a request comes, it will execute the correct template based on the theme/fall-back rules.
<daved>	skelterjohn: everything is parsed at startup too.
<skelterjohn>	daved: i'm just not sure why you think you need to execute the template in a function
<skelterjohn>	tmplforthisbrandthemeurl := template.new("id").parse(filesforthisurl).parse(filesforthistheme).parse(filesforthisbrand)
<daved>	skelterjohn: i couldn't find another way to get themable (with fall-back) embedded templates to work.
<skelterjohn>	you can do the fallback by preparsing every combination
<skelterjohn>	not just every template, but every combination of templates
<daved>	skelterjohn: that sounds strange.  so my angular partials (which none have embeds at this time) will also have a sibling which has been parsed along with every possibly inherited file available?
<skelterjohn>	no........
<daved>	does parsing repeatedly simply create one long template?
<skelterjohn>	tmpl1a = parse(1).parse(a)
<skelterjohn>	tmpl1b = parse(1).parse(b)
<skelterjohn>	tmpl2a = parse(2).parse(a)
<skelterjohn>	etc
<skelterjohn>	and ... sort of. parsing another string with a {{define}} lets you use that define elsewhere in the template
<ggerman>	daved: you test revel?
<daved>	ggerman: a long while ago, yes
<ggerman>	if you use revel can use the routes and templates from framework
<ggerman>	may be can help in your problem
<daved>	ggerman: using revel would demolish my chances at building a flexible system.  i'm really happy not using a whole framework.
<ggerman>	your project is open source or close?
<ggerman>	may be if you have a github
<ggerman>	may i help you
<daved>	skelterjohn: how would you suggest building the chains?  you're suggesting to overshoot the need, right?
<skelterjohn>	yeah just build all possible
<skelterjohn>	you've got a list of themes, a list of brands, and a list of possible paths
<skelterjohn>	presuming a little bit on that last one, but hopefully the paths map to a finite set of templating options
<skelterjohn>	and then in a triple loop you parse them all up into a chain per combination
<skelterjohn>	store that somewhere, and use it ready-to-go when the request comes
<skelterjohn>	bed time
<daved>	skelterjohn: of course there are things i'm not clarifying - i'm using a front "switch" function which will test for the type of request it seems like it is.  so, tmpl/html requests are send to a template handler function, requests with "_ar" or "_ap" are sent off to be handled by an asset handler (public is easy to serve, obviously, but private assets are managed), etc.
<skelterjohn>	sure, so i'll loosely call that the 'class'
<skelterjohn>	the url determines the class of template used
<daved>	skelterjohn: that is to say that there is a lot going on, even pre-ordering of templates and assets for the fall-back/theming setup.  i'll look more into adding the parsing up-front, but it's been a tax on my abilities so far.
<skelterjohn>	so, need a parse chain for every brand/theme/class combo
<daved>	skelterjohn: i heard you like chains...
<skelterjohn>	it just seems like the right solution for this kind of problem
<daved>	skelterjohn: my theming is a chain, so the parsing of possible chains is a chain of chains...
<skelterjohn>	chain chain chain..... chain of foooools.....
<daved>	skelterjohn: https://www.youtube.com/watch?v=xgenxtn2hzk
<skelterjohn>	if i wrote the code i'd have an applytheme(thm, tmpl) helper
<skelterjohn>	`tmpl_thm = apply(thm, tmpl)` that is
<skelterjohn>	that sounds like this "new age" music i hear about
<daved>	skelterjohn: adding to my problem here is that i'm using unrolled/render.
<daved>	skelterjohn: it's from one of the most iconic grunge bands of the 90s
<skelterjohn>	i saw a comment about that in the snip, but i don't know what unrolled/render refers to
<skelterjohn>	daved: can't be that iconic if i was a teenager in the 90s and don't know them
<skelterjohn>	daved: from the wiki " it was formed in 2001" =p
<skelterjohn>	so, not the 90s
<daved>	sunny day real estate?  foo fighters?  just about anyone in the "emo" scene was influence by enigk (the singer)
<daved>	skelterjohn: the fire theft was a short-live revival of sunny day.
<daved>	if you like this sort of music, jeremy enigk is absolutely amazing.
<daved>	especially live
<skelterjohn>	anyway, bed time
<daved>	sleep well
<kdr2>	daved: i got the document :) thk u very much
<daved>	kdr2: np
<jayunit100>	i had to set goroot=/usr/lib/golang on fedora.
<jayunit100>	but i have seen alot of talk about how goroot shouldnt be manually set.
<hyphenated>	jayunit100: it generally shouldn't. it's baked into the 'go' tool
<hyphenated>	you only set it if you install things into a surprising place
<jayunit100>	its amazing, because if i run "go env goroot"
<jayunit100>	it give the exact same answer, but if i unset goroot, i get compile errors (cant find "fmt")
<jayunit100>	so , somehow, goroot is only honored if its an env var.
<jayunit100>	could be related to packaging i guess
<hyphenated>	that sounds unusual
<hyphenated>	so you can do: export goroot=/usr/lib/golang; go env goroot; unset goroot; go env goroot; and get the same answer both times?
<drocha>	where can i found a good example of a c union like datatype implemented in golang?
<daved>	drocha: i don't know how to answer you, but found this - http://stackoverflow.com/questions/14581063/golang-cgo-converting-union-field-to-go-type
<mortdeus>	drocha, the closest you can get is a struct of pointers that all reference the same interface{}
<zeebo>	type myunion [n]byte // n is big enough for every variant i hope.; func (m *myunion) asbool() *bool { return (*bool)(unsafe.pointer(m)) }
<zeebo>	oh i wonder if you store a **t in it i bet the gc won't walk it anymore
<zeebo>	welp
<mortdeus>	drocha, or you can use the unsafe package to convert a type pointer to a different type pointer.
<zeebo>	reinterpreting through pointers is probably impossible (re: very hard and not worth it) now
<zeebo>	since no longer conservative gc
<zeebo>	so stop worrying about memory and just store all the variants inline or in an interface or use a different language
<drocha>	the idea is create a object where i have a field type and value, based in field type i know how to work with value, but using safe code.
<andlabs>	my head
<nilium>	indeed.
<andlabs>	can you be more specific
<zeebo>	that's called an interface
<zeebo>	interface values encode the type along with a pointer to the data
<zeebo>	so then you type switch to get the concrete type out
<zeebo>	if you need the concrete type. perhaps virtual dispatch is enough
<zeebo>	example inc
<zeebo>	http://play.golang.org/p/ssl7i3qra5
<drocha>	zeebo, thanks =]
<daved>	is using slashes in template names silly or error prone?
<daved>	e.g. {{template "sub/test" .}}
<isxek>	anyone know of an example in go using the flag package to implement cli subcommands?
<daved>	isxek: i'm not sure if this applies, but it might - http://dave.cheney.net/2013/11/07/subcommand-handling-in-go
<isxek>	daved: will take a look, thanks!
<daved>	ggerman: still on?
<daved>	isxek: np
<nemith>	i have a somewhat complex library i am working with.  is there a way to trace where an error is originating from
<ebonics>	nemith, it should tell you in the stack trace
<nemith>	if i panic on the err is just get where i paniced
<nemith>	i mean an errror return value
<daved>	nemith: the error itself should lead you to an answer.
<daved>	which function did you call to get the error?  how is that return value generated?  etc.
<daved>	otherwise, using the trace alone, normally i can read further and see where it probably originated
<nemith>	yeah i am afraid of that
<nemith>	it;s some somewhat nasty generated code
<daved>	dont be scurred
<nemith>	yeah i got it
<jfojtl>	why some project contains .godir?
<jfojtl>	is there some tool that can work with that?
<v0idcat>	jfojtl: heroku buildpacks iirc
<jfojtl>	v0idcat thanks. will check that.
<aep>	how would i require client x509 authentication in an ssl server?
<aep>	error reading: tls: failed to parse client certificate: parsing time "201401010000z" as "20060102150405z0700": cannot parse "z" as "05"
<aep>	thats what i get when i try so far
<hyphenated>	aep: add two more zeroes before the z
<aep>	uuhm, what?
<aep>	i didnt put those anywhere
<hyphenated>	they came from the certificate somewhere?
<aep>	maybe,  but they're encrypted. i cant change them :d
<sammy007>	what is faster way to compare *big.int to int?
<hyphenated>	aep: well the certificate sounds like it's incorrectly encoded
<aep>	pretty sure it isnt. its in production with several different stacks
<aep>	on thousands of machines
<foofoobar>	there was a tool/method to see where my code is using the most cpu cycles/time in, can someone give me a hint where to find this ?
<hyphenated>	foofoobar: pprof ..
<foofoobar>	hyphenated: thanks
<zhaoyeming>	when using a map as receiver, only small amount of data (the map reference?) will be copied to the func?
<foofoobar>	hyphenated: damn, looks like pprof is bugged on osx?
<foofoobar>	i get over 80% for „runtime.mach_semaphore_wait“, googling this just refers to a kernel bug in osx :/
<sztanpet>	correct, stop using osx
<foofoobar>	sztanpet: thanks for this helpful insight
<azzkikr>	what tools can i use to run tests when files have changed?
<codingrogue>	azzkikr: good question, i'd like to know that too
<azzkikr>	what tools can i use to run tests when files have changed?
<azzkikr>	whoops, wrong window
<azzkikr>	wanted to redo a command by pressing up + return key :p
<azzkikr>	anyway, probably something with inotify or such
<qknight>	https://golang.org/pkg/net/url
<qknight>	if i want a global variable url, how to do that?
<qknight>	in the example there is u, err := url.parse("http://bing.com/search?q=dotnet")
<qknight>	but i do have to assign the value later on in the script
<diealienscum>	updating fixed it
<diealienscum>	nvm wrong chan
<qknight>	i could use a string to bypass this problem (and later do parse on that string) but i would like to know how to do it using a u url and later do u, err := url.parse(urlstr);
<diealienscum>	just put it outside of the function ie, var abc string = ""  and use it later its a global
<qknight>	diealienscum: i don't want to use string
<qknight>	diealienscum: i want to use url
<diealienscum>	ok use url :)
<qknight>	how to do that?
<qknight>	diealienscum: it does not work, it tells me undefined url
<qknight>	 u := *url
<qknight>	 u url
<qknight>	 u url
<qknight>	i've tried a few different notations and i don't get it
<diealienscum>	yea dats a good point
<diealienscum>	if its outside of the func you cant use := you have to use var
<diealienscum>	and im not sure if it has a nil value, a lot of types have a nil value
<hyphenated>	qknight: http://play.golang.org/p/bp1xl1g5oy
<qknight>	hyphenated, diealienscum: i've been using the wrong type as it is: url.url!
<qknight>	thanks to both of you
<qknight>	how to 'break' a doc.find("a").each(....) loop btw?
<qknight>	it seems that can't be googled
<diealienscum>	yea i was just gonna say that
<diealienscum>	gl
<qknight>	i really tried
<qknight>	oh, could this be goquery specific, this .each(...)
<qknight>	that would exaplin it
<pmezard>	yes
<qknight>	thanks
<pmezard>	just look at the code anyway, it invokes the callback which has no return value
<pmezard>	the only way to break from that would be with a panic, and that's not exactly meant to be used that way
<pmezard>	just loop on the s.nodes yourself
<qknight>	yeah, maybe a good point
<qknight>	thanks very much
<diealienscum>	https://play.golang.org/p/vgeogn30pg
<diealienscum>	im not sure why this doesnt work
<diealienscum>	whats the way to do that neway?
<pmezard>	pointer vs value
<diealienscum>	oh i never read the url docs
<diealienscum>	derp
<diealienscum>	https://play.golang.org/p/-ej5l2nqzw
<diealienscum>	ty
<diealienscum>	far out
<hotcockdotcom>	i always thought you had to initialize when you used var
<hotcockdotcom>	i was so mad types like url and others dont have a type.nil value
<hotcockdotcom>	derp
<hotcockdotcom>	had no idea you could just do "var a url.url" and be done with it
<pmezard>	all types have a zero value, it does not mean you can use it
<hotcockdotcom>	but does it == nil?
<hotcockdotcom>	so i can test it?
<skelterjohn>	hotcockdotcom: any particular reason you need to use that nick?
<hotcockdotcom>	its my site url
<skelterjohn>	so?
<guyinabananasuit>	sry...
<pmezard>	https://golang.org/ref/spec#the_zero_value
<guyinabananasuit>	idk i guess u cant
<skelterjohn>	if go were a language that had lots of extra features for offering additional clarity but no more power, we'd have a 'zero' keyword
<skelterjohn>	var a url.url = zero
<skelterjohn>	guyinabananasuit: you can always test out questions like the one you asked by spending 15 seconds on play.golang.org
<guyinabananasuit>	ive spent like hours on it already
<skelterjohn>	so another 15 seconds will be easy :)
<guyinabananasuit>	its definitely a different way of thinking
<guyinabananasuit>	var g map[int]int   //  == nil
<pmezard>	slices, maps and channels are exceptions
<guyinabananasuit>	var g url.url // == empty struct
<skelterjohn>	pmezard: exceptions to what?
<pmezard>	to some kind of mental model where zero values are something and not nil (and i should probably add interfaces)
<guyinabananasuit>	oh well i get it now
<guyinabananasuit>	its probably so "" and 0 dont pass a nil check
<skelterjohn>	maps, slices, and chans are pointers-in-disguise
<guyinabananasuit>	thats good to know :)
<skelterjohn>	you can say m := othermap, and operations on m might as well be operations on othermap
<skelterjohn>	same with slices and chans
<pmezard>	(and functions, and everything else in the spec list :-)
<skelterjohn>	though to be clear, s = append(s, e) is *not* an operation on a slice
<skelterjohn>	it's creating a new slice
<skelterjohn>	but s1 := s2; s1[0] = e is the same as s2[0] = e
<skelterjohn>	anyway, time to go to  work ttyl
<mag-en00b>	every unassigned variable in go has a value. if the variable is a "pointer type", then it's value is nil, otherwise it's the zero value of the said variable's type (0 for int, "" for string, etc.)
<guyinabananasuit>	unless its the type.nil child value ^_^
<guyinabananasuit>	thx tho i think i get it now
<jkbbwr>	mag-en00b: something i miss from python is "false-like" behaviour
<jkbbwr>	a = []; if not a: print "empty"
<mag-en00b>	im not familiar with python :c
<jkbbwr>	mag-en00b: see above.
<jkbbwr>	mag-en00b: empty lists/strings behave "false" when booleaned
<mag-en00b>	it's quicker but in a complex case it makes errors easier to appear ithink
<jkbbwr>	mag-en00b: the other thing i miss is for/else
<jkbbwr>	its a beautiful construct :3
<mag-en00b>	magic :3
<jkbbwr>	mag-en00b: https://gist.github.com/jkbbwr/87857804fe3763f219cc
<jkbbwr>	its nice
<hyphenated>	the problem with constructs like that isn't when they're used appropriately, but when they're abused
<hyphenated>	then you're really tripping over yourself trying to understand what someone else wrote
<hyphenated>	that can happen in go code as well, but it's usually very obvious they're being silly, whereas in languages supporting fanciness, it's harder to tell if it's actually ugly, or just elegant at a level you didn't learn yet
<deniska>	jkbbwr: that's not how else in python works
<deniska>	jkbbwr: https://bpaste.net/show/5356dbeaf0a8
<deniska>	else is executed when a loop finished itself, without break
<jkbbwr>	deniska: what was i smoking
<deniska>	clojure has the best falsiness rules, imho
<deniska>	only nil and false are falsish, everything else is trueish
<hyphenated>	yes, i like my booleans to be mostly true or mostly false
<jayflux>	hey gophers
<jayflux>	is there a way to read go documentation from the termina (like with python), or do you need to go to the website
<pmezard>	jayflux: go doc os
<jayflux>	pmezard:  unknown subcommand "doc"
<deniska>	godoc
<jayflux>	thanks deniska
<miratcanbayrak>	hi
<miratcanbayrak>	i compiled my first hello world program with go. it created 1.3mb file. i was expecting a tiny output. complex go programs are going huge when compiled?
<deniska>	miratcanbayrak: go makes static executables which can run standalone on any system
<deniska>	that's why they're largish
<deniska>	but they won't get much bigger unless you use more libraries
<jkbbwr>	also 1.3mb isn't that big.
<jkbbwr>	in most usescases
<miratcanbayrak>	deniska thanks. that executable can run, on linux or windows? (i've compiled on mac)
<deniska>	miratcanbayrak: if you compiled on mac it can run on mac, but it is easy to cross compile
<jkbbwr>	miratcanbayrak: you need to target the platform you want it to run on. apps compiled on mac won't run on windows
<jayflux>	pmezard:  can you list all modules with that?
<jayflux>	godoc
<jayflux>	all packages*
<deniska>	by "any system" i meant the same os and cpu architecture =)
<jayflux>	oh, thats go list
<jayflux>	answered my own question
<miratcanbayrak>	:)
<jayflux>	ah that only lists custom packages not the built in ones
<miratcanbayrak>	has go built in package system like pip in python?
<jkbbwr>	miratcanbayrak: go get
<murosai>	if according to 'top' my program uses 11.5g of virtual memory and 1.6g of physical memory then why go heap profile tells my program uses only 46mb?
<murosai>	maybe memory used by stack?
<pmezard>	miratcanbayrak: there are systems out there but no builtin yet. go get does not support versioning.
<jayflux>	so im guessing there's no way to list the std library packages from the command line
<jayflux>	without going to the website
<pmezard>	go list std
<erikh>	oh neat
<jayflux>	thats caused it to hang lol
<zeroxten>	heya. don't suppose anyone knows of a library that can be used for doing finite field multiplication?
<jayflux>	pmezard:  excellent, thank you
<jayflux>	that wasn't obvious
<pmezard>	no there are a log of hidden tricks for go tools
<pmezard>	they are documented but good luck finding the documentation in the first place
<pmezard>	jayflux: in your case, go help packages
<jayflux>	yeah i tried that
<nalum>	is it possible to get access a key with a name like 5000/tcp using go templates?
<skelterjohn>	nalum: i think the keys have to be valid go identifiers
<skelterjohn>	but you can always make a function
<skelterjohn>	that will look up keys by their string values
<skelterjohn>	or maybe the index funciton does that? i'll check
<nalum>	it's in relation to the docker inspect command flag -f
<skelterjohn>	nalum: yeah you can do {{index . "5000/tcp"}}
<skelterjohn>	nalum: i did this to test http://pastebin.com/t6hqkfmc
<nalum>	skelterjohn: thanks i'll check it out now :)
<nalum>	skelterjohn: works perfectly thank you :)
<skelterjohn>	sure thing
<aep>	hm why do i get "too many open files" from tls.listen.accept after only 2 connections?
<jkbbwr>	aep: ulimit?
<smw>	aep, too many files is an os error. what is your ulimit? what is opening files?
<aep>	2 sockets...
<smw>	aep, lsof is useful in situations like this :-)
<aep>	its certainly not hitting ulimit
<chepra>	hi! i am trying to do a "go get github.com/vimeo/statsdaemon", but it's not downloading the files and not giving any output. what could cause this?
<aep>	unless golang opens 16000 files per socket
<sztanpet>	you mean your code opens 16k fds
<smw>	aep, actually, that error implies it is
<aep>	odd
<smw>	aep, lsof is quite useful for debugging this type of thing. so is strace
<aep>	its pretty instant. as soon as i get a bunch of connections, it dies. so cant use lsof
<aep>	oh yeah strace
<smw>	aep, why does it die?
<aep>	it doesnt. accept just returns an err
<aep>	i could probably ignore it and keep going
<smw>	aep, have you thought of entering a debug state so you can figure out what is going on? :-)
<aep>	[pid 30508] accept4(3, 0xc208810950, [112], sock_cloexec|sock_nonblock) = -1 emfile (too many open files)
<aep>	not sure how to do that
<aep>	its 10 lines of code :d
<smw>	aep, well, in this case, i would enter a for {time.sleep(1e12)} loop
<smw>	aep, so you can lsof :-)
<jkbbwr>	drop a breakpoint?
<aep>	oh good point
<sztanpet>	why do people not use the time constants and instead give "magic" numbers to sleep?
<smw>	sztanpet, i just picked a big number...
<smw>	sztanpet, this is debug code, i have no idea what 1e12 is...
<sztanpet>	sure, i have seen it in a multitude of places
<smw>	1000 seconds?
<smw>	aep, time.sleep
<smw>	aep, time.sleep(time.hour) to make sztanpet happy
<sztanpet>	;)
<smw>	sztanpet, you made an excellent point, best to stop giving people ideas of using magic numbers with sleep.
<smw>	sztanpet, i now feel like adding that to the go linter... :-)
<skelterjohn>	smw: that's not a bad idea at all.
<skelterjohn>	have unit-less sleeps be a lint error
<steamwells>	hi guys
<steamwells>	using this as an example
<steamwells>	https://play.golang.org/p/e-sugglla_
<kim^j>	speaking of lint, why does it require documentation to start with the function name?
<sztanpet>	i have seen it in libraries, tutorials, quite a few places, definitely worthwhile if not that abundant a problem
<steamwells>	im using a pointer to a struct
<smw>	kim^j, because some tools print assuming that.
<steamwells>	and returning of pointer of that type
<steamwells>	is that good practice?
<jkbbwr>	steamwells: you don't need to return a pointer there
<smw>	skelterjohn, but what if you really want to use nano-seconds? :-)
<kim^j>	smw: whut? so how should documentation be written according to the linter?
<steamwells>	just of type?
<steamwells>	jkbbwr: sorry, just of type configuration you mean is better?
<sztanpet>	daw, cannot open nacl module file
<kim^j>	smw: is it even possible to sleep accurately less than ms?
<sztanpet>	kim^j depends on the os, usually not
<kim^j>	iirc windows doesn't support sleeps with less accuracy than 10ms.
<smw>	steamwells, in this case, either pointer or not pointer seems fine to me
<smw>	steamwells, i would make it a pointer in case you ever add a map or slice to your struct
<chepra>	what could be wrong if "go get github.com/vimeo/statsdaemon" does not create a binary?
<kim^j>	chepra: nothing.
<jkbbwr>	steamwells: func xxx() configuration { ... }
<smw>	kim^j, good point
<smw>	kim^j, time.sleep(1) is almost certainly a bug.
<kim^j>	do go support the sleep(0) thingie in windows? (it'll tell the kernel to let this thread do something else, but give back access when that other work is done, prevents utilizing the cpu at 100% in wait loop.s)
<smw>	kim^j, as for documentation. tools assume that it can print just the description
<chepra>	kim^j: i do not understand.
<kim^j>	chepra: go get shouldn't create a binary.
<kim^j>	go get is for fetching code.
<smw>	kim^j, and that the description mentions the name of the function
<smw>	kim^j, go get will create binaries
<steamwells>	cheers smw, its just confusing when to pick a pointer to a struct or not, i still dont really get it at the moment, i mean it obviously works but i guess id prefer it at compile time if go told me dont do that, you dont need to
<kim^j>	smw: hm, well, so function here is my actual description
<steamwells>	or something
<chepra>	kim^j: i just did on a other machine and it created binaries
<kim^j>	smw: oh it will? haven't noticed it creating binaries. :s
<smw>	kim^j, it places it in gobin or gopath/bin
<smw>	steamwells, there aren't really hard rules
<kim^j>	chepra: try "go build github.com/vimeo/statsdaemon" then?
<aep>	apparantly my listen/accept routine is busy at 100% cpu. can i have two accept threads somehow?
<smw>	steamwells, can't even be linted well :-\
<steamwells>	yeh i see
<chepra>	kim^j: is there a verbose output switch? it's not returning anything
<kim^j>	chepra: go build -n is worth a try
<kim^j>	er, go build -x i mean
<chepra>	no output :(
<kim^j>	:s
<kim^j>	did you get any source?
<chepra>	"work=/tmp/go-build625872401"  thats is the only output
<chepra>	yes, it downloads the source but no binary
<aep>	how do i prevent my accept thread from starving the handler thread? http://npaste.de/p/6m1
<aep>	i have 1gb/s incomming tcp connections, the second thread never prints anything
<amandac>	what’s the gomaxprocs set to?
<aep>	4 at 2 cores
<aep>	both cores are at max
<smw>	aep, i only accept gofmt'd code in play.golang.org
<aep>	fair enough
<aep>	http://play.golang.org/p/6dorpb1mhj
<kim^j>	that code wasn't formatted! :p
<kim^j>	i absolutely *love* that there's only *one* way to format go code :d
<smw>	aep, anyways, first thing, why are you continuing the for loop?
<aep>	for debugging.
<aep>	otherwise it dies instantly without printing anything from the second thread
<aep>	the first thread just eats 65000 connections and exits without the second running more than twice maybe
<smw>	aep, what is creating those connections?
<aep>	i was thinking the sleep mitigates that
<aep>	tens of thousand of machines
<smw>	aep, what?
<aep>	its machines connecting to an ssl socket
<aep>	with a line based protocol underneath
<aep>	was just trying if go is any better at ssl offloading
<aep>	heh, i just saw a single line of payload flying by
<smw>	aep, it sounds like you are overloading your server's ability to accept connections...
<smw>	aep, i have never seen that before
<aep>	nah works fine with nodejs
<aep>	poorly but works
<chepra>	anyone may have a hint what could cause go get github.com/vimeo/statsdaemon to not compile/instrall binaries?
<amandac>	chepra: that’s not a command package
<smw>	aep, anyways, you can increase gomaxprocs
<amandac>	chepra: you probably want  github.com/vimeo/statsdaemon/statsdaemon
<smw>	aep, that will use more threads and should help
<nlcpmc>	hey quick question, i have a package that declares a struct called c (goji/web), and i copy and paste the struct into my main package, why would the goji package not recognize it as the same type if it's the same?
<aep>	smw: nope. just tried 8. second thread is still starved
<smw>	second?
<smw>	aep, you mean handleconnection?
<aep>	the handler function is barely ever called
<aep>	yeah
<smw>	aep, have you tried profiling it?
<aep>	doing that right now ;)
<smw>	aep, i mean pprof
<aep>	yeah working on it
<aep>	needs alot of code to handle the signal to close the file cleanly etc
<amandac>	aep: what if you add a print tot he beginning of handleconnection?
<aep>	good idea
<chepra>	amandac: thanks! this works. was this recently changed?
<amandac>	chepra: their commit log mentions re-structuring the code
<chepra>	ah :-)
<chepra>	thank you very much
<amandac>	aep: it might not be the thread being starved, but instead the network being saturated
<aep>	amandac: yep that is printed quite alot
<aep>	hurm
<aep>	with all cores being cpu blocked, that doesnt sound like it :d
<aep>	its probably ssl
<smw>	aep, ah, it uses one thread for all network...
<aep>	yeah i dont know how to fix that
<smw>	aep, the ssl is done per goroutine
<aep>	that was my original question
<aep>	oh. good
<smw>	aep, have you tried without ssl?
<aep>	cant do. but it will probably work
<aep>	i know this type of problem from ruby
<smw>	aep, i think you are sending way too many connections
<aep>	which does nothing useful if you starve the cpu with ssl
<smw>	aep, you are optimizing for the wrong things
<lupine>	hmm, i'm trying to open a tls connection while verifying that a specific certificate is used. i don't care about hostname or ip san validations. anyone done this?
<amandac>	lupine: the cert should be pinned to the hostname?
<smw>	aep, try testing it under real conditions
<aep>	this is reality
<smw>	aep, eh?
<aep>	that's actual traffic :p
<aep>	not a test system
<amandac>	i think that smw is confused why you’re funneling 10,000s of machines into a single 2-core machine
<lupine>	amandac, the cert has a cn, but it's not very important
<smw>	aep, +1 amandac
<lupine>	the check i want is "the presented certificate is identical to the certificate i have here"
<lupine>	(which includes "the cn is the same", of course)
<smw>	aep, if this is production, do you have a load balancer or anything?
<aep>	nah, i dont expect it to work
<aep>	i expect it to do _something_ useful
<aep>	lets try with less traffic then, fine :d
<smw>	aep, 10,000 connections with tls on a small machine is not going to work out well no matter what you are using. go's tls is also not nearly as fast as openssl
<aep>	worked with node. it just drops connections *shrug*
<smw>	aep, go doesn't drop connections :-p
<amandac>	this is one of those situations where you should be throwing more hardware at the problem.
<amandac>	dropping connections isn’t really that useful in a production-type system, either.
<aep>	sure is. the client will retry and be re-balanced
<aep>	this type of behaviour confuses our load balancer
<smw>	aep, you are asking go to do an impossible task and are upset it is failing in a different way than node failed?
<lupine>	/ keyusage status flags are ignored
<aep>	nah not upset. i'm asking how to make it fail the way i expect :d
<lupine>	amused :d
<smw>	aep, limit the number of open connections
<amandac>	surely your lb has some way to specify ‘only so many connections per host at a time”?
<smw>	go has a way to limit the number of connections
<jeko>	is revel p much the web framework you all would recommend to get started building webapps to go?
<hfaafb>	jeko: no, i don't think anyone here would recommend revel
<cgt>	jeko: no
<jeko>	ha okay
<jeko>	good to know!
<jeko>	i am *not* using it yet
<amandac>	jeko: overall, last i heard, the over-all community stance on such things was “dear god why, this isn’t ruby."
<jeko>	i don't have a lot of time to evaluate what is out there
<smw>	aep, also, i said you were overloading your computer's ability to accept connections and you said i was wrong. i was not, node just didn't accept them :-)
<cgt>	the go community is largely anti-framework. instead, use composable pieces to stitch together something useful.
<hfaafb>	jeko: commonly, net/http paired with smaller utility libraries like gorilla tools https://github.com/gorilla
<lupine>	i used revel for a couple of things
<lupine>	sort of regretted it
<lupine>	my most recent web service is a bit of a mix of tigertronic, gorilla and stdlib
<lupine>	sort of regretting the tt parts of it, but gorilla is rock solid
<aep>	smw: actually i think my code is wrong somewhere.
<aep>	according to wireshark, some clients appear to be instantly disconnected by the server
<aep>	maybe that readline is non blocking?
<aep>	or maybe there's an openssl error hidden somewhere? where would i get more info?
<amandac>	go doesn’t use openssl
<aep>	oh
<smw>	aep, go's tls is slower than openssl
<jkbbwr>	didn't someone write a tls library recently
<sztanpet>	god i hope not
<lupine>	they did one in ocaml recently
<lupine>	mostly for unikernal usage
<lupine>	unikernel*
<amandac>	jkbbwr: you mean the asm-written crypto/tls re-write that cloudflare did?
<jkbbwr>	amandac: was it that?
<amandac>	jkbbwr: i recall seeing someone post it to the g+ community for go at least.
<sztanpet>	not a rewrite either
<gra1>	how to call stored procedure, i tried rows, err := db.query("call get_zip(00761,"","", "","","","","", "","","","","", "","","","","", "")") i am getting error syntax error: unexpected string literal, expecting ) , any idea?
<jkbbwr>	gra1: you have a bunch of "" inside your ""
<gra1>	jkbbwr i have to send null value if the parameter has no value
<amandac>	gra1: ty db.query(`call get_zip(…)`) instead of db.query(“call get_zip(…)”)
<amandac>	( backtics instead of quotes )
<amandac>	s/ty/try/
<gra1>	amanadac thanks it works
<jeko>	i am trying to put together a poc on deis to motivate my colleagues to start building with go
<jeko>	i was looking at revel, but thanks for the tips fellas
<jeko>	i see the gitbook uses gorilla for their examples
<jkbbwr>	jeko: negroni is kinda nice
<jeko>	i was looking at this: https://www.gitbook.com/book/codegangsta/building-web-apps-with-go/details
<jeko>	s/heroku/deis
<skelterjohn>	smw: time.nanosecond
<daved>	skelterjohn: good morning
<skelterjohn>	daved: hey how are you
<smw>	skelterjohn, i forgot that existed
<daved>	skelterjohn: tired, but good.  i started working over ideas for template "importing" and have a couple of thoughts and would appreciate your criticism.
<smw>	skelterjohn, ok, i approve of a rule requiring units for non-duration arguments to sleep
<skelterjohn>	daved: sure, any time
<skelterjohn>	daved: no guarantees at turnaround time though, since i'm at work
<smw>	skelterjohn, if it is being converted inline, then it should still require a unit.
<daved>	skelterjohn: i'll improve my example(s) and post it in a while.
<gra1>	when i call my stored procdedure i am getting an error error 1312: procedure can't return a result set in the given context , is this coming from the procedure itself or go , any idea?
<skelterjohn>	gra1: seems like it comes from the db
<skelterjohn>	gra1: but it probably depends on what drivers you're using
<gra1>	skelterjohn, i am using mysql when i execute the procedure directly in sql , it s working , the parametrs in sp is waiting value or null , in my call i am sendig (“”) , could this be the error ?
<skelterjohn>	when you say 'stored procedure' to you mean a prepared statement, or a procedure stored on the db server side?
<gra1>	skelterjohn is a procedure in the server side
<qknight>	when i use goquery, i do stuff like: doc.find("a").each(func(i int, s* goquery.selection) { <- which uses an anonymouse function, right?
<amandac>	qknight: yes
<jmoiron>	i submitted a patch a while ago
<qknight>	amandac: thanks
<jmoiron>	to add a '.all()' which returns a slice instead so you could use normal range loops to iterate
<qknight>	that might explain why a variable declared outside is not valid within that scope (probably as i did not pass it via the function call)
<jmoiron>	and it was rejected because that doesn't exist in jquery
<pmezard>	jmoiron: instead of looping on s.nodes + s.sel(i)?
<jmoiron>	yes
<jmoiron>	that feels a bit unnatural
<pmezard>	sure
<henesy>	is it at all possible to create a pointer to an array?
<henesy>	not an element of an array, but the array itself? currently trying: http://play.golang.org/p/agqfvifh5f
<hfaafb>	yes! it's called a slice
<henesy>	hfaafb: how does one go about this? at least syntactically?
<henesy>	i realize that's what slices are, but i'm not sure how to declare something similar myself
<jmoiron>	henesy: 'arr' in your example is a slice
<hfaafb>	henesy: `arr` in there is a slice
<smw>	henesy, that is a slice, not an array. and that is a pointer to a slice
<henesy>	smw: are pointers to slices not allowed?
<jmoiron>	in go an array type includes its size, so [4]int is a distinct type from [8]int
<henesy>	ah okay
<sztanpet>	henesy http://golang.org/pkg/reflect/#sliceheader thats what a slice is behind the scenes, you only need a pointer to a slice if you need to append to it
<jmoiron>	henesy: pointers to slices are allowed
<hfaafb>	henesy: http://play.golang.org/p/wlbhnnt4zf
<smw>	henesy, they are allowed, but you can't index them
<jmoiron>	not directly
<smw>	henesy, (*arr)[0] will work. the real question is why you want a pointer to a slice
<jmoiron>	http://research.swtch.com/godata
<henesy>	smw: to pass said slice to a function
<jmoiron>	henesy: you can already pass it to a function
<henesy>	without copying
<smw>	henesy, not a good reason :-)
<hfaafb>	all values are copied
<jmoiron>	henesy: a slice is constant sized
<hfaafb>	passing a slice around is essentially passing a pointer to an underlying array around
<hfaafb>	so there's no deep copying of array contents
<henesy>	yeah, that's what i'm aiming for, i think
<jmoiron>	look at the sliceheader link above
<jmoiron>	that's what a slice is
<jmoiron>	ptr,len,cap
<henesy>	jmoiron: looking into it, thanks for that. i was mistaken in a few things here, pointer use as well
<jmoiron>	no problem
<qknight>	what is a good way to get a variable processed inside a anonymous function? passing it as argument?
<qknight>	http://godoc.org/github.com/puerkitobio/goquery#selection.eachwithbreak <- for example when i use this
<qknight>	  doc.find("a").eachwithbreak(func(i int, s* goquery.selection) bool {
<qknight>	      f := strings.trim(s.text(), "\r\n\t" + " ")
<qknight>	so right now i return true or false to stop further processing but how to return a further value from the anonymous function in that case?
<henesy>	jmoiron: so the pointer to the slice requires the extra '*' because a slice is already a pointer, thus specifying to descend another level into the pointer?
<hfaafb>	henesy: a slice is not a pointer, its like a struct with 3 fields
<hfaafb>	one of those fields is a pointer to an array
<hfaafb>	pointer syntax does not change for slices, or any type
<hfaafb>	you can't index (read: access a value like arr[i]) a pointer because pointers just aren't indexable like slices are
<henesy>	yeah, just trying to mentally reason why the asterisks is required for the indexing, but not for standalone things like struct pointers, which i can just define at function declaration as (r *rectangle) or something similar, then just use r.length=1 or something similar, but it's required for the slice
<hfaafb>	so you have to reify a pointer with *
<henesy>	ah okay
<henesy>	that's what i was asking i believe
<henesy>	so it'd be asking for an index of the pointer
<henesy>	not the object pointed to?
<hfaafb>	uhh not sure what you mean there, but probably no
<henesy>	hfaafb: sorry for the noise, i'll read up on pointers, i don't think i understand some part of the core concept
<hfaafb>	i believe there's some "automatic" reification of pointers that is hidden
<hfaafb>	for things like pointers to structs, or method dispatching, not entirely sure on that though
<hfaafb>	in this case, you must get the value at the address pointed by the pointer before accessing it
<henesy>	hfaafb: like this: http://play.golang.org/p/jwinjjpgpz ?
<henesy>	for the automatice reification
<hfaafb>	no, that's explicit
<lungaro>	is there an efficient way to zero a structure in go without alloc'ing a new one?
<lungaro>	*blah = &zerovalue maybe?
<djx>	hey, how can i make this working? http://play.golang.org/p/r0jeb4_mul
<hfaafb>	djx: foo isn't type bar
<djx>	hfaafb: it is almost...
<sztanpet>	the error that is printed cannot be more clear surely
<hfaafb>	djx: what do you expect to happen?
<lungaro>	magic!
<djx>	lol
<djx>	hfaafb: is it possible to conver foo in bar?
<djx>	knowing they are the same?
<djx>	essentially the same*
<hfaafb>	absolutely
<hfaafb>	http://play.golang.org/p/wiv3ytqqq9
<djx>	ah
<djx>	that's the magic
<hfaafb>	that's type conversion
<djx>	hfaafb: what's the type.(stuff) called?
<hfaafb>	https://golang.org/ref/spec#conversions
<jkbbwr>	type assertion
<djx>	tks for the link
<djx>	nice
<hfaafb>	also https://golang.org/ref/spec#type_assertions
<skelterjohn>	lungaro: var blah *t; blah = new(t) ... *blah = &t{}
<cassyblanca>	well, if goquery's intent is to be nothing more than jquery but for go, that makes sense, even if it can be somewhat arbitrarily restrictive.
<cassyblanca>	why not just fork goquery?
<benth>	i'd like to statically link a library (libpcap) to my go program, which is currently being dynamically linked. how can i do this?
<lungaro>	thanks skelterjohn. turns out i didn't even need it =p
<ritic_>	i get a string containing marshalled data from a service, how do i get this data into a []byte so that i can unmarshall it?
<ritic_>	i.e. "eyjkb2n1bwvudci6imnvbnrlbnqifq==" -> eyjkb2n1bwvudci6imnvbnrlbnqifq==
byte(thestring)
